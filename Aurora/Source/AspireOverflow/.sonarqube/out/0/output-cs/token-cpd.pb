‹Ò
ZC:\Users\manimaran.venkat\Documents\Backup\AspireOverflow\Controllers\ArticleController.cs
	namespace		 	
AspireOverflow		
 
.		 
Controllers		 $
{		$ %
[

 
ApiController

 
]

 
[ 
	Authorize 

]
 
[ 
Route 
( 
$str 
) 
]  
public 
class 
ArticleController 
:  
BaseController! /
{ 
private 
readonly 
ILogger 
< 
ArticleController .
>. /
_logger0 7
;7 8
private 
readonly 
IArticleService $
_articleService% 4
;4 5
public 

ArticleController 
( 
ILogger $
<$ %
ArticleController% 6
>6 7
logger8 >
,> ?
IArticleService@ O
articleServiceP ^
)^ _
{ 
_logger 
= 
logger 
; 
_articleService 
= 
articleService (
;( )
} 
[22 
HttpPost22 
]22 
public33 

async33 
Task33 
<33 
ActionResult33 "
>33" #
CreateArticle33$ 1
(331 2
Article332 9
article33: A
)33A B
{44 
if55 

(55 
article55 
==55 
null55 
)55 
return55 #

BadRequest55$ .
(55. /
Message55/ 6
(556 7
$str557 T
)55T U
)55U V
;55V W
try66 
{77 	
article88 
.88 
	CreatedBy88 
=88 
GetCurrentUser88  .
(88. /
)88/ 0
.880 1
UserId881 7
;887 8
return99 
_articleService99 "
.99" #
CreateArticle99# 0
(990 1
article991 8
)998 9
?99: ;
await99< A
Task99B F
.99F G

FromResult99G Q
(99Q R
Ok99R T
(99T U
Message99U \
(99\ ]
$str99] s
)99s t
)99t u
)99u v
:99w x

BadRequest	99y ƒ
(
99ƒ „
Message
99„ ‹
(
99‹ Œ
$"
99Œ 
$str
99 ±
"
99± ²
,
99² ³
article
99´ »
)
99» ¼
)
99¼ ½
;
99½ ¾
}:: 	
catch;; 
(;; 
ValidationException;; "
	exception;;# ,
);;, -
{<< 	
_logger>> 
.>> 
LogError>> 
(>> 
HelperService>> *
.>>* +
LoggerMessage>>+ 8
(>>8 9
$str>>9 L
,>>L M
$str>>N n
,>>n o
	exception>>p y
,>>y z
article	>>{ ‚
)
>>‚ ƒ
)
>>ƒ „
;
>>„ …
return?? 

BadRequest?? 
(?? 
Message?? %
(??% &
	exception??& /
.??/ 0
Message??0 7
,??7 8
article??9 @
)??@ A
)??A B
;??B C
}@@ 	
catchAA 
(AA 
	ExceptionAA 
	exceptionAA "
)AA" #
{BB 	
_loggerCC 
.CC 
LogErrorCC 
(CC 
HelperServiceCC *
.CC* +
LoggerMessageCC+ 8
(CC8 9
$strCC9 L
,CCL M
$strCCN n
,CCn o
	exceptionCCp y
,CCy z
article	CC{ ‚
)
CC‚ ƒ
)
CCƒ „
;
CC„ …
returnDD 
ProblemDD 
(DD 
$"DD 
$strDD A
{DDA B
HelperServiceDDB O
.DDO P
PropertyListDDP \
(DD\ ]
articleDD] d
)DDd e
}DDe f
"DDf g
)DDg h
;DDh i
}EE 	
}FF 
[aa 
HttpPostaa 
]aa 
publiccc 

asynccc 
Taskcc 
<cc 
ActionResultcc "
>cc" # 
CreatePrivateArticlecc$ 8
(cc8 9
PrivateArticleDtocc9 J
privateArticleDtoccK \
)cc\ ]
{dd 
ifee 

(ee 
privateArticleDtoee 
==ee  
nullee! %
)ee% &
returnee' -

BadRequestee. 8
(ee8 9
Messageee9 @
(ee@ A
$streeA ^
)ee^ _
)ee_ `
;ee` a
tryff 
{gg 	
privateArticleDtohh 
.hh 
articlehh &
!hh& '
.hh' (
	CreatedByhh( 1
=hh2 3
GetCurrentUserhh4 B
(hhB C
)hhC D
.hhD E
UserIdhhE K
;hhK L
returnii 
_articleServiceii "
.ii" #
CreateArticleii# 0
(ii0 1
privateArticleDtoii1 B
.iiB C
articleiiC J
,iiJ K
privateArticleDtoiiL ]
.ii] ^
SharedUsersIdii^ k
)iik l
?iim n
awaitiio t
Taskiiu y
.iiy z

FromResult	iiz „
(
ii„ …
Ok
ii… ‡
(
ii‡ ˆ
Message
iiˆ 
(
ii 
$str
ii ¦
)
ii¦ §
)
ii§ ¨
)
ii¨ ©
:
iiª «

BadRequest
ii¬ ¶
(
ii¶ ·
Message
ii· ¾
(
ii¾ ¿
$"
ii¿ Á
$str
iiÁ ì
"
iiì í
,
iií î
privateArticleDto
iiï €
)
ii€ 
)
ii ‚
;
ii‚ ƒ
}jj 	
catchkk 
(kk 
ValidationExceptionkk "
	exceptionkk# ,
)kk, -
{ll 	
_loggernn 
.nn 
LogErrornn 
(nn 
HelperServicenn *
.nn* +
LoggerMessagenn+ 8
(nn8 9
$strnn9 L
,nnL M
$strnnN 
,	nn €
	exception
nn Š
,
nnŠ ‹
privateArticleDto
nnŒ 
)
nn 
)
nn Ÿ
;
nnŸ  
returnoo 

BadRequestoo 
(oo 
Messageoo %
(oo% &
	exceptionoo& /
.oo/ 0
Messageoo0 7
,oo7 8
privateArticleDtooo9 J
)ooJ K
)ooK L
;ooL M
}pp 	
catchqq 
(qq 
	Exceptionqq 
	exceptionqq "
)qq" #
{rr 	
_loggerss 
.ss 
LogErrorss 
(ss 
HelperServicess *
.ss* +
LoggerMessagess+ 8
(ss8 9
$strss9 L
,ssL M
$strssN 
,	ss €
	exception
ss Š
,
ssŠ ‹
privateArticleDto
ssŒ 
)
ss 
)
ss Ÿ
;
ssŸ  
returntt 
Problemtt 
(tt 
$"tt 
$strtt G
"ttG H
)ttH I
;ttI J
}uu 	
}vv 
[
‘‘ 
HttpPost
‘‘ 
]
‘‘ 
public
’’ 

async
’’ 
Task
’’ 
<
’’ 
ActionResult
’’ "
>
’’" #
CreateComment
’’$ 1
(
’’1 2
ArticleComment
’’2 @
comment
’’A H
)
’’H I
{
““ 
if
•• 

(
•• 
comment
•• 
==
•• 
null
•• 
)
•• 
return
•• #

BadRequest
••$ .
(
••. /
Message
••/ 6
(
••6 7
$str
••7 T
)
••T U
)
••U V
;
••V W
try
–– 
{
—— 	
comment
˜˜ 
.
˜˜ 
UserId
˜˜ 
=
˜˜ 
GetCurrentUser
˜˜ +
(
˜˜+ ,
)
˜˜, -
.
˜˜- .
UserId
˜˜. 4
;
˜˜4 5
return
™™ 
_articleService
™™ "
.
™™" #
CreateComment
™™# 0
(
™™0 1
comment
™™1 8
)
™™8 9
?
™™: ;
await
™™< A
Task
™™B F
.
™™F G

FromResult
™™G Q
(
™™Q R
Ok
™™R T
(
™™T U
$str™™U €
)™™€ 
)™™ ‚
:™™ƒ „

BadRequest™™… 
(™™ 
Message™™ —
(™™— ˜
$"™™˜ š
$str™™š ¾
{™™¾ ¿
HelperService™™¿ Ì
.™™Ì Í
PropertyList™™Í Ù
(™™Ù Ú
comment™™Ú á
)™™á â
}™™â ã
"™™ã ä
)™™ä å
)™™å æ
;™™æ ç
}
šš 	
catch
›› 
(
›› !
ValidationException
›› "
	exception
››# ,
)
››, -
{
œœ 	
_logger
 
.
 
LogError
 
(
 
HelperService
 *
.
* +
LoggerMessage
+ 8
(
8 9
$str
9 L
,
L M
$str
N u
,
u v
	exceptionw €
,€ 
comment‚ ‰
)‰ Š
)Š ‹
;‹ Œ
return
 

BadRequest
 
(
 
Message
 %
(
% &
	exception
& /
.
/ 0
Message
0 7
,
7 8
comment
9 @
)
@ A
)
A B
;
B C
}
ŸŸ 	
catch
   
(
   
	Exception
   
	exception
   "
)
  " #
{
¡¡ 	
_logger
¢¢ 
.
¢¢ 
LogError
¢¢ 
(
¢¢ 
HelperService
¢¢ *
.
¢¢* +
LoggerMessage
¢¢+ 8
(
¢¢8 9
$str
¢¢9 L
,
¢¢L M
$str
¢¢N u
,
¢¢u v
	exception¢¢w €
,¢¢€ 
comment¢¢‚ ‰
)¢¢‰ Š
)¢¢Š ‹
;¢¢‹ Œ
return
££ 
Problem
££ 
(
££ 
$"
££ 
$str
££ A
{
££A B
HelperService
££B O
.
££O P
PropertyList
££P \
(
££\ ]
comment
££] d
)
££d e
}
££e f
"
££f g
)
££g h
;
££h i
}
¤¤ 	
}
¦¦ 
[
½½ 
HttpPost
½½ 
]
½½ 
public
¾¾ 

async
¾¾ 
Task
¾¾ 
<
¾¾ 
ActionResult
¾¾ "
>
¾¾" #
AddLikeToArticle
¾¾$ 4
(
¾¾4 5
ArticleLike
¾¾5 @
Like
¾¾A E
)
¾¾E F
{
¿¿ 
if
ÀÀ 

(
ÀÀ 
Like
ÀÀ 
==
ÀÀ 
null
ÀÀ 
)
ÀÀ 
return
ÀÀ  

BadRequest
ÀÀ! +
(
ÀÀ+ ,
$str
ÀÀ, C
)
ÀÀC D
;
ÀÀD E
if
ÁÁ 

(
ÁÁ 
Like
ÁÁ 
.
ÁÁ 
	ArticleId
ÁÁ 
<=
ÁÁ 
$num
ÁÁ 
)
ÁÁ  
return
ÁÁ! '

BadRequest
ÁÁ( 2
(
ÁÁ2 3
Message
ÁÁ3 :
(
ÁÁ: ;
$str
ÁÁ; ^
)
ÁÁ^ _
)
ÁÁ_ `
;
ÁÁ` a
Like
ÂÂ 
.
ÂÂ 
UserId
ÂÂ 
=
ÂÂ 
GetCurrentUser
ÂÂ $
(
ÂÂ$ %
)
ÂÂ% &
.
ÂÂ& '
UserId
ÂÂ' -
;
ÂÂ- .
try
ÃÃ 
{
ÄÄ 	
if
ÅÅ 
(
ÅÅ 
!
ÅÅ 
_articleService
ÅÅ  
.
ÅÅ  !
AddLikeToArticle
ÅÅ! 1
(
ÅÅ1 2
Like
ÅÅ2 6
)
ÅÅ6 7
)
ÅÅ7 8

BadRequest
ÅÅ9 C
(
ÅÅC D
Message
ÅÅD K
(
ÅÅK L
$str
ÅÅL y
)
ÅÅy z
)
ÅÅz {
;
ÅÅ{ |
var
ÆÆ 
Result
ÆÆ 
=
ÆÆ 
new
ÆÆ 
{
ÆÆ 
message
ÆÆ &
=
ÆÆ' (
$str
ÆÆ) M
,
ÆÆM N

LikesCount
ÆÆO Y
=
ÆÆZ [
_articleService
ÆÆ\ k
.
ÆÆk l
GetLikesCount
ÆÆl y
(
ÆÆy z
Like
ÆÆz ~
.
ÆÆ~ 
	ArticleIdÆÆ ˆ
)ÆÆˆ ‰
}ÆÆŠ ‹
;ÆÆ‹ Œ
return
ÇÇ 
await
ÇÇ 
Task
ÇÇ 
.
ÇÇ 

FromResult
ÇÇ (
(
ÇÇ( )
Ok
ÇÇ) +
(
ÇÇ+ ,
Result
ÇÇ, 2
)
ÇÇ2 3
)
ÇÇ3 4
;
ÇÇ4 5
}
ÈÈ 	
catch
ÉÉ 
(
ÉÉ 
ArgumentException
ÉÉ  
	exception
ÉÉ! *
)
ÉÉ* +
{
ÊÊ 	
_logger
ËË 
.
ËË 
LogError
ËË 
(
ËË 
HelperService
ËË *
.
ËË* +
LoggerMessage
ËË+ 8
(
ËË8 9
$str
ËË9 L
,
ËËL M
$str
ËËN o
,
ËËo p
	exception
ËËq z
,
ËËz {
LikeËË| €
)ËË€ 
)ËË ‚
;ËË‚ ƒ
return
ÌÌ 
Problem
ÌÌ 
(
ÌÌ 
$"
ÌÌ 
{
ÌÌ 
	exception
ÌÌ '
.
ÌÌ' (
Message
ÌÌ( /
}
ÌÌ/ 0
"
ÌÌ0 1
)
ÌÌ1 2
;
ÌÌ2 3
}
ÍÍ 	
catch
ÎÎ 
(
ÎÎ 
	Exception
ÎÎ 
	exception
ÎÎ "
)
ÎÎ" #
{
ÏÏ 	
_logger
ĞĞ 
.
ĞĞ 
LogError
ĞĞ 
(
ĞĞ 
HelperService
ĞĞ *
.
ĞĞ* +
LoggerMessage
ĞĞ+ 8
(
ĞĞ8 9
$str
ĞĞ9 L
,
ĞĞL M
$str
ĞĞN o
,
ĞĞo p
	exception
ĞĞq z
,
ĞĞz {
LikeĞĞ| €
)ĞĞ€ 
)ĞĞ ‚
;ĞĞ‚ ƒ
return
ÑÑ 
Problem
ÑÑ 
(
ÑÑ 
$"
ÑÑ 
$str
ÑÑ @
{
ÑÑ@ A
Like
ÑÑA E
}
ÑÑE F
"
ÑÑF G
)
ÑÑG H
;
ÑÑH I
}
ÒÒ 	
}
ÓÓ 
[
ïï 
HttpPut
ïï 
]
ïï 
public
ññ 

async
ññ 
Task
ññ 
<
ññ 
ActionResult
ññ "
>
ññ" #
UpdateArticle
ññ$ 1
(
ññ1 2
Article
ññ2 9
article
ññ: A
)
ññA B
{
òò 
if
óó 

(
óó 
article
óó 
==
óó 
null
óó 
)
óó 
return
óó #

BadRequest
óó$ .
(
óó. /
Message
óó/ 6
(
óó6 7
$str
óó7 N
)
óóN O
)
óóO P
;
óóP Q
try
ôô 
{
õõ 	
return
öö 
_articleService
öö "
.
öö" #
UpdateArticle
öö# 0
(
öö0 1
article
öö1 8
,
öö8 9
GetCurrentUser
öö: H
(
ööH I
)
ööI J
.
ööJ K
UserId
ööK Q
)
ööQ R
?
ööS T
await
ööU Z
Task
öö[ _
.
öö_ `

FromResult
öö` j
(
ööj k
Ok
öök m
(
ööm n
Message
öön u
(
ööu v
$strööv ˜
)öö˜ ™
)öö™ š
)ööš ›
:ööœ 

BadRequestöö ¨
(öö¨ ©
Messageöö© °
(öö° ±
$ströö± Û
)ööÛ Ü
)ööÜ İ
;ööİ Ş
}
÷÷ 	
catch
øø 
(
øø !
ValidationException
øø "
	exception
øø# ,
)
øø, -
{
ùù 	
_logger
úú 
.
úú 
LogError
úú 
(
úú 
HelperService
úú *
.
úú* +
LoggerMessage
úú+ 8
(
úú8 9
$str
úú9 L
,
úúL M
$str
úúN n
,
úún o
	exception
úúp y
,
úúy z
articleúú{ ‚
)úú‚ ƒ
)úúƒ „
;úú„ …
return
ûû 

BadRequest
ûû 
(
ûû 
Message
ûû %
(
ûû% &
$"
ûû& (
{
ûû( )
	exception
ûû) 2
.
ûû2 3
Message
ûû3 :
}
ûû: ;
"
ûû; <
,
ûû< =
article
ûû> E
)
ûûE F
)
ûûF G
;
ûûG H
}
üü 	
catch
ıı 
(
ıı 
	Exception
ıı 
	exception
ıı "
)
ıı" #
{
şş 	
_logger
ÿÿ 
.
ÿÿ 
LogError
ÿÿ 
(
ÿÿ 
HelperService
ÿÿ *
.
ÿÿ* +
LoggerMessage
ÿÿ+ 8
(
ÿÿ8 9
$str
ÿÿ9 L
,
ÿÿL M
$str
ÿÿN n
,
ÿÿn o
	exception
ÿÿp y
,
ÿÿy z
articleÿÿ{ ‚
)ÿÿ‚ ƒ
)ÿÿƒ „
;ÿÿ„ …
return
€€ 
Problem
€€ 
(
€€ 
$"
€€ 
$str
€€ A
{
€€A B
HelperService
€€B O
.
€€O P
PropertyList
€€P \
(
€€\ ]
article
€€] d
)
€€d e
}
€€e f
"
€€f g
)
€€g h
;
€€h i
}
 	
}
ƒƒ 
[
 
	HttpPatch
 
]
 
public
 

async
 
Task
 
<
 
ActionResult
 "
>
" #!
ChangeArticleStatus
$ 7
(
7 8
int
8 ;
	ArticleId
< E
,
E F
int
G J
ArticleStatusID
K Z
)
Z [
{
ŸŸ 
if
   

(
   
	ArticleId
   
<=
   
$num
   
||
   
ArticleStatusID
   -
<=
  . 0
$num
  1 2
||
  3 5
ArticleStatusID
  6 E
>
  F G
$num
  H I
)
  I J
return
  K Q

BadRequest
  R \
(
  \ ]
Message
  ] d
(
  d e
$str  e Ó
)  Ó Ô
)  Ô Õ
;  Õ Ö
if
¡¡ 

(
¡¡ 
ArticleStatusID
¡¡ 
>=
¡¡ 
$num
¡¡  
&&
¡¡! #
!
¡¡$ %
GetCurrentUser
¡¡% 3
(
¡¡3 4
)
¡¡4 5
.
¡¡5 6

IsReviewer
¡¡6 @
)
¡¡@ A
return
¡¡B H

BadRequest
¡¡I S
(
¡¡S T
Message
¡¡T [
(
¡¡[ \
$str¡¡\ ‰
)¡¡‰ Š
)¡¡Š ‹
;¡¡‹ Œ
try
¢¢ 
{
££ 	
return
¥¥ 
_articleService
¥¥ "
.
¥¥" #!
ChangeArticleStatus
¥¥# 6
(
¥¥6 7
	ArticleId
¥¥7 @
,
¥¥@ A
ArticleStatusID
¥¥B Q
,
¥¥Q R
GetCurrentUser
¥¥S a
(
¥¥a b
)
¥¥b c
.
¥¥c d
UserId
¥¥d j
)
¥¥j k
?
¥¥l m
await
¥¥n s
Task
¥¥t x
.
¥¥x y

FromResult¥¥y ƒ
(¥¥ƒ „
Ok¥¥„ †
(¥¥† ‡
$"¥¥‡ ‰
$str¥¥‰ ¹
{¥¥¹ º
	ArticleId¥¥º Ã
}¥¥Ã Ä
"¥¥Ä Å
)¥¥Å Æ
)¥¥Æ Ç
:¥¥È É

BadRequest¥¥Ê Ô
(¥¥Ô Õ
Message¥¥Õ Ü
(¥¥Ü İ
$"¥¥İ ß
$str¥¥ß —
{¥¥— ˜
	ArticleId¥¥˜ ¡
}¥¥¡ ¢
"¥¥¢ £
)¥¥£ ¤
)¥¥¤ ¥
;¥¥¥ ¦
}
¦¦ 	
catch
§§ 
(
§§ #
ItemNotFoundException
§§ $
	exception
§§% .
)
§§. /
{
¨¨ 	
_logger
©© 
.
©© 
LogError
©© 
(
©© 
HelperService
©© *
.
©©* +
LoggerMessage
©©+ 8
(
©©8 9
$str
©©9 L
,
©©L M
$str©©N ‡
,©©‡ ˆ
	exception©©‰ ’
,©©’ “
	ArticleId©©” 
,©© 
ArticleStatusID©©Ÿ ®
)©©® ¯
)©©¯ °
;©©° ±
return
ªª 
NotFound
ªª 
(
ªª 
$"
ªª 
{
ªª 
	exception
ªª (
.
ªª( )
Message
ªª) 0
}
ªª0 1
"
ªª1 2
)
ªª2 3
;
ªª3 4
}
«« 	
catch
¬¬ 
(
¬¬ 
	Exception
¬¬ 
	exception
¬¬ "
)
¬¬" #
{
­­ 	
_logger
®® 
.
®® 
LogError
®® 
(
®® 
HelperService
®® *
.
®®* +
LoggerMessage
®®+ 8
(
®®8 9
$str
®®9 L
,
®®L M
$str®®N ‡
,®®‡ ˆ
	exception®®‰ ’
,®®’ “
	ArticleId®®” 
,®® 
ArticleStatusID®®Ÿ ®
)®®® ¯
)®®¯ °
;®®° ±
return
¯¯ 
Problem
¯¯ 
(
¯¯ 
$"
¯¯ 
$str
¯¯ V
{
¯¯V W
	ArticleId
¯¯W `
}
¯¯` a
"
¯¯a b
)
¯¯b c
;
¯¯c d
}
°° 	
}
±± 
[
µµ 

HttpDelete
µµ 
]
µµ 
public
¶¶ 

async
¶¶ 
Task
¶¶ 
<
¶¶ 
ActionResult
¶¶ "
>
¶¶" #&
DeleteArticleByArticleId
¶¶$ <
(
¶¶< =
int
¶¶= @
	ArticleId
¶¶A J
)
¶¶J K
{
·· 
if
¸¸ 

(
¸¸ 
	ArticleId
¸¸ 
<=
¸¸ 
$num
¸¸ 
)
¸¸ 
return
¸¸ "

BadRequest
¸¸# -
(
¸¸- .
Message
¸¸. 5
(
¸¸5 6
$str
¸¸6 Y
)
¸¸Y Z
)
¸¸Z [
;
¸¸[ \
try
¹¹ 
{
ºº 	
return
»» 
_articleService
»» "
.
»»" #&
DeleteArticleByArticleId
»»# ;
(
»»; <
	ArticleId
»»< E
)
»»E F
?
»»G H
await
»»I N
Task
»»O S
.
»»S T

FromResult
»»T ^
(
»»^ _
Ok
»»_ a
(
»»a b
$str»»b Š
)»»Š ‹
)»»‹ Œ
:»» 

BadRequest»» ™
(»»™ š
Message»»š ¡
(»»¡ ¢
$"»»¢ ¤
$str»»¤ Ø
{»»Ø Ù
	ArticleId»»Ù â
}»»â ã
$str»»ã ä
"»»ä å
)»»å æ
)»»æ ç
;»»ç è
}
¼¼ 	
catch
½½ 
(
½½ 
ArgumentException
½½  
	exception
½½! *
)
½½* +
{
¾¾ 	
_logger
¿¿ 
.
¿¿ 
LogError
¿¿ 
(
¿¿ 
HelperService
¿¿ *
.
¿¿* +
LoggerMessage
¿¿+ 8
(
¿¿8 9
$str
¿¿9 L
,
¿¿L M
$str
¿¿N w
,
¿¿w x
	exception¿¿y ‚
,¿¿‚ ƒ
	ArticleId¿¿„ 
)¿¿ 
)¿¿ 
;¿¿ 
return
ÀÀ 
Problem
ÀÀ 
(
ÀÀ 
$"
ÀÀ 
{
ÀÀ 
	exception
ÀÀ '
.
ÀÀ' (
Message
ÀÀ( /
}
ÀÀ/ 0
"
ÀÀ0 1
)
ÀÀ1 2
;
ÀÀ2 3
}
ÁÁ 	
catch
ÂÂ 
(
ÂÂ 
	Exception
ÂÂ 
	exception
ÂÂ "
)
ÂÂ" #
{
ÃÃ 	
_logger
ÄÄ 
.
ÄÄ 
LogError
ÄÄ 
(
ÄÄ 
HelperService
ÄÄ *
.
ÄÄ* +
LoggerMessage
ÄÄ+ 8
(
ÄÄ8 9
$str
ÄÄ9 L
,
ÄÄL M
$str
ÄÄN w
,
ÄÄw x
	exceptionÄÄy ‚
,ÄÄ‚ ƒ
	ArticleIdÄÄ„ 
)ÄÄ 
)ÄÄ 
;ÄÄ 
return
ÅÅ 

BadRequest
ÅÅ 
(
ÅÅ 
Message
ÅÅ %
(
ÅÅ% &
$"
ÅÅ& (
$str
ÅÅ( W
{
ÅÅW X
	ArticleId
ÅÅX a
}
ÅÅa b
"
ÅÅb c
)
ÅÅc d
)
ÅÅd e
;
ÅÅe f
}
ÆÆ 	
}
ÇÇ 
[
İİ 
HttpGet
İİ 
]
İİ 
public
ŞŞ 

async
ŞŞ 
Task
ŞŞ 
<
ŞŞ 
ActionResult
ŞŞ "
>
ŞŞ" #
GetLatestArticles
ŞŞ$ 5
(
ŞŞ5 6
int
ŞŞ6 9
Range
ŞŞ: ?
=
ŞŞ@ A
$num
ŞŞB C
)
ŞŞC D
{
ßß 
try
àà 
{
áá 	
var
ââ 
Articles
ââ 
=
ââ 
_articleService
ââ *
.
ââ* +
GetLatestArticles
ââ+ <
(
ââ< =
)
ââ= >
.
ââ> ?
ToList
ââ? E
(
ââE F
)
ââF G
;
ââG H
if
ää 
(
ää 
Range
ää 
<=
ää 
Articles
ää !
.
ää! "
Count
ää" '
)
ää' (
{
åå 
Articles
ææ 
=
ææ 
Range
ææ  
>
ææ! "
$num
ææ# $
?
ææ% &
Articles
ææ' /
.
ææ/ 0
GetRange
ææ0 8
(
ææ8 9
$num
ææ9 :
,
ææ: ;
Range
ææ< A
)
ææA B
:
ææC D
Articles
ææE M
;
ææM N
return
çç 
await
çç 
Task
çç !
.
çç! "

FromResult
çç" ,
(
çç, -
Ok
çç- /
(
çç/ 0
Articles
çç0 8
)
çç8 9
)
çç9 :
;
çç: ;
}
èè 
else
éé 
return
éé 

BadRequest
éé "
(
éé" #
Message
éé# *
(
éé* +
$str
éé+ A
)
ééA B
)
ééB C
;
ééC D
}
ëë 	
catch
ìì 
(
ìì 
	Exception
ìì 
	exception
ìì "
)
ìì" #
{
íí 	
_logger
îî 
.
îî 
LogError
îî 
(
îî 
HelperService
îî *
.
îî* +
LoggerMessage
îî+ 8
(
îî8 9
$str
îî9 L
,
îîL M
$str
îîN m
,
îîm n
	exception
îîo x
)
îîx y
)
îîy z
;
îîz {
return
ïï 
Problem
ïï 
(
ïï 
$str
ïï H
)
ïïH I
;
ïïI J
}
ğğ 	
}
ññ 
[
†† 
HttpGet
†† 
]
†† 
public
‡‡ 

async
‡‡ 
Task
‡‡ 
<
‡‡ 
ActionResult
‡‡ "
>
‡‡" #!
GetTrendingArticles
‡‡$ 7
(
‡‡7 8
int
‡‡8 ;
Range
‡‡< A
=
‡‡B C
$num
‡‡D E
)
‡‡E F
{
ˆˆ 
try
‰‰ 
{
ŠŠ 	
var
‹‹ 
Articles
‹‹ 
=
‹‹ 
_articleService
‹‹ *
.
‹‹* +!
GetTrendingArticles
‹‹+ >
(
‹‹> ?
)
‹‹? @
.
‹‹@ A
ToList
‹‹A G
(
‹‹G H
)
‹‹H I
;
‹‹I J
if
 
(
 
Range
 
<=
 
Articles
 !
.
! "
Count
" '
)
' (
{
 
Articles
 
=
 
Range
  
>
! "
$num
# $
?
% &
Articles
' /
.
/ 0
GetRange
0 8
(
8 9
$num
9 :
,
: ;
Range
< A
)
A B
:
C D
Articles
E M
;
M N
return
 
await
 
Task
 !
.
! "

FromResult
" ,
(
, -
Ok
- /
(
/ 0
Articles
0 8
)
8 9
)
9 :
;
: ;
}
‘‘ 
else
’’ 
return
’’ 

BadRequest
’’ "
(
’’" #
Message
’’# *
(
’’* +
$str
’’+ A
)
’’A B
)
’’B C
;
’’C D
}
““ 	
catch
”” 
(
”” 
	Exception
”” 
	exception
”” "
)
””" #
{
•• 	
_logger
–– 
.
–– 
LogError
–– 
(
–– 
HelperService
–– *
.
––* +
LoggerMessage
––+ 8
(
––8 9
$str
––9 L
,
––L M
$str
––N n
,
––n o
	exception
––p y
)
––y z
)
––z {
;
––{ |
return
—— 
Problem
—— 
(
—— 
$str
—— H
)
——H I
;
——I J
}
˜˜ 	
}
™™ 
[
®® 
HttpGet
®® 
]
®® 
public
¯¯ 

async
¯¯ 
Task
¯¯ 
<
¯¯ 
ActionResult
¯¯ "
>
¯¯" #
GetArticleById
¯¯$ 2
(
¯¯2 3
int
¯¯3 6
	ArticleId
¯¯7 @
)
¯¯@ A
{
°° 
if
±± 

(
±± 
	ArticleId
±± 
<=
±± 
$num
±± 
)
±± 
return
±± "

BadRequest
±±# -
(
±±- .
Message
±±. 5
(
±±5 6
$str
±±6 Y
)
±±Y Z
)
±±Z [
;
±±[ \
try
²² 
{
³³ 	
return
´´ 
await
´´ 
Task
´´ 
.
´´ 

FromResult
´´ (
(
´´( )
Ok
´´) +
(
´´+ ,
_articleService
´´, ;
.
´´; <
GetArticleById
´´< J
(
´´J K
	ArticleId
´´K T
)
´´T U
)
´´U V
)
´´V W
;
´´W X
}
µµ 	
catch
¶¶ 
(
¶¶ #
ItemNotFoundException
¶¶ $
	exception
¶¶% .
)
¶¶. /
{
·· 	
_logger
¸¸ 
.
¸¸ 
LogError
¸¸ 
(
¸¸ 
HelperService
¸¸ *
.
¸¸* +
LoggerMessage
¸¸+ 8
(
¸¸8 9
$str
¸¸9 L
,
¸¸L M
$str
¸¸N m
,
¸¸m n
	exception
¸¸o x
,
¸¸x y
	ArticleId¸¸z ƒ
)¸¸ƒ „
)¸¸„ …
;¸¸… †
return
¹¹ 

BadRequest
¹¹ 
(
¹¹ 
Message
¹¹ %
(
¹¹% &
$"
¹¹& (
{
¹¹( )
	exception
¹¹) 2
.
¹¹2 3
Message
¹¹3 :
}
¹¹: ;
"
¹¹; <
)
¹¹< =
)
¹¹= >
;
¹¹> ?
}
ºº 	
catch
»» 
(
»» 
	Exception
»» 
	exception
»» "
)
»»" #
{
¼¼ 	
_logger
½½ 
.
½½ 
LogError
½½ 
(
½½ 
HelperService
½½ *
.
½½* +
LoggerMessage
½½+ 8
(
½½8 9
$str
½½9 L
,
½½L M
$str
½½N m
,
½½m n
	exception
½½o x
,
½½x y
	ArticleId½½z ƒ
)½½ƒ „
)½½„ …
;½½… †
return
¾¾ 
Problem
¾¾ 
(
¾¾ 
$"
¾¾ 
$str
¾¾ R
{
¾¾R S
	ArticleId
¾¾S \
}
¾¾\ ]
"
¾¾] ^
)
¾¾^ _
;
¾¾_ `
}
¿¿ 	
}
ÀÀ 
[
ÎÎ 
HttpGet
ÎÎ 
]
ÎÎ 
public
ÏÏ 

async
ÏÏ 
Task
ÏÏ 
<
ÏÏ 
ActionResult
ÏÏ "
>
ÏÏ" #
GetAll
ÏÏ$ *
(
ÏÏ* +
)
ÏÏ+ ,
{
ĞĞ 
try
ÒÒ 
{
ÓÓ 	
var
ÕÕ 
Articles
ÕÕ 
=
ÕÕ 
_articleService
ÕÕ *
.
ÕÕ* +
GetListOfArticles
ÕÕ+ <
(
ÕÕ< =
)
ÕÕ= >
;
ÕÕ> ?
return
×× 
await
×× 
Task
×× 
.
×× 

FromResult
×× (
(
××( )
Ok
××) +
(
××+ ,
Articles
××, 4
)
××4 5
)
××5 6
;
××6 7
}
ØØ 	
catch
ÙÙ 
(
ÙÙ 
	Exception
ÙÙ 
	exception
ÙÙ "
)
ÙÙ" #
{
ÚÚ 	
_logger
ÛÛ 
.
ÛÛ 
LogError
ÛÛ 
(
ÛÛ 
HelperService
ÛÛ *
.
ÛÛ* +
LoggerMessage
ÛÛ+ 8
(
ÛÛ8 9
$str
ÛÛ9 L
,
ÛÛL M
$str
ÛÛN Y
,
ÛÛY Z
	exception
ÛÛ[ d
)
ÛÛd e
)
ÛÛe f
;
ÛÛf g
return
ÜÜ 
Problem
ÜÜ 
(
ÜÜ 
$str
ÜÜ H
)
ÜÜH I
;
ÜÜI J
}
İİ 	
}
ŞŞ 
[
ëë 
HttpGet
ëë 
]
ëë 
public
ìì 

async
ìì 
Task
ìì 
<
ìì 
ActionResult
ìì "
>
ìì" #!
GetArticlesByUserId
ìì$ 7
(
ìì7 8
)
ìì8 9
{
íí 
try
ïï 
{
ğğ 	
var
ññ #
ListOfArticleByUserId
ññ %
=
ññ& '
_articleService
ññ( 7
.
ññ7 8!
GetArticlesByUserId
ññ8 K
(
ññK L
GetCurrentUser
ññL Z
(
ññZ [
)
ññ[ \
.
ññ\ ]
UserId
ññ] c
)
ññc d
;
ññd e
return
óó 
await
óó 
Task
óó 
.
óó 

FromResult
óó (
(
óó( )
Ok
óó) +
(
óó+ ,#
ListOfArticleByUserId
óó, A
)
óóA B
)
óóB C
;
óóC D
}
ôô 	
catch
öö 
(
öö 
	Exception
öö 
	exception
öö "
)
öö" #
{
÷÷ 	
_logger
øø 
.
øø 
LogError
øø 
(
øø 
HelperService
øø *
.
øø* +
LoggerMessage
øø+ 8
(
øø8 9
$str
øø9 L
,
øøL M
$str
øøN o
,
øøo p
	exception
øøq z
)
øøz {
)
øø{ |
;
øø| }
return
ùù 
Problem
ùù 
(
ùù 
$"
ùù 
$str
ùù b
"
ùùb c
)
ùùc d
;
ùùd e
}
úú 	
}
üü 
[
““ 
HttpGet
““ 
]
““ 
public
”” 

async
”” 
Task
”” 
<
”” 
ActionResult
”” "
>
””" # 
GetPrivateArticles
””$ 6
(
””6 7
int
””7 :
UserId
””; A
)
””A B
{
•• 
if
–– 

(
–– 
UserId
–– 
<=
–– 
$num
–– 
)
–– 
return
–– 

BadRequest
––  *
(
––* +
Message
––+ 2
(
––2 3
$str
––3 R
)
––R S
)
––S T
;
––T U
try
—— 
{
˜˜ 	
var
™™ #
ListOfPrivateArticles
™™ %
=
™™& '
_articleService
™™( 7
.
™™7 8 
GetPrivateArticles
™™8 J
(
™™J K
UserId
™™K Q
)
™™Q R
;
™™R S
return
›› 
await
›› 
Task
›› 
.
›› 

FromResult
›› (
(
››( )
Ok
››) +
(
››+ ,#
ListOfPrivateArticles
››, A
)
››A B
)
››B C
;
››C D
}
œœ 	
catch
 
(
 
	Exception
 
	exception
 "
)
" #
{
ŸŸ 	
_logger
   
.
   
LogError
   
(
   
HelperService
   *
.
  * +
LoggerMessage
  + 8
(
  8 9
$str
  9 L
,
  L M
$str
  N o
,
  o p
	exception
  q z
,
  z {
UserId  | ‚
)  ‚ ƒ
)  ƒ „
;  „ …
return
¡¡ 
Problem
¡¡ 
(
¡¡ 
$"
¡¡ 
$str
¡¡ H
"
¡¡H I
)
¡¡I J
;
¡¡J K
}
¢¢ 	
}
¤¤ 
[
¼¼ 
HttpGet
¼¼ 
]
¼¼ 
public
½½ 

async
½½ 
Task
½½ 
<
½½ 
ActionResult
½½ "
>
½½" # 
GetArticlesByTitle
½½$ 6
(
½½6 7
string
½½7 =
Title
½½> C
)
½½C D
{
¾¾ 
if
¿¿ 

(
¿¿ 
String
¿¿ 
.
¿¿ 
IsNullOrEmpty
¿¿  
(
¿¿  !
Title
¿¿! &
)
¿¿& '
)
¿¿' (
return
¿¿) /

BadRequest
¿¿0 :
(
¿¿: ;
Message
¿¿; B
(
¿¿B C
$str
¿¿C X
)
¿¿X Y
)
¿¿Y Z
;
¿¿Z [
try
ÀÀ 
{
ÁÁ 	
var
ÂÂ #
ListOfArticlesByTitle
ÂÂ %
=
ÂÂ& '
_articleService
ÂÂ( 7
.
ÂÂ7 8 
GetArticlesByTitle
ÂÂ8 J
(
ÂÂJ K
Title
ÂÂK P
)
ÂÂP Q
;
ÂÂQ R
return
ÄÄ 
await
ÄÄ 
Task
ÄÄ 
.
ÄÄ 

FromResult
ÄÄ (
(
ÄÄ( )
Ok
ÄÄ) +
(
ÄÄ+ ,#
ListOfArticlesByTitle
ÄÄ, A
)
ÄÄA B
)
ÄÄB C
;
ÄÄC D
}
ÅÅ 	
catch
ÇÇ 
(
ÇÇ 
	Exception
ÇÇ 
	exception
ÇÇ "
)
ÇÇ" #
{
ÈÈ 	
_logger
ÉÉ 
.
ÉÉ 
LogError
ÉÉ 
(
ÉÉ 
HelperService
ÉÉ *
.
ÉÉ* +
LoggerMessage
ÉÉ+ 8
(
ÉÉ8 9
$str
ÉÉ9 L
,
ÉÉL M
$str
ÉÉN p
,
ÉÉp q
	exception
ÉÉr {
,
ÉÉ{ |
TitleÉÉ} ‚
)ÉÉ‚ ƒ
)ÉÉƒ „
;ÉÉ„ …
return
ÊÊ 
Problem
ÊÊ 
(
ÊÊ 
$"
ÊÊ 
$str
ÊÊ U
{
ÊÊU V
Title
ÊÊV [
}
ÊÊ[ \
"
ÊÊ\ ]
)
ÊÊ] ^
;
ÊÊ^ _
}
ÌÌ 	
}
ÏÏ 
[
çç 
HttpGet
çç 
]
çç 
public
èè 

async
èè 
Task
èè 
<
èè 
ActionResult
èè "
>
èè" #!
GetArticlesByAuthor
èè$ 7
(
èè7 8
string
èè8 >

AuthorName
èè? I
)
èèI J
{
éé 
if
êê 

(
êê 
String
êê 
.
êê 
IsNullOrEmpty
êê  
(
êê  !

AuthorName
êê! +
)
êê+ ,
)
êê, -
return
êê. 4

BadRequest
êê5 ?
(
êê? @
Message
êê@ G
(
êêG H
$str
êêH c
)
êêc d
)
êêd e
;
êêe f
try
ëë 
{
ìì 	
var
íí $
ListOfArticlesByAuthor
íí &
=
íí' (
_articleService
íí) 8
.
íí8 9 
GetArticlesByTitle
íí9 K
(
ííK L

AuthorName
ííL V
)
ííV W
;
ííW X
return
ïï 
await
ïï 
Task
ïï 
.
ïï 

FromResult
ïï (
(
ïï( )
Ok
ïï) +
(
ïï+ ,$
ListOfArticlesByAuthor
ïï, B
)
ïïB C
)
ïïC D
;
ïïD E
}
ğğ 	
catch
òò 
(
òò 
	Exception
òò 
	exception
òò "
)
òò" #
{
óó 	
_logger
ôô 
.
ôô 
LogError
ôô 
(
ôô 
HelperService
ôô *
.
ôô* +
LoggerMessage
ôô+ 8
(
ôô8 9
$str
ôô9 L
,
ôôL M
$str
ôôN v
,
ôôv w
	exceptionôôx 
,ôô ‚

AuthorNameôôƒ 
)ôô 
)ôô 
;ôô 
return
õõ 
Problem
õõ 
(
õõ 
$"
õõ 
$str
õõ U
{
õõU V

AuthorName
õõV `
}
õõ` a
"
õõa b
)
õõb c
;
õõc d
}
÷÷ 	
}
ùù 
[
 
HttpGet
 
]
 
public
 

async
 
Task
 
<
 
IActionResult
 #
>
# $*
GetArticlesByArticleStatusId
% A
(
A B
int
B E
ArticleStatusID
F U
)
U V
{
‘‘ 
if
““ 

(
““ 
ArticleStatusID
““ 
<=
““ 
$num
““  
||
““! #
ArticleStatusID
““$ 3
>
““4 5
$num
““6 7
)
““7 8
return
““9 ?

BadRequest
““@ J
(
““J K
Message
““K R
(
““R S
$"
““S U
$str““U 
{““ 
ArticleStatusID““ Ÿ
}““Ÿ  
"““  ¡
)““¡ ¢
)““¢ £
;““£ ¤
try
”” 
{
•• 	
var
—— 
ListOfArticles
—— 
=
——  
_articleService
——! 0
.
——0 1*
GetArticlesByArticleStatusId
——1 M
(
——M N
ArticleStatusID
——N ]
)
——] ^
;
——^ _
return
˜˜ 
await
˜˜ 
Task
˜˜ 
.
˜˜ 

FromResult
˜˜ (
(
˜˜( )
Ok
˜˜) +
(
˜˜+ ,
ListOfArticles
˜˜, :
)
˜˜: ;
)
˜˜; <
;
˜˜< =
}
›› 	
catch
œœ 
(
œœ 
	Exception
œœ 
	exception
œœ "
)
œœ" #
{
 	
_logger
 
.
 
LogError
 
(
 
HelperService
 *
.
* +
LoggerMessage
+ 8
(
8 9
$str
9 L
,
L M
$strN 
, ‚
	exceptionƒ Œ
)Œ 
, 
ArticleStatusID 
) Ÿ
;Ÿ  
return
ŸŸ 
Problem
ŸŸ 
(
ŸŸ 
$str
ŸŸ 9
)
ŸŸ9 :
;
ŸŸ: ;
}
   	
}
¢¢ 
[
ºº 
HttpGet
ºº 
]
ºº 
public
»» 

async
»» 
Task
»» 
<
»» 
ActionResult
»» "
>
»»" #
GetComments
»»$ /
(
»»/ 0
int
»»0 3
	ArticleId
»»4 =
)
»»= >
{
¼¼ 
if
½½ 

(
½½ 
	ArticleId
½½ 
<=
½½ 
$num
½½ 
)
½½ 
return
½½ "

BadRequest
½½# -
(
½½- .
Message
½½. 5
(
½½5 6
$str
½½6 X
)
½½X Y
)
½½Y Z
;
½½Z [
try
¾¾ 
{
¿¿ 	
var
ÀÀ 
ListOfComments
ÀÀ 
=
ÀÀ  
_articleService
ÀÀ! 0
.
ÀÀ0 1
GetComments
ÀÀ1 <
(
ÀÀ< =
	ArticleId
ÀÀ= F
)
ÀÀF G
;
ÀÀG H
return
ÂÂ 
await
ÂÂ 
Task
ÂÂ 
.
ÂÂ 

FromResult
ÂÂ (
(
ÂÂ( )
Ok
ÂÂ) +
(
ÂÂ+ ,
ListOfComments
ÂÂ, :
)
ÂÂ: ;
)
ÂÂ; <
;
ÂÂ< =
}
ÃÃ 	
catch
ÅÅ 
(
ÅÅ 
	Exception
ÅÅ 
	exception
ÅÅ "
)
ÅÅ" #
{
ÆÆ 	
_logger
ÇÇ 
.
ÇÇ 
LogError
ÇÇ 
(
ÇÇ 
HelperService
ÇÇ *
.
ÇÇ* +
LoggerMessage
ÇÇ+ 8
(
ÇÇ8 9
$str
ÇÇ9 L
,
ÇÇL M
nameof
ÇÇN T
(
ÇÇT U
GetComments
ÇÇU `
)
ÇÇ` a
,
ÇÇa b
	exception
ÇÇc l
,
ÇÇl m
	ArticleId
ÇÇn w
)
ÇÇw x
)
ÇÇx y
;
ÇÇy z
return
ÈÈ 
Problem
ÈÈ 
(
ÈÈ 
$"
ÈÈ 
$str
ÈÈ Y
{
ÈÈY Z
	ArticleId
ÈÈZ c
}
ÈÈc d
"
ÈÈd e
)
ÈÈe f
;
ÈÈf g
}
ËË 	
}
ÏÏ 
}ÔÔ 
}ÕÕ ¹
WC:\Users\manimaran.venkat\Documents\Backup\AspireOverflow\Controllers\BaseController.cs
	namespace 	
AspireOverflow
 
. 
Controllers $
{ 
public

 

class

 
BaseController

 
:

  !
ControllerBase

" 0
{ 
	protected 
object 
Message  
(  !
string! '
message( /
,/ 0
object1 7
?7 8
obj9 <
== >
null? C
)C D
{ 	
if 
( 
Message 
!= 
null 
&&  "
obj# &
==' )
null* .
). /
return0 6
new7 :
{; <
Message= D
=E F
messageG N
}O P
;P Q
else 
if 
( 
Message 
!= 
null  $
&&% '
obj( +
!=, .
null/ 3
)3 4
return5 ;
new< ?
{@ A
MessageB I
=J K
messageL S
,S T

DataPassedU _
=` a
objb e
}f g
;g h
else 
return 
new 
{ 
} 
;  
} 	
	protected 
CurrentUser 
GetCurrentUser ,
(, -
)- .
{ 	
var 
CurrentUser 
= 
new !
CurrentUser" -
(- .
). /
;/ 0
if 
( 
User 
!= 
null 
) 
{ 
CurrentUser 
. 
UserId "
=# $
Convert% ,
., -
ToInt32- 4
(4 5
User5 9
.9 :
	FindFirst: C
(C D
$strD L
)L M
?M N
.N O
ValueO T
)T U
;U V
CurrentUser 
. 
Email !
=" #
User$ (
.( )
	FindFirst) 2
(2 3

ClaimTypes3 =
.= >
Email> C
)C D
?D E
.E F
ValueF K
;K L
CurrentUser 
. 
RoleId "
=# $
Convert% ,
., -
ToInt32- 4
(4 5
User5 9
.9 :
	FindFirst: C
(C D

ClaimTypesD N
.N O
RoleO S
)S T
?T U
.U V
ValueV [
)[ \
;\ ]
CurrentUser 
. 

IsReviewer &
=' (
Convert) 0
.0 1
	ToBoolean1 :
(: ;
User; ?
.? @
	FindFirst@ I
(I J
$strJ V
)V W
?W X
.X Y
ValueY ^
)^ _
;_ `
return 
CurrentUser "
;" #
}   
return!! 
CurrentUser!! 
;!! 
}%% 	
}&& 
}'' ‡D
\C:\Users\manimaran.venkat\Documents\Backup\AspireOverflow\Controllers\DashboardController.cs
	namespace		 	
AspireOverflow		
 
.		 
Controllers		 $
{

 
[ 
ApiController 
] 
[ 
	Authorize 
] 
[ 
Route 

(
 
$str "
)" #
]# $
public 

class 
DashboardController $
:% &
BaseController' 5
{ 
private 
readonly 
ILogger  
<  !
DashboardController! 4
>4 5
_logger6 =
;= >
private 
readonly 
IArticleService (
_articleService) 8
;8 9
private 
readonly 
IQueryService &
_queryService' 4
;4 5
private 
readonly 
IUserService %
_userService& 2
;2 3
public 
DashboardController "
(" #
ILogger# *
<* +
DashboardController+ >
>> ?
logger@ F
,F G
IArticleServiceH W
articleServiceX f
,f g
IQueryServiceh u
queryService	v ‚
,
‚ ƒ
IUserService
„ 
userService
‘ œ
)
œ 
{ 	
_logger 
= 
logger 
; 
_articleService 
= 
articleService ,
;, -
_userService 
= 
userService &
;& '
_queryService 
= 
queryService (
;( )
} 	
[11 	
HttpGet11	 
]11 
public33 
async33 
Task33 
<33 
ActionResult33 &
>33& ' 
GetReviewerDashboard33( <
(33< =
)33= >
{44 	
try55 
{66 
int66 

ReviewerId66 
=66 
GetCurrentUser66 *
(66* +
)66+ ,
.66, -
UserId66- 3
;663 4
var77  
DashboardInformation77 (
=77) *
new77+ .
{88 !
TotalNumberOfArticles99 )
=99* +
_articleService99, ;
.99; <
GetAll99< B
(99B C
)99C D
.99D E
Count99E J
(99J K
)99K L
,99L M 
ArticlesTobeReviewed:: (
=::) *
_articleService::+ :
.::: ;(
GetArticlesByArticleStatusId::; W
(::W X
$num::X Y
)::Y Z
.::Z [
Count::[ `
(::` a
)::a b
,::b c
ArticlesReviewed;; $
=;;% &
_articleService;;& 5
.;;5 6(
GetArticlesByArticleStatusId;;6 R
(;;R S
$num;;S T
);;T U
.;;U V
Count;;V [
(;;[ \
);;\ ]
,;;] ^
ArticlesPublished<< %
=<<& '
_articleService<<( 7
.<<7 8#
GetArticlesByReviewerId<<8 O
(<<O P

ReviewerId<<P Z
)<<Z [
.<<[ \
Count<<\ a
(<<a b
)<<b c
,<<c d
}?? 
;?? 
return?? 
await?? 
Task??  $
.??$ %

FromResult??% /
(??/ 0
Ok??0 2
(??2 3 
DashboardInformation??3 G
)??G H
)??H I
;??I J
}@@ 
catchAA 
(AA 
	ExceptionAA 
	exceptionAA &
)AA& '
{BB 
_loggerCC 
.CC 
LogErrorCC  
(CC  !
HelperServiceCC! .
.CC. /
LoggerMessageCC/ <
(CC< =
$strCC= R
,CCR S
$strCCT z
,CCz {
	exception	CC| …
)
CC… †
)
CC† ‡
;
CC‡ ˆ
returnDD 

BadRequestDD !
(DD! "
$strDD" O
)DDO P
;DDP Q
}EE 
}FF 	
[UU 	
HttpGetUU	 
]UU 
publicWW 
asyncWW 
TaskWW 
<WW 
ActionResultWW &
>WW& '
GetAdminDashboardWW( 9
(WW9 :
)WW: ;
{XX 	
tryYY 
{ZZ 
var[[  
DashboardInformation[[ (
=[[) *
new[[+ .
{\\ !
TotalNumberOfArticles]] )
=]]* +
_articleService]], ;
.]]; <
GetAll]]< B
(]]B C
)]]C D
.]]D E
Count]]E J
(]]J K
)]]K L
,]]L M
TotalNumberOfUsers^^ &
=^^' (
_userService^^) 5
.^^5 6
GetUsers^^6 >
(^^> ?
)^^? @
.^^@ A
Count^^A F
(^^F G
)^^G H
,^^H I!
TotalNumberOfReviwers__ )
=__* +
_userService__, 8
.__8 9 
GetUsersByIsReviewer__9 M
(__M N
true__N R
)__R S
.__S T
Count__T Y
(__Y Z
)__Z [
,__[ \ 
TotalNumberofQueries`` (
=``) *
_queryService``+ 8
.``8 9
GetListOfQueries``9 I
(``I J
)``J K
.``K L
Count``L Q
(``Q R
)``R S
,``S T%
TotaNumberofSolvedQueriesaa -
=aa. /
_queryServiceaa0 =
.aa= >

GetQueriesaa> H
(aaH I
trueaaI M
)aaM N
.aaN O
CountaaO T
(aaT U
)aaU V
,aaV W(
TotalNumberOfUnSolvedQueriesbb 0
=bb1 2
_queryServicebb3 @
.bb@ A

GetQueriesbbA K
(bbK L
falsebbL Q
)bbQ R
.bbR S
CountbbS X
(bbX Y
)bbY Z
,bbZ [
}dd 
;dd 
returndd 
awaitdd 
Taskdd  $
.dd$ %

FromResultdd% /
(dd/ 0
Okdd0 2
(dd2 3 
DashboardInformationdd3 G
)ddG H
)ddH I
;ddI J
}ee 
catchff 
(ff 
	Exceptionff 
	exceptionff &
)ff& '
{gg 
_loggerhh 
.hh 
LogErrorhh  
(hh  !
HelperServicehh! .
.hh. /
LoggerMessagehh/ <
(hh< =
$strhh= R
,hhR S
$strhhT i
,hhi j
	exceptionhhk t
)hht u
)hhu v
;hhv w
returnii 

BadRequestii !
(ii! "
$strii" O
)iiO P
;iiP Q
}jj 
}kk 	
[yy 	
HttpGetyy	 
]yy 
public{{ 
async{{ 
Task{{ 
<{{ 
ActionResult{{ &
>{{& '
GetHomePage{{( 3
({{3 4
){{4 5
{|| 	
try}} 
{~~ 
var 
Data 
= 
new 
{
€€ 
TrendingArticles
 $
=
% &
_articleService
' 6
.
6 7!
GetTrendingArticles
7 J
(
J K
)
K L
,
L M
LatestArticles
‚‚ "
=
‚‚# $
_articleService
‚‚% 4
.
‚‚4 5
GetLatestArticles
‚‚5 F
(
‚‚F G
)
‚‚G H
,
‚‚H I
TrendingQueries
ƒƒ #
=
ƒƒ$ %
_queryService
ƒƒ& 3
.
ƒƒ3 4 
GetTrendingQueries
ƒƒ4 F
(
ƒƒF G
)
ƒƒG H
,
ƒƒH I
LatestQueries
„„ !
=
„„" #
_queryService
„„$ 1
.
„„1 2
GetLatestQueries
„„2 B
(
„„B C
)
„„C D
,
„„D E
}
‡‡ 
;
‡‡ 
return
‡‡ 
await
‡‡ 
Task
‡‡  $
.
‡‡$ %

FromResult
‡‡% /
(
‡‡/ 0
Ok
‡‡0 2
(
‡‡2 3
Data
‡‡3 7
)
‡‡7 8
)
‡‡8 9
;
‡‡9 :
}
ˆˆ 
catch
‰‰ 
(
‰‰ 
	Exception
‰‰ 
	exception
‰‰ &
)
‰‰& '
{
ŠŠ 
_logger
‹‹ 
.
‹‹ 
LogError
‹‹  
(
‹‹  !
HelperService
‹‹! .
.
‹‹. /
LoggerMessage
‹‹/ <
(
‹‹< =
$str
‹‹= R
,
‹‹R S
$str
‹‹T c
,
‹‹c d
	exception
‹‹e n
)
‹‹n o
)
‹‹o p
;
‹‹p q
return
ŒŒ 

BadRequest
ŒŒ !
(
ŒŒ! "
$str
ŒŒ" O
)
ŒŒO P
;
ŒŒP Q
}
 
}
 	
}
’’ 
}““ Ç•
XC:\Users\manimaran.venkat\Documents\Backup\AspireOverflow\Controllers\QueryController.cs
	namespace 	
AspireOverflow
 
. 
Controllers $
{ 
[ 
ApiController 
] 
[ 
Route 

(
 
$str "
)" #
]# $
public 

class 
QueryController  
:! "
BaseController# 1
{ 
private 
readonly 
ILogger  
<  !
QueryController! 0
>0 1
_logger2 9
;9 :
private 
readonly 
IQueryService &
_queryService' 4
;4 5
public 
QueryController 
( 
ILogger &
<& '
QueryController' 6
>6 7
logger8 >
,> ?
IQueryService@ M
queryServiceN Z
)Z [
{ 	
_logger 
= 
logger 
; 
_queryService 
= 
queryService (
;( )
} 	
[88 	
HttpPost88	 
]88 
public:: 
async:: 
Task:: 
<:: 
ActionResult:: &
>::& '
CreateQuery::( 3
(::3 4
Query::4 9
query::: ?
)::? @
{;; 	
if<< 
(<< 
query<< 
==<< 
null<< 
)<< 
return<< %

BadRequest<<& 0
(<<0 1
Message<<1 8
(<<8 9
$str<<9 V
)<<V W
)<<W X
;<<X Y
try== 
{>> 
query?? 
.?? 
	CreatedBy?? 
=?? 
GetCurrentUser?? -
(??- .
)??. /
.??/ 0
UserId??0 6
;??6 7
return@@ 
_queryService@@ $
.@@$ %
CreateQuery@@% 0
(@@0 1
query@@1 6
)@@6 7
?@@8 9
await@@: ?
Task@@@ D
.@@D E

FromResult@@E O
(@@O P
Ok@@P R
(@@R S
Message@@S Z
(@@Z [
$str@@[ q
)@@q r
)@@r s
)@@s t
:@@u v

BadRequest	@@w 
(
@@ ‚
Message
@@‚ ‰
(
@@‰ Š
$"
@@Š Œ
$str
@@Œ ®
{
@@® ¯
HelperService
@@¯ ¼
.
@@¼ ½
PropertyList
@@½ É
(
@@É Ê
query
@@Ê Ï
)
@@Ï Ğ
}
@@Ğ Ñ
"
@@Ñ Ò
)
@@Ò Ó
)
@@Ó Ô
;
@@Ô Õ
}AA 
catchBB 
(BB 
ValidationExceptionBB &
	exceptionBB' 0
)BB0 1
{CC 
_loggerEE 
.EE 
LogErrorEE  
(EE  !
HelperServiceEE! .
.EE. /
LoggerMessageEE/ <
(EE< =
$strEE= N
,EEN O
$strEEP j
,EEj k
	exceptionEEl u
,EEu v
queryEEw |
)EE| }
)EE} ~
;EE~ 
returnFF 

BadRequestFF !
(FF! "
MessageFF" )
(FF) *
$"FF* ,
{FF, -
	exceptionFF- 6
.FF6 7
MessageFF7 >
}FF> ?
"FF? @
,FF@ A
queryFFA F
)FFF G
)FFG H
;FFH I
}GG 
catchHH 
(HH 
	ExceptionHH 
	exceptionHH &
)HH& '
{II 
_loggerJJ 
.JJ 
LogErrorJJ  
(JJ  !
HelperServiceJJ! .
.JJ. /
LoggerMessageJJ/ <
(JJ< =
$strJJ= N
,JJN O
$strJJP j
,JJj k
	exceptionJJl u
,JJu v
queryJJw |
)JJ| }
)JJ} ~
;JJ~ 
returnKK 
ProblemKK 
(KK 
$"KK !
$strKK! C
{KKC D
HelperServiceKKD Q
.KKQ R
PropertyListKKR ^
(KK^ _
queryKK_ d
)KKd e
}KKe f
"KKf g
)KKg h
;KKh i
}LL 
}MM 	
[ff 	

HttpDeleteff	 
]ff 
publicgg 
asyncgg 
Taskgg 
<gg 
ActionResultgg &
>gg& ' 
RemoveQueryByQueryIdgg( <
(gg< =
intgg= @
QueryIdggA H
)ggH I
{hh 	
ifii 
(ii 
QueryIdii 
<=ii 
$numii 
)ii 
returnii $

BadRequestii% /
(ii/ 0
Messageii0 7
(ii7 8
$strii8 Y
)iiY Z
)iiZ [
;ii[ \
tryjj 
{kk 
returnll 
_queryServicell $
.ll$ % 
RemoveQueryByQueryIdll% 9
(ll9 :
QueryIdll: A
)llA B
?llC D
awaitllE J
TaskllK O
.llO P

FromResultllP Z
(llZ [
Okll[ ]
(ll] ^
$"ll^ `
$str	ll` 
{
ll 
QueryId
ll –
}
ll– —
"
ll— ˜
)
ll˜ ™
)
ll™ š
:
ll› œ

BadRequest
ll §
(
ll§ ¨
Message
ll¨ ¯
(
ll¯ °
$"
ll° ²
$str
ll² ä
{
llä å
QueryId
llå ì
}
llì í
"
llí î
)
llî ï
)
llï ğ
;
llğ ñ
}mm 
catchoo 
(oo !
ItemNotFoundExceptionoo (
	exceptionoo) 2
)oo2 3
{pp 
_loggerqq 
.qq 
LogErrorqq  
(qq  !
HelperServiceqq! .
.qq. /
LoggerMessageqq/ <
(qq< =
$strqq= N
,qqN O
$strqqP s
,qqs t
	exceptionqqu ~
,qq~ 
QueryId
qq€ ‡
)
qq‡ ˆ
)
qqˆ ‰
;
qq‰ Š
returnrr 
NotFoundrr 
(rr  
$"rr  "
{rr" #
	exceptionrr# ,
.rr, -
Messagerr- 4
}rr4 5
"rr5 6
)rr6 7
;rr7 8
}ss 
catchtt 
(tt 
	Exceptiontt 
	exceptiontt &
)tt& '
{uu 
_loggervv 
.vv 
LogErrorvv  
(vv  !
HelperServicevv! .
.vv. /
LoggerMessagevv/ <
(vv< =
$strvv= N
,vvN O
$strvvP s
,vvs t
	exceptionvvu ~
,vv~ 
QueryId
vv€ ‡
)
vv‡ ˆ
)
vvˆ ‰
;
vv‰ Š
returnww 
Problemww 
(ww 
$"ww !
$strww! S
{wwS T
QueryIdwwT [
}ww[ \
"ww\ ]
)ww] ^
;ww^ _
}xx 
}yy 	
[|| 	
	HttpPatch||	 
]|| 
public}} 
async}} 
Task}} 
<}} 
ActionResult}} &
>}}& '
MarkQueryAsSolved}}( 9
(}}9 :
int}}: =
QueryId}}> E
)}}E F
{~~ 	
if 
( 
QueryId 
<= 
$num 
) 
return $

BadRequest% /
(/ 0
Message0 7
(7 8
$str8 Y
)Y Z
)Z [
;[ \
try
€€ 
{
 
return
‚‚ 
_queryService
‚‚ $
.
‚‚$ %
MarkQueryAsSolved
‚‚% 6
(
‚‚6 7
QueryId
‚‚7 >
)
‚‚> ?
?
‚‚@ A
await
‚‚B G
Task
‚‚H L
.
‚‚L M

FromResult
‚‚M W
(
‚‚W X
Ok
‚‚X Z
(
‚‚Z [
$"
‚‚[ ]
$str‚‚] 
{‚‚ 
QueryId‚‚ ¥
}‚‚¥ ¦
"‚‚¦ §
)‚‚§ ¨
)‚‚¨ ©
:‚‚ª «

BadRequest‚‚¬ ¶
(‚‚¶ ·
Message‚‚· ¾
(‚‚¾ ¿
$"‚‚¿ Á
$str‚‚Á ü
{‚‚ü ı
QueryId‚‚ı „
}‚‚„ …
"‚‚… †
)‚‚† ‡
)‚‚‡ ˆ
;‚‚ˆ ‰
}
ƒƒ 
catch
…… 
(
…… #
ItemNotFoundException
…… (
	exception
……) 2
)
……2 3
{
†† 
_logger
‡‡ 
.
‡‡ 
LogError
‡‡  
(
‡‡  !
HelperService
‡‡! .
.
‡‡. /
LoggerMessage
‡‡/ <
(
‡‡< =
$str
‡‡= N
,
‡‡N O
$str
‡‡P p
,
‡‡p q
	exception
‡‡r {
,
‡‡{ |
QueryId‡‡} „
)‡‡„ …
)‡‡… †
;‡‡† ‡
return
ˆˆ 
NotFound
ˆˆ 
(
ˆˆ  
$"
ˆˆ  "
{
ˆˆ" #
	exception
ˆˆ# ,
.
ˆˆ, -
Message
ˆˆ- 4
}
ˆˆ4 5
"
ˆˆ5 6
)
ˆˆ6 7
;
ˆˆ7 8
}
‰‰ 
catch
ŠŠ 
(
ŠŠ 
	Exception
ŠŠ 
	exception
ŠŠ &
)
ŠŠ& '
{
‹‹ 
_logger
ŒŒ 
.
ŒŒ 
LogError
ŒŒ  
(
ŒŒ  !
HelperService
ŒŒ! .
.
ŒŒ. /
LoggerMessage
ŒŒ/ <
(
ŒŒ< =
$str
ŒŒ= N
,
ŒŒN O
$str
ŒŒP p
,
ŒŒp q
	exception
ŒŒr {
,
ŒŒ{ |
QueryIdŒŒ} „
)ŒŒ„ …
)ŒŒ… †
;ŒŒ† ‡
return
 
Problem
 
(
 
$"
 !
$str
! \
{
\ ]
QueryId
] d
}
d e
"
e f
)
f g
;
g h
}
 
}
 	
[
 	
HttpGet
	 
]
 
public
ŸŸ 
async
ŸŸ 
Task
ŸŸ 
<
ŸŸ 
ActionResult
ŸŸ &
>
ŸŸ& '
GetQuery
ŸŸ( 0
(
ŸŸ0 1
int
ŸŸ1 4
QueryId
ŸŸ5 <
)
ŸŸ< =
{
   	
if
¡¡ 
(
¡¡ 
QueryId
¡¡ 
<=
¡¡ 
$num
¡¡ 
)
¡¡ 
return
¡¡ $

BadRequest
¡¡% /
(
¡¡/ 0
Message
¡¡0 7
(
¡¡7 8
$str
¡¡8 Y
)
¡¡Y Z
)
¡¡Z [
;
¡¡[ \
try
¢¢ 
{
££ 
var
¤¤ 
Query
¤¤ 
=
¤¤ 
_queryService
¤¤ )
.
¤¤) *
GetQuery
¤¤* 2
(
¤¤2 3
QueryId
¤¤3 :
)
¤¤: ;
;
¤¤; <
return
¦¦ 
await
¦¦ 
Task
¦¦ !
.
¦¦! "

FromResult
¦¦" ,
(
¦¦, -
Ok
¦¦- /
(
¦¦/ 0
Query
¦¦0 5
)
¦¦5 6
)
¦¦6 7
;
¦¦7 8
}
¨¨ 
catch
©© 
(
©© #
ItemNotFoundException
©© (
	exception
©©) 2
)
©©2 3
{
ªª 
_logger
«« 
.
«« 
LogError
««  
(
««  !
HelperService
««! .
.
««. /
LoggerMessage
««/ <
(
««< =
$str
««= N
,
««N O
$str
««P g
,
««g h
	exception
««i r
,
««r s
QueryId
««t {
)
««{ |
)
««| }
;
««} ~
return
¬¬ 
Problem
¬¬ 
(
¬¬ 
$"
¬¬ !
{
¬¬! "
	exception
¬¬" +
.
¬¬+ ,
Message
¬¬, 3
}
¬¬3 4
$str
¬¬4 B
{
¬¬B C
QueryId
¬¬C J
}
¬¬J K
"
¬¬K L
)
¬¬L M
;
¬¬M N
}
­­ 
catch
®® 
(
®® 
	Exception
®® 
	exception
®® &
)
®®& '
{
¯¯ 
_logger
°° 
.
°° 
LogError
°°  
(
°°  !
HelperService
°°! .
.
°°. /
LoggerMessage
°°/ <
(
°°< =
$str
°°= N
,
°°N O
$str
°°P g
,
°°g h
	exception
°°i r
,
°°r s
QueryId
°°t {
)
°°{ |
)
°°| }
;
°°} ~
return
±± 

BadRequest
±± !
(
±±! "
Message
±±" )
(
±±) *
$"
±±* ,
$str
±±, ]
{
±±] ^
QueryId
±±^ e
}
±±e f
"
±±f g
)
±±g h
)
±±h i
;
±±i j
}
²² 
}
³³ 	
[
ÁÁ 	
HttpGet
ÁÁ	 
]
ÁÁ 
public
ÂÂ 
async
ÂÂ 
Task
ÂÂ 
<
ÂÂ 
ActionResult
ÂÂ &
>
ÂÂ& '
GetAll
ÂÂ( .
(
ÂÂ. /
)
ÂÂ/ 0
{
ÃÃ 	
try
ÄÄ 
{
ÅÅ 
var
ÆÆ 
Queries
ÆÆ 
=
ÆÆ 
_queryService
ÆÆ +
.
ÆÆ+ ,
GetListOfQueries
ÆÆ, <
(
ÆÆ< =
)
ÆÆ= >
;
ÆÆ> ?
return
ÇÇ 
await
ÇÇ 
Task
ÇÇ !
.
ÇÇ! "

FromResult
ÇÇ" ,
(
ÇÇ, -
Ok
ÇÇ- /
(
ÇÇ/ 0
Queries
ÇÇ0 7
)
ÇÇ7 8
)
ÇÇ8 9
;
ÇÇ9 :
}
ÈÈ 
catch
ÉÉ 
(
ÉÉ 
	Exception
ÉÉ 
	exception
ÉÉ &
)
ÉÉ& '
{
ÊÊ 
_logger
ËË 
.
ËË 
LogError
ËË  
(
ËË  !
HelperService
ËË! .
.
ËË. /
LoggerMessage
ËË/ <
(
ËË< =
$str
ËË= N
,
ËËN O
$str
ËËP Z
,
ËËZ [
	exception
ËË\ e
)
ËËe f
)
ËËf g
;
ËËg h
return
ÌÌ 
Problem
ÌÌ 
(
ÌÌ 
$str
ÌÌ L
)
ÌÌL M
;
ÌÌM N
}
ÍÍ 
}
ÎÎ 	
[
ää 	
HttpGet
ää	 
]
ää 
public
åå 
async
åå 
Task
åå 
<
åå 
ActionResult
åå &
>
åå& '
GetLatestQueries
åå( 8
(
åå8 9
int
åå9 <
Range
åå= B
=
ååC D
$num
ååE F
)
ååF G
{
ææ 	
try
çç 
{
èè 
var
éé 
Queries
éé 
=
éé 
_queryService
éé +
.
éé+ ,
GetLatestQueries
éé, <
(
éé< =
)
éé= >
.
éé> ?
ToList
éé? E
(
ééE F
)
ééF G
;
ééG H
if
ëë 
(
ëë 
Range
ëë 
<=
ëë 
Queries
ëë $
.
ëë$ %
Count
ëë% *
)
ëë* +
{
ìì 
Queries
íí 
=
íí 
Range
íí #
>
íí$ %
$num
íí& '
?
íí( )
Queries
íí* 1
.
íí1 2
GetRange
íí2 :
(
íí: ;
$num
íí; <
,
íí< =
Range
íí> C
)
ííC D
:
ííE F
Queries
ííG N
;
ííN O
return
îî 
await
îî  
Task
îî! %
.
îî% &

FromResult
îî& 0
(
îî0 1
Ok
îî1 3
(
îî3 4
Queries
îî4 ;
)
îî; <
)
îî< =
;
îî= >
}
ïï 
else
ğğ 
return
ğğ 

BadRequest
ğğ &
(
ğğ& '
Message
ğğ' .
(
ğğ. /
$str
ğğ/ E
)
ğğE F
)
ğğF G
;
ğğG H
}
òò 
catch
óó 
(
óó 
	Exception
óó 
	exception
óó &
)
óó& '
{
ôô 
_logger
õõ 
.
õõ 
LogError
õõ  
(
õõ  !
HelperService
õõ! .
.
õõ. /
LoggerMessage
õõ/ <
(
õõ< =
$str
õõ= N
,
õõN O
$str
õõP o
,
õõo p
	exception
õõq z
)
õõz {
)
õõ{ |
;
õõ| }
return
öö 
Problem
öö 
(
öö 
$str
öö L
)
ööL M
;
ööM N
}
÷÷ 
}
øø 	
[
‹‹ 	
HttpGet
‹‹	 
]
‹‹ 
public
ŒŒ 
async
ŒŒ 
Task
ŒŒ 
<
ŒŒ 
ActionResult
ŒŒ &
>
ŒŒ& ' 
GetTrendingQueries
ŒŒ( :
(
ŒŒ: ;
int
ŒŒ; >
Range
ŒŒ? D
=
ŒŒE F
$num
ŒŒG H
)
ŒŒH I
{
 	
try
 
{
 
var
 
Queries
 
=
 
_queryService
 +
.
+ , 
GetTrendingQueries
, >
(
> ?
)
? @
.
@ A
ToList
A G
(
G H
)
H I
;
I J
if
’’ 
(
’’ 
Range
’’ 
<=
’’ 
Queries
’’ $
.
’’$ %
Count
’’% *
)
’’* +
{
““ 
Queries
”” 
=
”” 
Range
”” #
>
””$ %
$num
””& '
?
””( )
Queries
””* 1
.
””1 2
GetRange
””2 :
(
””: ;
$num
””; <
,
””< =
Range
””> C
)
””C D
:
””E F
Queries
””G N
;
””N O
return
•• 
await
••  
Task
••! %
.
••% &

FromResult
••& 0
(
••0 1
Ok
••1 3
(
••3 4
Queries
••4 ;
)
••; <
)
••< =
;
••= >
}
–– 
else
—— 
return
—— 

BadRequest
—— &
(
——& '
Message
——' .
(
——. /
$str
——/ E
)
——E F
)
——F G
;
——G H
}
˜˜ 
catch
™™ 
(
™™ 
	Exception
™™ 
	exception
™™ &
)
™™& '
{
šš 
_logger
›› 
.
›› 
LogError
››  
(
››  !
HelperService
››! .
.
››. /
LoggerMessage
››/ <
(
››< =
$str
››= N
,
››N O
$str
››P q
,
››q r
	exception
››s |
)
››| }
)
››} ~
;
››~ 
return
œœ 
Problem
œœ 
(
œœ 
$str
œœ L
)
œœL M
;
œœM N
}
 
}
 	
[
¢¢ 	
HttpGet
¢¢	 
]
¢¢ 
public
££ 
async
££ 
Task
££ 
<
££ 
ActionResult
££ &
>
££& ' 
GetQueriesByUserId
££( :
(
££: ;
)
££; <
{
¤¤ 	
int
¥¥ 
UserId
¥¥ 
=
¥¥ 
GetCurrentUser
¥¥ %
(
¥¥% &
)
¥¥& '
.
¥¥' (
UserId
¥¥( .
;
¥¥. /
try
¦¦ 
{
§§ 
var
¨¨ #
ListOfQueriesByUserId
¨¨ )
=
¨¨* +
_queryService
¨¨, 9
.
¨¨9 : 
GetQueriesByUserId
¨¨: L
(
¨¨L M
UserId
¨¨M S
)
¨¨S T
;
¨¨T U
return
ªª 
await
ªª 
Task
ªª !
.
ªª! "

FromResult
ªª" ,
(
ªª, -
Ok
ªª- /
(
ªª/ 0#
ListOfQueriesByUserId
ªª0 E
)
ªªE F
)
ªªF G
;
ªªG H
}
«« 
catch
­­ 
(
­­ 
	Exception
­­ 
	exception
­­ &
)
­­& '
{
®® 
_logger
¯¯ 
.
¯¯ 
LogError
¯¯  
(
¯¯  !
HelperService
¯¯! .
.
¯¯. /
LoggerMessage
¯¯/ <
(
¯¯< =
$str
¯¯= N
,
¯¯N O
$str
¯¯P p
,
¯¯p q
	exception
¯¯r {
,
¯¯{ |
UserId¯¯} ƒ
)¯¯ƒ „
)¯¯„ …
;¯¯… †
return
°° 
Problem
°° 
(
°° 
$"
°° !
$str
°°! Z
{
°°Z [
UserId
°°[ a
}
°°a b
"
°°b c
)
°°c d
;
°°d e
}
±± 
}
³³ 	
[
¶¶ 	
HttpGet
¶¶	 
]
¶¶ 
public
·· 
async
·· 
Task
·· 
<
·· 
ActionResult
·· &
>
··& '
GetQueriesByTitle
··( 9
(
··9 :
string
··: @
Title
··A F
)
··F G
{
¸¸ 	
if
¹¹ 
(
¹¹ 
String
¹¹ 
.
¹¹ 
IsNullOrEmpty
¹¹ $
(
¹¹$ %
Title
¹¹% *
)
¹¹* +
)
¹¹+ ,
return
¹¹- 3

BadRequest
¹¹4 >
(
¹¹> ?
Message
¹¹? F
(
¹¹F G
$str
¹¹G \
)
¹¹\ ]
)
¹¹] ^
;
¹¹^ _
try
ºº 
{
»» 
var
¼¼ "
ListOfQueriesByTitle
¼¼ (
=
¼¼) *
_queryService
¼¼+ 8
.
¼¼8 9
GetQueriesByTitle
¼¼9 J
(
¼¼J K
Title
¼¼K P
)
¼¼P Q
;
¼¼Q R
return
½½ 
await
½½ 
Task
½½ !
.
½½! "

FromResult
½½" ,
(
½½, -
Ok
½½- /
(
½½/ 0"
ListOfQueriesByTitle
½½0 D
)
½½D E
)
½½E F
;
½½F G
}
¾¾ 
catch
ÀÀ 
(
ÀÀ 
	Exception
ÀÀ 
	exception
ÀÀ &
)
ÀÀ& '
{
ÁÁ 
_logger
ÂÂ 
.
ÂÂ 
LogError
ÂÂ  
(
ÂÂ  !
HelperService
ÂÂ! .
.
ÂÂ. /
LoggerMessage
ÂÂ/ <
(
ÂÂ< =
$str
ÂÂ= N
,
ÂÂN O
$str
ÂÂP q
,
ÂÂq r
	exception
ÂÂs |
,
ÂÂ| }
TitleÂÂ~ ƒ
)ÂÂƒ „
)ÂÂ„ …
;ÂÂ… †
return
ÃÃ 
Problem
ÃÃ 
(
ÃÃ 
$"
ÃÃ !
$str
ÃÃ! Y
{
ÃÃY Z
Title
ÃÃZ _
}
ÃÃ_ `
"
ÃÃ` a
)
ÃÃa b
;
ÃÃb c
}
ÅÅ 
}
ÈÈ 	
[
ŞŞ 	
HttpGet
ŞŞ	 
]
ŞŞ 
public
ßß 
async
ßß 
Task
ßß 
<
ßß 
ActionResult
ßß &
>
ßß& '"
GetQueriesByIsSolved
ßß( <
(
ßß< =
bool
ßß= A
IsSolved
ßßB J
)
ßßJ K
{
àà 	
try
ââ 
{
ãã 
var
ää %
ListOfQueriesByIsSolved
ää +
=
ää, -
_queryService
ää. ;
.
ää; <

GetQueries
ää< F
(
ääF G
IsSolved
ääG O
)
ääO P
;
ääP Q
return
åå 
await
åå 
Task
åå !
.
åå! "

FromResult
åå" ,
(
åå, -
Ok
åå- /
(
åå/ 0%
ListOfQueriesByIsSolved
åå0 G
)
ååG H
)
ååH I
;
ååI J
}
ææ 
catch
çç 
(
çç 
	Exception
çç 
	exception
çç &
)
çç& '
{
èè 
_logger
éé 
.
éé 
LogError
éé  
(
éé  !
HelperService
éé! .
.
éé. /
LoggerMessage
éé/ <
(
éé< =
$str
éé= N
,
ééN O
$str
ééP u
,
ééu v
	exceptionééw €
,éé€ 
IsSolvedéé‚ Š
)ééŠ ‹
)éé‹ Œ
;ééŒ 
return
êê 
Problem
êê 
(
êê 
$"
êê !
$str
êê! \
{
êê\ ]
IsSolved
êê] e
}
êêe f
"
êêf g
)
êêg h
;
êêh i
}
ìì 
}
îî 	
[
ŠŠ 	
HttpPost
ŠŠ	 
]
ŠŠ 
public
‹‹ 
async
‹‹ 
Task
‹‹ 
<
‹‹ 
ActionResult
‹‹ &
>
‹‹& '
CreateComment
‹‹( 5
(
‹‹5 6
QueryComment
‹‹6 B
comment
‹‹C J
)
‹‹J K
{
ŒŒ 	
if
 
(
 
comment
 
==
 
null
 
)
  
return
! '

BadRequest
( 2
(
2 3
Message
3 :
(
: ;
$str
; X
)
X Y
)
Y Z
;
Z [
try
 
{
 
comment
‘‘ 
.
‘‘ 
	CreatedBy
‘‘ !
=
‘‘! "
GetCurrentUser
‘‘" 0
(
‘‘0 1
)
‘‘1 2
.
‘‘2 3
UserId
‘‘3 9
;
‘‘9 :
return
’’ 
_queryService
’’ $
.
’’$ %
CreateComment
’’% 2
(
’’2 3
comment
’’3 :
)
’’: ;
?
’’< =
await
’’> C
Task
’’D H
.
’’H I

FromResult
’’I S
(
’’S T
Ok
’’T V
(
’’V W
$str’’W €
)’’€ 
)’’ ‚
:’’ƒ „

BadRequest’’… 
(’’ 
Message’’ —
(’’— ˜
$"’’˜ š
$str’’š ¾
{’’¾ ¿
HelperService’’¿ Ì
.’’Ì Í
PropertyList’’Í Ù
(’’Ù Ú
comment’’Ú á
)’’á â
}’’â ã
"’’ã ä
)’’ä å
)’’å æ
;’’æ ç
}
““ 
catch
”” 
(
”” !
ValidationException
”” &
	exception
””' 0
)
””0 1
{
•• 
_logger
–– 
.
–– 
LogError
––  
(
––  !
HelperService
––! .
.
––. /
LoggerMessage
––/ <
(
––< =
$str
––= N
,
––N O
$str
––P v
,
––v w
	exception––x 
,–– ‚
comment––ƒ Š
)––Š ‹
)––‹ Œ
;––Œ 
return
—— 

BadRequest
—— !
(
——! "
Message
——" )
(
——) *
$"
——* ,
{
——, -
	exception
——- 6
.
——6 7
Message
——7 >
}
——> ?
"
——? @
,
——@ A
comment
——A H
)
——H I
)
——I J
;
——J K
}
˜˜ 
catch
šš 
(
šš 
	Exception
šš 
	exception
šš &
)
šš& '
{
›› 
_logger
œœ 
.
œœ 
LogError
œœ  
(
œœ  !
HelperService
œœ! .
.
œœ. /
LoggerMessage
œœ/ <
(
œœ< =
$str
œœ= N
,
œœN O
$str
œœP v
,
œœv w
	exceptionœœx 
,œœ ‚
commentœœƒ Š
)œœŠ ‹
)œœ‹ Œ
;œœŒ 
return
 
Problem
 
(
 
$"
 !
$str
! E
{
E F
HelperService
F S
.
S T
PropertyList
T `
(
` a
comment
a h
)
h i
}
i j
"
j k
)
k l
;
l m
}
 
}
   	
[
·· 	
HttpGet
··	 
]
·· 
public
¸¸ 
async
¸¸ 
Task
¸¸ 
<
¸¸ 
ActionResult
¸¸ &
>
¸¸& '
GetComments
¸¸( 3
(
¸¸3 4
int
¸¸4 7
QueryId
¸¸8 ?
)
¸¸? @
{
¹¹ 	
if
ºº 
(
ºº 
QueryId
ºº 
<=
ºº 
$num
ºº 
)
ºº 
return
ºº $

BadRequest
ºº% /
(
ºº/ 0
Message
ºº0 7
(
ºº7 8
$str
ºº8 X
)
ººX Y
)
ººY Z
;
ººZ [
try
»» 
{
¼¼ 
var
½½ 
ListOfComments
½½ "
=
½½# $
_queryService
½½% 2
.
½½2 3
GetComments
½½3 >
(
½½> ?
QueryId
½½? F
)
½½F G
;
½½G H
return
¾¾ 
await
¾¾ 
Task
¾¾ !
.
¾¾! "

FromResult
¾¾" ,
(
¾¾, -
Ok
¾¾- /
(
¾¾/ 0
ListOfComments
¾¾0 >
)
¾¾> ?
)
¾¾? @
;
¾¾@ A
}
¿¿ 
catch
ÁÁ 
(
ÁÁ 
	Exception
ÁÁ 
	exception
ÁÁ &
)
ÁÁ& '
{
ÂÂ 
_logger
ÃÃ 
.
ÃÃ 
LogError
ÃÃ  
(
ÃÃ  !
HelperService
ÃÃ! .
.
ÃÃ. /
LoggerMessage
ÃÃ/ <
(
ÃÃ< =
$str
ÃÃ= N
,
ÃÃN O
$str
ÃÃP k
,
ÃÃk l
	exception
ÃÃm v
,
ÃÃv w
QueryId
ÃÃx 
)ÃÃ €
)ÃÃ€ 
;ÃÃ ‚
return
ÄÄ 
Problem
ÄÄ 
(
ÄÄ 
$"
ÄÄ !
$str
ÄÄ! [
{
ÄÄ[ \
QueryId
ÄÄ\ c
}
ÄÄc d
"
ÄÄd e
)
ÄÄe f
;
ÄÄf g
}
ÇÇ 
}
ÉÉ 	
[
ãã 	
HttpPost
ãã	 
]
ãã 
public
ää 
async
ää 
Task
ää 
<
ää 
ActionResult
ää &
>
ää& '
AddSpam
ää( /
(
ää/ 0
Spam
ää0 4
spam
ää5 9
)
ää9 :
{
åå 	
if
ææ 
(
ææ 
spam
ææ 
==
ææ 
null
ææ 
)
ææ 
return
ææ %

BadRequest
ææ& 0
(
ææ0 1
Message
ææ1 8
(
ææ8 9
$str
ææ9 U
)
ææU V
)
ææV W
;
ææW X
try
èè 
{
éé 
spam
êê 
.
êê 
UserId
êê 
=
êê 
GetCurrentUser
êê *
(
êê* +
)
êê+ ,
.
êê, -
UserId
êê- 3
;
êê3 4
return
ëë 
_queryService
ëë $
.
ëë$ %
AddSpam
ëë% ,
(
ëë, -
spam
ëë. 2
)
ëë2 3
?
ëë4 5
await
ëë6 ;
Task
ëë< @
.
ëë@ A

FromResult
ëëA K
(
ëëK L
Ok
ëëL N
(
ëëN O
Message
ëëO V
(
ëëV W
$str
ëëW ~
)
ëë~ 
)ëë €
)ëë€ 
:ëë‚ ƒ

BadRequestëë„ 
(ëë 
Messageëë –
(ëë– —
$strëë— Æ
)ëëÆ Ç
)ëëÇ È
;ëëÈ É
}
ìì 
catch
íí 
(
íí !
ValidationException
íí &
	exception
íí' 0
)
íí0 1
{
îî 
_logger
ïï 
.
ïï 
LogError
ïï  
(
ïï  !
HelperService
ïï! .
.
ïï. /
LoggerMessage
ïï/ <
(
ïï< =
$str
ïï= N
,
ïïN O
$str
ïïP f
,
ïïf g
	exception
ïïh q
,
ïïq r
spam
ïïs w
)
ïïw x
)
ïïx y
;
ïïy z
return
ğğ 
Problem
ğğ 
(
ğğ 
$"
ğğ !
{
ğğ! "
	exception
ğğ" +
.
ğğ+ ,
Message
ğğ, 3
}
ğğ3 4
"
ğğ4 5
)
ğğ5 6
;
ğğ6 7
}
ññ 
catch
òò 
(
òò 
	Exception
òò 
	exception
òò &
)
òò& '
{
óó 
_logger
ôô 
.
ôô 
LogError
ôô  
(
ôô  !
HelperService
ôô! .
.
ôô. /
LoggerMessage
ôô/ <
(
ôô< =
$str
ôô= N
,
ôôN O
$str
ôôP d
,
ôôd e
	exception
ôôf o
,
ôôo p
spam
ôôq u
)
ôôu v
)
ôôv w
;
ôôw x
return
õõ 

BadRequest
õõ !
(
õõ! "
Message
õõ" )
(
õõ) *
$str
õõ* [
,
õõ[ \
spam
õõ\ `
)
õõ` a
)
õõa b
;
õõb c
}
öö 
}
÷÷ 	
[
…… 	
HttpGet
……	 
]
…… 
public
†† 
async
†† 
Task
†† 
<
†† 
ActionResult
†† &
>
††& '
GetListOfSpams
††( 6
(
††6 7
)
††7 8
{
‡‡ 	
try
ˆˆ 
{
‰‰ 
var
ŠŠ 
ListOfSpams
ŠŠ 
=
ŠŠ  !
_queryService
ŠŠ" /
.
ŠŠ/ 0
GetSpams
ŠŠ0 8
(
ŠŠ8 9
$num
ŠŠ9 :
)
ŠŠ: ;
;
ŠŠ; <
return
‹‹ 
await
‹‹ 
Task
‹‹ !
.
‹‹! "

FromResult
‹‹" ,
(
‹‹, -
Ok
‹‹- /
(
‹‹/ 0
ListOfSpams
‹‹0 ;
)
‹‹; <
)
‹‹< =
;
‹‹= >
}
ŒŒ 
catch
 
(
 
	Exception
 
	exception
 &
)
& '
{
 
_logger
 
.
 
LogError
  
(
  !
HelperService
! .
.
. /
LoggerMessage
/ <
(
< =
$str
= N
,
N O
$str
P b
,
b c
	exception
d m
)
m n
)
n o
;
o p
return
 
Problem
 
(
 
$str
 L
)
L M
;
M N
}
‘‘ 
}
’’ 	
[
«« 
	HttpPatch
«« 
]
«« 
public
¬¬ 

ActionResult
¬¬ 
UpdateSpamStatus
¬¬ (
(
¬¬( )
int
¬¬) ,
QueryId
¬¬- 4
,
¬¬4 5
int
¬¬6 9
VerifyStatusID
¬¬: H
)
¬¬H I
{
­­ 
if
®® 

(
®® 
QueryId
®® 
<=
®® 
$num
®® 
)
®® 
return
®®  

BadRequest
®®! +
(
®®+ ,
Message
®®, 3
(
®®3 4
$"
®®4 6
$str
®®6 g
{
®®g h
QueryId
®®h o
}
®®o p
"
®®p q
)
®®q r
)
®®r s
;
®®s t
if
¯¯ 

(
¯¯ 
VerifyStatusID
¯¯ 
<=
¯¯ 
$num
¯¯ 
||
¯¯  "
VerifyStatusID
¯¯# 1
>
¯¯2 3
$num
¯¯4 5
)
¯¯5 6
return
¯¯7 =

BadRequest
¯¯> H
(
¯¯H I
Message
¯¯I P
(
¯¯P Q
$"
¯¯Q S
$str¯¯S Ÿ
{¯¯Ÿ  
VerifyStatusID¯¯  ®
}¯¯® ¯
"¯¯¯ °
)¯¯° ±
)¯¯± ²
;¯¯² ³
try
°° 
{
±± 	
return
²² 
_queryService
²²  
.
²²  !
ChangeSpamStatus
²²! 1
(
²²1 2
QueryId
²²2 9
,
²²9 :
VerifyStatusID
²²; I
)
²²I J
?
²²J K
Ok
²²L N
(
²²N O
Message
²²O V
(
²²V W
$str
²²W m
)
²²m n
)
²²n o
:
²²o p

BadRequest
²²q {
(
²²{ |
Message²²| ƒ
(²²ƒ „
$"²²„ †
$str²²† ¿
{²²¿ À
QueryId²²À Ç
}²²Ç È
$str²²È Ü
{²²Ü İ
VerifyStatusID²²İ ë
}²²ë ì
"²²ì í
)²²í î
)²²î ï
;²²ï ğ
}
³³ 	
catch
´´ 
(
´´ 
	Exception
´´ 
	exception
´´ "
)
´´" #
{
µµ 	
_logger
¶¶ 
.
¶¶ 
LogError
¶¶ 
(
¶¶ 
HelperService
¶¶ *
.
¶¶* +
LoggerMessage
¶¶+ 8
(
¶¶8 9
$"
¶¶9 ;
$str
¶¶; G
"
¶¶G H
,
¶¶H I
$str
¶¶J }
,
¶¶} ~
	exception¶¶ ˆ
,¶¶ˆ ‰
QueryId¶¶Š ‘
,¶¶‘ ’
VerifyStatusID¶¶“ ¡
)¶¶¡ ¢
)¶¶¢ £
;¶¶£ ¤
return
·· 
Problem
·· 
(
·· 
$"
·· 
$str
·· V
{
··V W
QueryId
··W ^
}
··^ _
$str
··_ s
{
··s t
VerifyStatusID··t ‚
}··‚ ƒ
"··ƒ „
)··„ …
;··… †
}
¸¸ 	
}
¹¹ 
}
½½ 
}¾¾ Ì
XC:\Users\manimaran.venkat\Documents\Backup\AspireOverflow\Controllers\TokenController.cs
	namespace		 	
AspireOverflow		
 
.		 
Controllers		 $
{

 
[ 
ApiController 
] 
[ 
Route 

(
 
$str "
)" #
]# $
public 

class 
TokenController  
:! "
BaseController# 1
{ 
private 
readonly 
ITokenService &
_tokenService' 4
;4 5
private 
readonly 
ILogger  
<  !
TokenController! 0
>0 1
_logger2 9
;9 :
public 
TokenController 
( 
ITokenService ,
tokenService- 9
,9 :
ILogger; B
<B C
TokenControllerC R
>R S
loggerT Z
)Z [
{ 	
_tokenService 
= 
tokenService (
;( )
_logger 
= 
logger 
; 
} 	
[-- 	
HttpPost--	 
]-- 
public.. 
IActionResult.. 
	AuthToken.. &
(..& '
Login..' ,
Crendentials..- 9
)..9 :
{// 	
try00
 
{11 
if22 
(22 
Crendentials22 !
==22" $
null22% )
||22* ,
!22- .

Validation22. 8
.228 9#
ValidateUserCredentials229 P
(22P Q
Crendentials22Q ]
.22] ^
Email22^ c
!22c d
,22d e
Crendentials22f r
.22r s
Password22s {
!22{ |
)22| }
)22} ~
return	22 …

BadRequest
22† 
(
22 ‘
$str
22‘ ³
)
22³ ´
;
22´ µ
var33 
Result33 
=33 
_tokenService33 *
.33* +
GenerateToken33+ 8
(338 9
Crendentials339 E
)33E F
;33F G
return44 
Ok44 
(44 
Result44  
)44  !
;44! "
}66 
catch77 
(77 
ValidationException77 &
	exception77' 0
)770 1
{88 
_logger99 
.99 
LogError99  
(99  !
HelperService99! .
.99. /
LoggerMessage99/ <
(99< =
$str99= N
,99N O
$str99P z
,99z {
	exception	99| …
,
99… †
Crendentials
99‡ “
.
99“ ”
Email
99” ™
!
99™ š
)
99š ›
)
99› œ
;
99œ 
return:: 

BadRequest:: !
(::! "
	exception::" +
.::+ ,
Message::, 3
)::3 4
;::4 5
}<< 
catch== 
(== 
	Exception== 
	exception== &
)==& '
{>> 
_logger?? 
.?? 
LogError??  
(??  !
HelperService??! .
.??. /
LoggerMessage??/ <
(??< =
$str??= N
,??N O
$str??P z
,??z {
	exception	??| …
,
??… †
Crendentials
??‡ “
.
??“ ”
Email
??” ™
!
??™ š
)
??š ›
)
??› œ
;
??œ 
return@@ 

BadRequest@@ !
(@@! "
Message@@" )
(@@) *
$str@@* \
)@@\ ]
)@@] ^
;@@^ _
}AA 
}CC 	
}FF 
}II Ÿ¾
WC:\Users\manimaran.venkat\Documents\Backup\AspireOverflow\Controllers\UserController.cs
	namespace 	
AspireOverflow
 
. 
Controllers $
;$ %
[ 
ApiController 
] 
[ 
	Authorize 
] 
[ 
Route 
( 
$str 
) 
]  
public 
class 
UserController 
: 
BaseController ,
{ 
private 
readonly 
ILogger 
< 
UserController +
>+ ,
_logger- 4
;4 5
private 
readonly 
IUserService !
_UserService" .
;. /
public 

UserController 
( 
ILogger !
<! "
UserController" 0
>0 1
logger2 8
,8 9
IUserService: F
UserServiceG R
)R S
{ 
_logger 
= 
logger 
; 
_UserService 
= 
UserService "
;" #
} 
[55 
HttpPost55 
]55 
[55 
AllowAnonymous55 
]55 
public66 

async66 
Task66 
<66 
ActionResult66 "
>66" #

CreateUser66$ .
(66. /
User66/ 3
User664 8
)668 9
{77 
if99 

(99 
User99 
==99 
null99 
)99 
return99  

BadRequest99! +
(99+ ,
Message99, 3
(993 4
$str994 Q
)99Q R
)99R S
;99S T
try:: 
{;; 	
return== 
_UserService== 
.==  

CreateUser==  *
(==* +
User==+ /
)==/ 0
?==1 2
await==3 8
Task==9 =
.=== >

FromResult==> H
(==H I
Ok==I K
(==K L
$str==L b
)==b c
)==c d
:==e f

BadRequest==g q
(==q r
Message==r y
(==y z
$"==z |
$str	==| 
{
== 
HelperService
== «
.
==« ¬
PropertyList
==¬ ¸
(
==¸ ¹
User
==¹ ½
)
==½ ¾
}
==¾ ¿
"
==¿ À
)
==À Á
)
==Á Â
;
==Â Ã
}>> 	
catch?? 
(?? 
ValidationException?? "
	exception??# ,
)??, -
{@@ 	
_loggerBB 
.BB 
LogErrorBB 
(BB 
HelperServiceBB *
.BB* +
LoggerMessageBB+ 8
(BB8 9
$strBB9 I
,BBI J
$strBBK c
,BBc d
	exceptionBBe n
,BBn o
UserBBp t
)BBt u
)BBu v
;BBv w
returnCC 

BadRequestCC 
(CC 
MessageCC %
(CC% &
$"CC& (
{CC( )
	exceptionCC) 2
.CC2 3
MessageCC3 :
}CC: ;
"CC; <
,CC< =
UserCC= A
)CCA B
)CCB C
;CCC D
}DD 	
catchEE 
(EE 
	ExceptionEE 
	exceptionEE "
)EE" #
{FF 	
_loggerGG 
.GG 
LogErrorGG 
(GG 
HelperServiceGG *
.GG* +
LoggerMessageGG+ 8
(GG8 9
$strGG9 I
,GGI J
$strGGK c
,GGc d
	exceptionGGe n
,GGn o
UserGGp t
)GGt u
)GGu v
;GGv w
returnHH 
ProblemHH 
(HH 
$"HH 
$strHH >
{HH> ?
HelperServiceHH? L
.HHL M
PropertyListHHM Y
(HHY Z
UserHHZ ^
)HH^ _
}HH_ `
"HH` a
)HHa b
;HHb c
}II 	
}JJ 
[aa 
	HttpPatchaa 
]aa 
publicbb 

asyncbb 
Taskbb 
<bb 
ActionResultbb "
>bb" #"
ChangeUserVerifyStatusbb$ :
(bb: ;
intbb; >
UserIdbb? E
,bbE F
boolbbG K

IsVerifiedbbL V
)bbV W
{cc 
ifdd 

(dd 
UserIddd 
<=dd 
$numdd 
)dd 
returndd 

BadRequestdd  *
(dd* +
Messagedd+ 2
(dd2 3
$strdd3 S
)ddS T
)ddT U
;ddU V
tryee 
{ff 	
ifgg 
(gg 

IsVerifiedgg 
)gg 
returngg "
_UserServicegg# /
.gg/ 0(
ChangeUserVerificationStatusgg0 L
(ggL M
UserIdggM S
,ggS T
$numggU V
)ggV W
?ggX Y
awaitggZ _
Taskgg` d
.ggd e

FromResultgge o
(ggo p
Okggp r
(ggr s
$"ggs u
$str	ggu µ
{
ggµ ¶
UserId
gg¶ ¼
}
gg¼ ½
"
gg½ ¾
)
gg¾ ¿
)
gg¿ À
:
ggÁ Â

BadRequest
ggÃ Í
(
ggÍ Î
Message
ggÎ Õ
(
ggÕ Ö
$"
ggÖ Ø
$str
ggØ “
{
gg“ ”
UserId
gg” š
}
ggš ›
"
gg› œ
)
ggœ 
)
gg 
;
gg Ÿ
elsehh 
returnhh 
_UserServicehh $
.hh$ %(
ChangeUserVerificationStatushh% A
(hhA B
UserIdhhB H
,hhH I
$numhhJ K
)hhK L
?hhM N
awaithhO T
TaskhhU Y
.hhY Z

FromResulthhZ d
(hhd e
Okhhe g
(hhg h
$"hhh j
$str	hhj ¬
{
hh¬ ­
UserId
hh­ ³
}
hh³ ´
"
hh´ µ
)
hhµ ¶
)
hh¶ ·
:
hh¸ ¹

BadRequest
hhº Ä
(
hhÄ Å
Message
hhÅ Ì
(
hhÌ Í
$"
hhÍ Ï
$str
hhÏ Œ
{
hhŒ 
UserId
hh “
}
hh“ ”
"
hh” •
)
hh• –
)
hh– —
;
hh— ˜
}ii 	
catchjj 
(jj !
ItemNotFoundExceptionjj $
	exceptionjj% .
)jj. /
{kk 	
_loggerll 
.ll 
LogErrorll 
(ll 
HelperServicell *
.ll* +
LoggerMessagell+ 8
(ll8 9
$strll9 I
,llI J
$str	llK 
,
ll ‚
	exception
llƒ Œ
,
llŒ 
UserId
ll ”
)
ll” •
)
ll• –
;
ll– —
returnmm 
NotFoundmm 
(mm 
$"mm 
{mm 
	exceptionmm (
.mm( )
Messagemm) 0
}mm0 1
"mm1 2
)mm2 3
;mm3 4
}nn 	
catchoo 
(oo 
	Exceptionoo 
	exceptionoo "
)oo" #
{pp 	
_loggerqq 
.qq 
LogErrorqq 
(qq 
HelperServiceqq *
.qq* +
LoggerMessageqq+ 8
(qq8 9
$strqq9 I
,qqI J
$str	qqK 
,
qq ‚
	exception
qqƒ Œ
,
qqŒ 
UserId
qq ”
)
qq” •
)
qq• –
;
qq– —
returnrr 
Problemrr 
(rr 
$"rr 
$strrr `
{rr` a
UserIdrra g
}rrg h
"rrh i
)rri j
;rrj k
}ss 	
}tt 
[
‹‹ 
	HttpPatch
‹‹ 
]
‹‹ 
public
ŒŒ 

async
ŒŒ 
Task
ŒŒ 
<
ŒŒ 
ActionResult
ŒŒ "
>
ŒŒ" #$
UpdateUserByIsReviewer
ŒŒ$ :
(
ŒŒ: ;
int
ŒŒ; >
UserId
ŒŒ? E
,
ŒŒE F
bool
ŒŒG K

IsReviewer
ŒŒL V
)
ŒŒV W
{
 
if
 

(
 
UserId
 
<=
 
$num
 
)
 
return
 

BadRequest
  *
(
* +
Message
+ 2
(
2 3
$str
3 S
)
S T
)
T U
;
U V
try
 
{
 	
return
‘‘ 
_UserService
‘‘ 
.
‘‘ $
UpdateUserByIsReviewer
‘‘ 5
(
‘‘5 6
UserId
‘‘6 <
,
‘‘< =

IsReviewer
‘‘> H
)
‘‘H I
?
‘‘J K
await
‘‘L Q
Task
‘‘R V
.
‘‘V W

FromResult
‘‘W a
(
‘‘a b
Ok
‘‘c e
(
‘‘e f
$"
‘‘f h
$str‘‘h 
{‘‘ Ÿ
UserId‘‘Ÿ ¥
}‘‘¥ ¦
"‘‘¦ §
)‘‘§ ¨
)‘‘¨ ©
:‘‘ª «

BadRequest‘‘¬ ¶
(‘‘¶ ·
Message‘‘· ¾
(‘‘¾ ¿
$"‘‘¿ Á
$str‘‘Á €
{‘‘€ 
UserId‘‘ ‡
}‘‘‡ ˆ
"‘‘ˆ ‰
)‘‘‰ Š
)‘‘Š ‹
;‘‘‹ Œ
}
““ 	
catch
”” 
(
”” #
ItemNotFoundException
”” $
	exception
””% .
)
””. /
{
•• 	
_logger
–– 
.
–– 
LogError
–– 
(
–– 
HelperService
–– *
.
––* +
LoggerMessage
––+ 8
(
––8 9
$str
––9 I
,
––I J
$str––K ‚
,––‚ ƒ
	exception––„ 
,–– 
UserId–– •
)––• –
)––– —
;––— ˜
return
—— 
NotFound
—— 
(
—— 
$"
—— 
{
—— 
	exception
—— (
.
——( )
Message
——) 0
}
——0 1
"
——1 2
)
——2 3
;
——3 4
}
˜˜ 	
catch
™™ 
(
™™ 
	Exception
™™ 
	exception
™™ "
)
™™" #
{
šš 	
_logger
›› 
.
›› 
LogError
›› 
(
›› 
HelperService
›› *
.
››* +
LoggerMessage
››+ 8
(
››8 9
$str
››9 I
,
››I J
$str››K €
,››€ 
	exception››‚ ‹
,››‹ Œ
UserId›› “
)››“ ”
)››” •
;››• –
return
œœ 
Problem
œœ 
(
œœ 
$"
œœ 
$str
œœ ]
{
œœ] ^
UserId
œœ^ d
}
œœd e
"
œœe f
)
œœf g
;
œœg h
}
 	
}
 
[
¹¹ 

HttpDelete
¹¹ 
]
¹¹ 
public
ºº 

async
ºº 
Task
ºº 
<
ºº 
ActionResult
ºº "
>
ºº" #

RemoveUser
ºº$ .
(
ºº. /
int
ºº/ 2
UserId
ºº3 9
)
ºº9 :
{
»» 
if
¼¼ 

(
¼¼ 
UserId
¼¼ 
<=
¼¼ 
$num
¼¼ 
)
¼¼ 
return
¼¼ 

BadRequest
¼¼  *
(
¼¼* +
Message
¼¼+ 2
(
¼¼2 3
$str
¼¼3 S
)
¼¼S T
)
¼¼T U
;
¼¼U V
try
½½ 
{
¾¾ 	
return
¿¿ 
_UserService
¿¿ 
.
¿¿  

RemoveUser
¿¿  *
(
¿¿* +
UserId
¿¿+ 1
)
¿¿1 2
?
¿¿3 4
await
¿¿5 :
Task
¿¿; ?
.
¿¿? @

FromResult
¿¿@ J
(
¿¿J K
Ok
¿¿K M
(
¿¿M N
$str
¿¿N }
)
¿¿} ~
)
¿¿~ 
:¿¿€ 

BadRequest¿¿‚ Œ
(¿¿Œ 
Message¿¿ ”
(¿¿” •
$"¿¿• —
$str¿¿— ¾
{¿¿¾ ¿
UserId¿¿¿ Å
}¿¿Å Æ
"¿¿Æ Ç
)¿¿Ç È
)¿¿È É
;¿¿É Ê
}
ÀÀ 	
catch
ÁÁ 
(
ÁÁ #
ItemNotFoundException
ÁÁ $
	exception
ÁÁ% .
)
ÁÁ. /
{
ÂÂ 	
_logger
ÃÃ 
.
ÃÃ 
LogError
ÃÃ 
(
ÃÃ 
HelperService
ÃÃ *
.
ÃÃ* +
LoggerMessage
ÃÃ+ 8
(
ÃÃ8 9
$str
ÃÃ9 I
,
ÃÃI J
$str
ÃÃK c
,
ÃÃc d
	exception
ÃÃe n
,
ÃÃn o
UserId
ÃÃp v
)
ÃÃv w
)
ÃÃw x
;
ÃÃx y
return
ÄÄ 

BadRequest
ÄÄ 
(
ÄÄ 
Message
ÄÄ %
(
ÄÄ% &
$"
ÄÄ& (
{
ÄÄ( )
	exception
ÄÄ) 2
.
ÄÄ2 3
Message
ÄÄ3 :
}
ÄÄ: ;
"
ÄÄ; <
)
ÄÄ< =
)
ÄÄ= >
;
ÄÄ> ?
}
ÅÅ 	
catch
ÆÆ 
(
ÆÆ 
	Exception
ÆÆ 
	exception
ÆÆ "
)
ÆÆ" #
{
ÇÇ 	
_logger
ÈÈ 
.
ÈÈ 
LogError
ÈÈ 
(
ÈÈ 
HelperService
ÈÈ *
.
ÈÈ* +
LoggerMessage
ÈÈ+ 8
(
ÈÈ8 9
$str
ÈÈ9 I
,
ÈÈI J
$str
ÈÈK c
,
ÈÈc d
	exception
ÈÈe n
,
ÈÈn o
UserId
ÈÈp v
)
ÈÈv w
)
ÈÈw x
;
ÈÈx y
return
ÉÉ 
Problem
ÉÉ 
(
ÉÉ 
$"
ÉÉ 
$str
ÉÉ M
{
ÉÉM N
UserId
ÉÉN T
}
ÉÉT U
"
ÉÉU V
)
ÉÉV W
;
ÉÉW X
}
ÊÊ 	
}
ËË 
[
ÚÚ 
HttpGet
ÚÚ 
]
ÚÚ 
public
ÛÛ 

async
ÛÛ 
Task
ÛÛ 
<
ÛÛ 
ActionResult
ÛÛ "
>
ÛÛ" #
GetUser
ÛÛ$ +
(
ÛÛ+ ,
)
ÛÛ, -
{
ÜÜ 
int
İİ 
UserId
İİ 
=
İİ 
GetCurrentUser
İİ !
(
İİ! "
)
İİ" #
.
İİ# $
UserId
İİ$ *
;
İİ* +
try
ŞŞ 
{
ßß 	
return
àà 
await
àà 
Task
àà 
.
àà 

FromResult
àà (
(
àà( )
Ok
àà) +
(
àà+ ,
_UserService
àà- 9
.
àà9 :
GetUserByID
àà: E
(
ààE F
UserId
ààF L
)
ààL M
)
ààM N
)
ààN O
;
ààO P
}
ââ 	
catch
ãã 
(
ãã 
	Exception
ãã 
	exception
ãã "
)
ãã" #
{
ää 	
_logger
åå 
.
åå 
LogError
åå 
(
åå 
HelperService
åå *
.
åå* +
LoggerMessage
åå+ 8
(
åå8 9
$str
åå9 I
,
ååI J
$str
ååK V
,
ååV W
	exception
ååX a
,
ååa b
UserId
ååc i
)
ååi j
)
ååj k
;
ååk l
return
ææ 
Problem
ææ 
(
ææ 
$"
ææ 
$str
ææ L
{
ææL M
UserId
ææM S
}
ææS T
"
ææT U
)
ææU V
;
ææV W
}
çç 	
}
èè 
[
€€ 
HttpGet
€€ 
]
€€ 
public
 

async
 
Task
 
<
 
ActionResult
 "
>
" #&
GetUsersByVerifyStatusId
$ <
(
< =
int
= @
VerifyStatusID
A O
)
O P
{
‚‚ 
if
ƒƒ 

(
ƒƒ 
VerifyStatusID
ƒƒ 
<=
ƒƒ 
$num
ƒƒ 
||
ƒƒ  "
VerifyStatusID
ƒƒ# 1
>
ƒƒ2 3
$num
ƒƒ4 5
)
ƒƒ5 6
return
ƒƒ7 =

BadRequest
ƒƒ> H
(
ƒƒH I
Message
ƒƒI P
(
ƒƒP Q
$"
ƒƒQ S
$strƒƒS š
{ƒƒš ›
VerifyStatusIDƒƒ› ©
}ƒƒ© ª
"ƒƒª «
)ƒƒ« ¬
)ƒƒ¬ ­
;ƒƒ­ ®
try
„„ 
{
…… 	
var
†† 
ListOfUsers
†† 
=
†† 
_UserService
†† *
.
††* +$
GetUsersByVerifyStatus
††+ A
(
††A B
VerifyStatusID
††B P
)
††P Q
;
††Q R
return
‡‡ 
await
‡‡ 
Task
‡‡ 
.
‡‡ 

FromResult
‡‡ (
(
‡‡( )
Ok
‡‡) +
(
‡‡+ ,
ListOfUsers
‡‡, 7
)
‡‡7 8
)
‡‡8 9
;
‡‡9 :
}
ˆˆ 	
catch
‰‰ 
(
‰‰ 
	Exception
‰‰ 
	exception
‰‰ "
)
‰‰" #
{
ŠŠ 	
_logger
‹‹ 
.
‹‹ 
LogError
‹‹ 
(
‹‹ 
HelperService
‹‹ *
.
‹‹* +
LoggerMessage
‹‹+ 8
(
‹‹8 9
$str
‹‹9 I
,
‹‹I J
$str
‹‹K y
,
‹‹y z
	exception‹‹{ „
)‹‹„ …
)‹‹… †
;‹‹† ‡
return
ŒŒ 
Problem
ŒŒ 
(
ŒŒ 
$"
ŒŒ 
$str
ŒŒ ]
{
ŒŒ] ^
VerifyStatusID
ŒŒ^ l
}
ŒŒl m
"
ŒŒm n
)
ŒŒn o
;
ŒŒo p
}
 	
}
 
[
¥¥ 
HttpGet
¥¥ 
]
¥¥ 
public
¦¦ 

async
¦¦ 
Task
¦¦ 
<
¦¦ 
ActionResult
¦¦ "
>
¦¦" #"
GetUsersByUserRoleId
¦¦$ 8
(
¦¦8 9
int
¦¦9 <
RoleId
¦¦= C
)
¦¦C D
{
§§ 
if
¨¨ 

(
¨¨ 
RoleId
¨¨ 
<=
¨¨ 
$num
¨¨ 
||
¨¨ 
RoleId
¨¨ !
>
¨¨" #
$num
¨¨$ %
)
¨¨% &
return
¨¨' -

BadRequest
¨¨. 8
(
¨¨8 9
Message
¨¨9 @
(
¨¨@ A
$"
¨¨A C
$str
¨¨C z
{
¨¨z {
RoleId¨¨{ 
}¨¨ ‚
"¨¨‚ ƒ
)¨¨ƒ „
)¨¨„ …
;¨¨… †
try
©© 
{
ªª 	
var
«« 
ListOfUsers
«« 
=
«« 
_UserService
«« *
.
««* +"
GetUsersByUserRoleID
««+ ?
(
««? @
RoleId
««@ F
)
««F G
;
««G H
return
¬¬ 
await
¬¬ 
Task
¬¬ 
.
¬¬ 

FromResult
¬¬ (
(
¬¬( )
Ok
¬¬) +
(
¬¬+ ,
ListOfUsers
¬¬, 7
)
¬¬7 8
)
¬¬8 9
;
¬¬9 :
}
­­ 	
catch
®® 
(
®® 
	Exception
®® 
	exception
®® "
)
®®" #
{
¯¯ 	
_logger
°° 
.
°° 
LogError
°° 
(
°° 
HelperService
°° *
.
°°* +
LoggerMessage
°°+ 8
(
°°8 9
$str
°°9 I
,
°°I J
$str
°°K m
,
°°m n
	exception
°°o x
)
°°x y
)
°°y z
;
°°z {
return
±± 
Problem
±± 
(
±± 
$"
±± 
$str
±± U
{
±±U V
RoleId
±±V \
}
±±\ ]
"
±±] ^
)
±±^ _
;
±±_ `
}
²² 	
}
³³ 
[
ÊÊ 
HttpGet
ÊÊ 
]
ÊÊ 
public
ËË 

async
ËË 
Task
ËË 
<
ËË 
ActionResult
ËË "
>
ËË" #"
GetUsersByIsReviewer
ËË$ 8
(
ËË8 9
bool
ËË9 =

IsReviewer
ËË> H
)
ËËH I
{
ÌÌ 
try
ÎÎ 
{
ÏÏ 	
var
ĞĞ 
ListOfUsers
ĞĞ 
=
ĞĞ 
_UserService
ĞĞ *
.
ĞĞ* +"
GetUsersByIsReviewer
ĞĞ+ ?
(
ĞĞ? @

IsReviewer
ĞĞ@ J
)
ĞĞJ K
;
ĞĞK L
return
ÑÑ 
await
ÑÑ 
Task
ÑÑ 
.
ÑÑ 

FromResult
ÑÑ (
(
ÑÑ( )
Ok
ÑÑ) +
(
ÑÑ+ ,
ListOfUsers
ÑÑ, 7
)
ÑÑ7 8
)
ÑÑ8 9
;
ÑÑ9 :
}
ÒÒ 	
catch
ÓÓ 
(
ÓÓ 
	Exception
ÓÓ 
	exception
ÓÓ "
)
ÓÓ" #
{
ÔÔ 	
_logger
ÕÕ 
.
ÕÕ 
LogError
ÕÕ 
(
ÕÕ 
HelperService
ÕÕ *
.
ÕÕ* +
LoggerMessage
ÕÕ+ 8
(
ÕÕ8 9
$str
ÕÕ9 I
,
ÕÕI J
$str
ÕÕK s
,
ÕÕs t
	exception
ÕÕu ~
)
ÕÕ~ 
)ÕÕ €
;ÕÕ€ 
return
ÖÖ 
Problem
ÖÖ 
(
ÖÖ 
$"
ÖÖ 
$str
ÖÖ Y
{
ÖÖY Z

IsReviewer
ÖÖZ d
}
ÖÖd e
"
ÖÖe f
)
ÖÖf g
;
ÖÖg h
}
×× 	
}
ØØ 
[
ÛÛ 
HttpGet
ÛÛ 
]
ÛÛ 
[
ÛÛ 
AllowAnonymous
ÛÛ 
]
ÛÛ 
public
ÜÜ 

async
ÜÜ 
Task
ÜÜ 
<
ÜÜ 
IActionResult
ÜÜ #
>
ÜÜ# $

GetGenders
ÜÜ% /
(
ÜÜ/ 0
)
ÜÜ0 1
{
İİ 
try
ŞŞ 
{
ßß 	
return
àà 
await
àà 
Task
àà 
.
àà 

FromResult
àà (
(
àà( )
Ok
àà) +
(
àà+ ,
_UserService
àà, 8
.
àà8 9

GetGenders
àà9 C
(
ààC D
)
ààD E
)
ààE F
)
ààF G
;
ààG H
}
áá 	
catch
ââ 
(
ââ 
	Exception
ââ 
	exception
ââ "
)
ââ" #
{
ãã 	
_logger
ää 
.
ää 
LogError
ää 
(
ää 
HelperService
ää *
.
ää* +
LoggerMessage
ää+ 8
(
ää8 9
$str
ää9 I
,
ääI J
$str
ääK Z
,
ääZ [
	exception
ää\ e
)
ääe f
)
ääf g
;
ääg h
return
åå 
Problem
åå 
(
åå 
$str
åå @
)
åå@ A
;
ååA B
}
ææ 	
}
çç 
[
ëë 
HttpGet
ëë 
]
ëë 
[
ëë 
AllowAnonymous
ëë 
]
ëë 
public
ìì 

async
ìì 
Task
ìì 
<
ìì 
IActionResult
ìì #
>
ìì# $
GetDesignations
ìì% 4
(
ìì4 5
)
ìì5 6
{
íí 
try
îî 
{
ïï 	
return
ğğ 
await
ğğ 
Task
ğğ 
.
ğğ 

FromResult
ğğ (
(
ğğ( )
Ok
ğğ) +
(
ğğ+ ,
_UserService
ğğ, 8
.
ğğ8 9
GetDesignations
ğğ9 H
(
ğğH I
)
ğğI J
)
ğğJ K
)
ğğK L
;
ğğL M
}
óó 	
catch
ôô 
(
ôô 
	Exception
ôô 
	exception
ôô "
)
ôô" #
{
õõ 	
_logger
öö 
.
öö 
LogError
öö 
(
öö 
HelperService
öö *
.
öö* +
LoggerMessage
öö+ 8
(
öö8 9
$str
öö9 I
,
ööI J
$str
ööK _
,
öö_ `
	exception
ööa j
)
ööj k
)
öök l
;
ööl m
return
÷÷ 
Problem
÷÷ 
(
÷÷ 
$str
÷÷ >
)
÷÷> ?
;
÷÷? @
}
øø 	
}
ùù 
[
‡‡ 
HttpGet
‡‡ 
]
‡‡ 
[
‡‡ 
AllowAnonymous
‡‡ 
]
‡‡ 
public
ˆˆ 

async
ˆˆ 
Task
ˆˆ 
<
ˆˆ 
IActionResult
ˆˆ #
>
ˆˆ# $
GetDepartments
ˆˆ% 3
(
ˆˆ3 4
)
ˆˆ4 5
{
‰‰ 
try
ŠŠ 
{
‹‹ 	
return
ŒŒ 
await
ŒŒ 
Task
ŒŒ 
.
ŒŒ 

FromResult
ŒŒ (
(
ŒŒ( )
Ok
ŒŒ) +
(
ŒŒ+ ,
_UserService
ŒŒ, 8
.
ŒŒ8 9
GetDepartments
ŒŒ9 G
(
ŒŒG H
)
ŒŒH I
)
ŒŒI J
)
ŒŒJ K
;
ŒŒK L
}
 	
catch
 
(
 
	Exception
 
	exception
 "
)
" #
{
 	
_logger

 
.
 
LogError
 
(
 
HelperService
 (
.
( )
LoggerMessage
) 6
(
6 7
$str
7 G
,
G H
$str
I \
,
\ ]
	exception
^ g
)
g h
)
h i
;
i j
return
‘‘
 
Problem
‘‘ 
(
‘‘ 
$str
‘‘ >
)
‘‘> ?
;
‘‘? @
}
’’ 	
}
““ 
}—— ü
cC:\Users\manimaran.venkat\Documents\Backup\AspireOverflow\CustomExceptions\ItemNotFoundException.cs
	namespace 	
AspireOverflow
 
. 
CustomExceptions )
{ 
public 

class !
ItemNotFoundException &
:' (
	Exception) 2
{ 
public !
ItemNotFoundException $
($ %
)% &
:' (
base) -
(- .
$str. >
)> ?
{@ A
}B C
public		 !
ItemNotFoundException		 $
(		$ %
string		% +
message		, 3
)		3 4
:		5 6
base		7 ;
(		; <
message		< C
)		C D
{		E F
}		G H
public !
ItemNotFoundException $
($ %
string% +
message, 3
,3 4
	Exception5 >
innerException? M
)M N
:O P
baseQ U
(U V
messageV ]
,] ^
innerException_ m
)m n
{o p
}q r
} 
} ÏB
jC:\Users\manimaran.venkat\Documents\Backup\AspireOverflow\DataAccessLayer\Context\AspireOverflowContext.cs
	namespace 	
AspireOverflow
 
. 
DataAccessLayer (
{ 
public 

class !
AspireOverflowContext &
:' (
	DbContext) 2
{ 
public

 !
AspireOverflowContext

 $
(

$ %
DbContextOptions

% 5
<

5 6!
AspireOverflowContext

6 K
>

K L
options

M T
)

T U
:

V W
base

X \
(

\ ]
options

] d
)

d e
{ 	
} 	
public 
virtual 
DbSet 
< 
User !
>! "
Users# (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
=7 8
null9 =
!= >
;> ?
public 
virtual 
DbSet 
< 
UserRole %
>% &
	UserRoles' 0
{1 2
get3 6
;6 7
set8 ;
;; <
}= >
=? @
nullA E
!E F
;F G
public 
DbSet 
< 
Query 
> 
Queries #
{$ %
get& )
;) *
set+ .
;. /
}0 1
=2 3
null4 8
!8 9
;9 :
public 
DbSet 
< 
QueryComment !
>! "
QueryComments# 0
{1 2
get3 6
;6 7
set8 ;
;; <
}= >
=? @
nullA E
!E F
;F G
public 
virtual 
DbSet 
< 

Department '
>' (
Departments) 4
{5 6
get7 :
;: ;
set< ?
;? @
}A B
=C D
nullE I
!I J
;J K
public 
virtual 
DbSet 
< 
Designation (
>( )
Designations* 6
{7 8
get9 <
;< =
set> A
;A B
}C D
=E F
nullG K
!K L
;L M
public 
virtual 
DbSet 
< 
Gender #
># $
Genders% ,
{- .
get/ 2
;2 3
set4 7
;7 8
}9 :
=; <
null= A
!A B
;B C
public 
virtual 
DbSet 
< 
Spam 
> 
Spams  %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
=4 5
null6 :
!: ;
;; <
public 
virtual 
DbSet 
< 
PrivateArticle +
>+ ,
PrivateArticles- <
{= >
get? B
;B C
setD G
;G H
}I J
=K L
nullM Q
!Q R
;R S
public 
virtual 
DbSet 
< 
ArticleLike (
>( )
ArticleLikes* 6
{7 8
get9 <
;< =
set> A
;A B
}C D
=E F
nullG K
!K L
;L M
public 	
DbSet
 
< 
Article 
> 
Articles !
{" #
get$ '
;' (
set) ,
;, -
}. /
=0 1
null2 6
!6 7
;7 8
public 
DbSet 
< 
ArticleComment #
># $
ArticleComments% 4
{5 6
get7 :
;: ;
set< ?
;? @
}A B
=C D
nullE I
!I J
;J K
	protected   
override   
void   
OnModelCreating    /
(  / 0
ModelBuilder  0 <
modelBuilder  = I
)  I J
{!! 	
modelBuilder## 
.## 
Entity## 
<## 
Gender## "
>##" #
(### $
entity##$ *
=>##+ -
{$$ 
entity%%  
.%%  !
HasData%%! (
(%%( )
new%%) ,
Gender%%- 3
{%%4 5
GenderId%%6 >
=%%? @
$num%%A B
,%%B C
Name%%D H
=%%I J
$str%%K Q
}%%R S
)%%S T
;%%T U
entity&&  
.&&  !
HasData&&! (
(&&( )
new&&) ,
Gender&&- 3
{&&4 5
GenderId&&6 >
=&&? @
$num&&A B
,&&B C
Name&&D H
=&&I J
$str&&K S
}&&T U
)&&U V
;&&V W
}'' 
)'' 
;'' 
modelBuilder)) 
.)) 
Entity)) 
<))  
VerifyStatus))  ,
>)), -
())- .
entity)). 4
=>))5 7
{** 
entity++ 
.++ 
HasData++ 
(++ 
new++ "
VerifyStatus++# /
{++0 1
VerifyStatusID++2 @
=++A B
$num++C D
,++D E
Name++F J
=++K L
$str++M W
}++X Y
)++Y Z
;++Z [
entity,, 
.,, 
HasData,, 
(,, 
new,, "
VerifyStatus,,# /
{,,0 1
VerifyStatusID,,2 @
=,,A B
$num,,C D
,,,D E
Name,,F J
=,,K L
$str,,M W
},,X Y
),,Y Z
;,,Z [
entity-- 
.-- 
HasData-- 
(-- 
new-- "
VerifyStatus--# /
{--0 1
VerifyStatusID--2 @
=--A B
$num--C D
,--D E
Name--F J
=--K L
$str--M Z
}--[ \
)--\ ]
;--] ^
}.. 
).. 
;.. 
modelBuilder00 
.00 
Entity00 
<00  
UserRole00  (
>00( )
(00) *
entity00* 0
=>001 3
{11 
entity22 
.22 
HasData22 
(22 
new22 !
UserRole22" *
{22+ ,

UserRoleId22- 7
=228 9
$num22: ;
,22; <
RoleName22= E
=22F G
$str22H O
}22P Q
)22Q R
;22R S
entity33 
.33 
HasData33 
(33 
new33 !
UserRole33" *
{33+ ,

UserRoleId33- 7
=338 9
$num33: ;
,33; <
RoleName33= E
=33F G
$str33H N
}33O P
)33P Q
;33Q R
}55 
)55 
;55 
modelBuilder66 
.66 
Entity66  
<66  !
ArticleStatus66! .
>66. /
(66/ 0
entity660 6
=>667 9
{77 
entity88 
.88 
HasData88 
(88 
new88 "
ArticleStatus88# 0
{881 2
ArticleStatusID883 B
=88C D
$num88E F
,88F G
Status88H N
=88O P
$str88Q Z
}88[ \
)88\ ]
;88] ^
entity99 
.99 
HasData99 
(99 
new99 "
ArticleStatus99# 0
{991 2
ArticleStatusID993 B
=99C D
$num99E F
,99F G
Status99H N
=99O P
$str99Q a
}99b c
)99c d
;99d e
entity:: 
.:: 
HasData:: 
(:: 
new:: "
ArticleStatus::# 0
{::1 2
ArticleStatusID::3 B
=::C D
$num::E F
,::F G
Status::H N
=::O P
$str::Q _
}::` a
)::a b
;::b c
entity;; 
.;; 
HasData;; 
(;;  
new;;  #
ArticleStatus;;$ 1
{;;2 3
ArticleStatusID;;4 C
=;;D E
$num;;F G
,;;G H
Status;;I O
=;;P Q
$str;;R ]
};;^ _
);;_ `
;;;` a
}<< 
)<< 
;<< 
}>> 	
}?? 
}@@ ¾
qC:\Users\manimaran.venkat\Documents\Backup\AspireOverflow\DataAccessLayer\Factory\AspireOverflowContextFactory.cs
	namespace 	
AspireOverflow
 
. 
DataAccessLayer (
{ 
public 

class (
AspireOverflowContextFactory -
{

 
private !
AspireOverflowContext &
?& '"
_aspireOverflowContext( >
;> ?
public !
AspireOverflowContext %*
GetAspireOverflowContextObject& D
(D E
)E F
{ 	
var 
optionsBuilder 
=  
new! $#
DbContextOptionsBuilder% <
<< =!
AspireOverflowContext= R
>R S
(S T
)T U
;U V
try 
{ 
IConfigurationRoot "
configuration# 0
=1 2
new3 6 
ConfigurationBuilder7 K
(K L
)L M
. 
SetBasePath 
( 
	AppDomain &
.& '
CurrentDomain' 4
.4 5
BaseDirectory5 B
)B C
. 
AddJsonFile 
( 
$str /
)/ 0
. 
Build 
( 
) 
; 
var 
connectionString $
=% &
configuration' 4
.4 5
GetConnectionString5 H
(H I
$strI R
)R S
;S T
optionsBuilder 
. 
UseSqlServer +
(+ ,
connectionString, <
??) +
throw, 1
new2 5"
NullReferenceException6 L
(L M
$"- /
$str/ S
{S T
nameofT Z
(Z [
connectionString[ k
)k l
}l m
"m n
)n o
)o p
;p q"
_aspireOverflowContext (
=) *
new, /!
AspireOverflowContext0 E
(E F
optionsBuilderF T
.T U
OptionsU \
)\ ]
;] ^
return "
_aspireOverflowContext /
;/ 0
} 
catch 
( 
	Exception 
	exception &
)& '
{   
Console!! 
.!! 
	WriteLine!! !
(!!! "
	exception!!" +
.!!+ ,
Message!!, 3
)!!3 4
;!!4 5
throw"" 
;"" 
}## 
}(( 	
}** 
},, Â
jC:\Users\manimaran.venkat\Documents\Backup\AspireOverflow\DataAccessLayer\Interfaces\IArticleRepository.cs
	namespace 	
AspireOverflow
 
. 
DataAccessLayer (
.( )

Interfaces) 3
{ 
public 

	interface 
IArticleRepository '
:( )
IArticleComment* 9
,9 :
IArticleLike; G
{ 
bool 

AddArticle 
( 
Article 
article  '
)' (
;( )
public		
 
bool		 
AddPrivateArticle		 '
(		' (
Article		( /
article		0 7
,		7 8
List		9 =
<		= >
int		> A
>		A B
SharedUsersId		C P
)		P Q
;		Q R
bool

 
UpdateArticle

 
(

 
int

 
	ArticleId

 (
,

( )
int

* -
ArticleStatusID

. =
,

= >
int

> A
UpdatedByUserId

B Q
)

Q R
;

R S
bool 
UpdateArticle 
( 
Article "
article# *
)* +
;+ ,
Article 
GetArticleByID 
( 
int "
	ArticleId# ,
), -
;- .
bool 
DeleteArticle 
( 
int 
	ArticleId #
)# $
;$ %
IEnumerable 
< 
Article 
> 
GetArticles (
(( )
)) *
;* +
public
 
IEnumerable 
< 
PrivateArticle +
>+ ,
GetPrivateArticles- ?
(? @
)@ A
;A B
} 
public 

	interface 
IArticleComment $
{ 
IEnumerable 
< 
ArticleComment "
>" #
GetComments$ /
(/ 0
)0 1
;1 2
bool 

AddComment 
( 
ArticleComment &
comment' .
). /
;/ 0
} 
public 

	interface 
IArticleLike !
{ 
public 
bool 
AddLike 
( 
ArticleLike '
like( ,
), -
;- .
public 
IEnumerable 
< 
ArticleLike &
>& '
GetLikes( 0
(0 1
)1 2
;2 3
}   
}!! Ù
gC:\Users\manimaran.venkat\Documents\Backup\AspireOverflow\DataAccessLayer\Interfaces\IArticleService.cs
	namespace 	
AspireOverflow
 
. 
DataAccessLayer (
.( )

Interfaces) 3
{ 
public 

	interface 
IArticleService $
:% &"
IArticleCommentService' =
,= >
IArticleLikeService? R
{ 
bool		 
CreateArticle		 
(		 
Article		 "
article		# *
,		* +
List		, 0
<		0 1
int		1 4
>		4 5
?		5 6
SharedUsersId		7 D
=		E F
default		G N
!		N O
)		O P
;		P Q
bool

 $
DeleteArticleByArticleId

 %
(

% &
int

& )
	ArticleId

* 3
)

3 4
;

4 5
bool 
ChangeArticleStatus  
(  !
int! $
	ArticleID% .
,. /
int0 3
ArticleStatusID4 C
,C D
intE H
UserIdI O
)O P
;P Q
bool 
UpdateArticle 
( 
Article "
article# *
,* +
int, /
_currentUserId0 >
)> ?
;? @
Object 
GetArticleById 
( 
int !
	ArticleId" +
)+ ,
;, -
IEnumerable 
< 
Object 
> 
GetTrendingArticles /
(/ 0
)0 1
;1 2
IEnumerable 
< 
Object 
> 
GetLatestArticles -
(- .
). /
;/ 0
IEnumerable 
< 
Object 
> 
GetListOfArticles -
(- .
). /
;/ 0
IEnumerable 
< 
Object 
> 
GetPrivateArticles .
(. /
int/ 2
UserId3 9
)9 :
;: ;
IEnumerable 
< 
Object 
> 
GetArticlesByTitle .
(. /
string/ 5
Title6 ;
); <
;< =
IEnumerable 
< 
Object 
> 
GetArticlesByAuthor /
(/ 0
string0 6

AuthorName7 A
)A B
;B C
IEnumerable 
< 
Object 
> 
GetArticlesByUserId /
(/ 0
int0 3
UserId4 :
): ;
;; <
IEnumerable 
< 
Article 
> 
GetAll #
(# $
)$ %
;% &
IEnumerable 
< 
Object 
> #
GetArticlesByReviewerId 3
(3 4
int4 7

ReviewerId8 B
)B C
;C D
IEnumerable 
< 
object 
> (
GetArticlesByArticleStatusId 8
(8 9
int9 <
ArticleStatusID= L
)L M
;M N
} 
public   

	interface   "
IArticleCommentService   +
{!! 
bool"" 
CreateComment"" 
("" 
ArticleComment"" )
comment""* 1
)""1 2
;""2 3
IEnumerable## 
<## 
object## 
>## 
GetComments## '
(##' (
int##( +
	ArticleID##, 5
)##5 6
;##6 7
}%% 
public'' 

	interface'' 
IArticleLikeService'' (
{(( 
bool)) 
AddLikeToArticle)) 
()) 
ArticleLike)) )
Like))* .
))). /
;))/ 0
int** 
GetLikesCount** 
(** 
int** 
	ArticleID** '
)**' (
;**( )
},, 
}-- ô
eC:\Users\manimaran.venkat\Documents\Backup\AspireOverflow\DataAccessLayer\Interfaces\IEmailService.cs
	namespace 	
AspireOverflow
 
. 
DataAccessLayer (
.( )

Interfaces) 3
{3 4
public 

	interface 
IEmailService "
{ 
Task 
SendEmailAsync	 
( 
MailRequest #
mailRequest$ /
)/ 0
;0 1
} 
} Â
hC:\Users\manimaran.venkat\Documents\Backup\AspireOverflow\DataAccessLayer\Interfaces\IQueryRepository.cs
	namespace 	
AspireOverflow
 
. 
DataAccessLayer (
.( )

Interfaces) 3
{ 
public 

	interface 
IQueryRepository %
:& '#
IQueryCommentRepository( ?
,? @!
ISpamReportRepository@ U
{ 
bool	 
AddQuery 
( 
Query 
query "
)" #
;# $
bool	 
UpdateQuery 
( 
int 
QueryId %
,% &
bool' +
IsSolved, 4
=5 6
false7 <
,< =
bool> B
IsDeleteC K
=L M
falseN S
)S T
;T U
Query	 
GetQueryByID 
( 
int 
QueryId  '
)' (
;( )
IEnumerable	 
< 
Query 
> 

GetQueries &
(& '
)' (
;( )
} 
public 

	interface #
IQueryCommentRepository ,
{ 
IEnumerable	 
< 
QueryComment !
>! "
GetComments# .
(. /
)/ 0
;0 1
bool	 

AddComment 
( 
QueryComment %
comment& -
)- .
;. /
} 
public 
	interface !
ISpamReportRepository +
{ 
IEnumerable	 
< 
Spam 
> 
GetSpams #
(# $
)$ %
;% &
bool  	 
AddSpam   
(   
Spam   
spam   
)    
;    !
bool""	 

UpdateSpam"" 
("" 
int"" 
SpamId"" #
,""# $
int""% (
VerifyStatusID"") 7
)""7 8
;""8 9
}$$ 
}%% Ê
eC:\Users\manimaran.venkat\Documents\Backup\AspireOverflow\DataAccessLayer\Interfaces\IQueryService.cs
	namespace 	
AspireOverflow
 
. 
DataAccessLayer (
.( )

Interfaces) 3
{ 
public 

	interface 
IQueryService "
:# $ 
IQueryCommentService% 9
,9 :
IQuerySpamService; L
{ 
bool 
CreateQuery 
( 
Query 
query $
)$ %
;% &
bool		  
RemoveQueryByQueryId		 !
(		! "
int		" %
QueryId		& -
)		- .
;		. /
bool

 
MarkQueryAsSolved

 
(

 
int

 "
QueryId

# *
)

* +
;

+ ,
Object 
GetQuery 
( 
int 
QueryID #
)# $
;$ %
IEnumerable 
< 
Object 
> 
GetListOfQueries ,
(, -
)- .
;. /
IEnumerable 
< 
Object 
> 
GetTrendingQueries .
(. /
)/ 0
;0 1
IEnumerable 
< 
Object 
> 
GetLatestQueries ,
(, -
)- .
;. /
IEnumerable 
< 
Object 
> 
GetQueriesByUserId .
(. /
int/ 2
UserId3 9
)9 :
;: ;
IEnumerable 
< 
Object 
> 
GetQueriesByTitle -
(- .
String. 4
Title5 :
): ;
;; <
IEnumerable 
< 
Object 
> 

GetQueries &
(& '
bool' +
IsSolved, 4
)4 5
;5 6
} 
public 

	interface  
IQueryCommentService )
{ 
bool 
CreateComment 
( 
QueryComment '
comment( /
)/ 0
;0 1
IEnumerable 
< 
Object 
> 
GetComments '
(' (
int( +
QueryId, 3
)3 4
;4 5
} 
public!! 

	interface!! 
IQuerySpamService!! &
{"" 
bool## 
AddSpam## 
(## 
Spam## 
spam## 
)## 
;##  
IEnumerable$$ 
<$$ 
object$$ 
>$$ 
GetSpams$$ $
($$$ %
int$$% (
VerifyStatusID$$) 7
)$$7 8
;$$8 9
bool%% 
ChangeSpamStatus%% 
(%% 
int%% !
QueryId%%" )
,%%) *
int%%+ .
VerifyStatusID%%/ =
)%%= >
;%%> ?
}'' 
})) ‡
eC:\Users\manimaran.venkat\Documents\Backup\AspireOverflow\DataAccessLayer\Interfaces\ITokenService.cs
	namespace 	
AspireOverflow
 
. 
DataAccessLayer (
.( )

Interfaces) 3
{3 4
public 
	interface 
ITokenService 
{ 
public 
object 
GenerateToken "
(" #
Login# (
Credentials) 4
)4 5
;5 6
} 
}

 è
gC:\Users\manimaran.venkat\Documents\Backup\AspireOverflow\DataAccessLayer\Interfaces\IUserRepository.cs
	namespace 	
AspireOverflow
 
. 
DataAccessLayer (
.( )

Interfaces) 3
{ 
public 

	interface 
IUserRepository $
{ 
public 
bool 

CreateUser 
( 
User #
User$ (
)( )
;) *
public 
User 
GetUserByID 
(  
int  #
UserId$ *
)* +
;+ ,
public 
IEnumerable 
< 
User 
>  
GetUsers! )
() *
)* +
;+ ,
public 
bool $
UpdateUserByVerifyStatus ,
(, -
int- 0
UserId1 7
,7 8
int9 <
VerifyStatusID= K
)K L
;L M
public 
bool  
UpdateUserByReviewer (
(( )
int) ,
UserId- 3
,3 4
bool5 9

IsReviewer: D
)D E
;E F
public 
bool 

RemoveUser 
( 
int "
UserId# )
)) *
;* +
public 
IEnumerable 
< 

Department %
>% &
GetDepartments' 5
(5 6
)6 7
;7 8
public 
IEnumerable 
< 
Gender !
>! "

GetGenders# -
(- .
). /
;/ 0
public	 
IEnumerable 
< 
Designation '
>' (
GetDesignations) 8
(8 9
)9 :
;: ;
} 
} Ç
dC:\Users\manimaran.venkat\Documents\Backup\AspireOverflow\DataAccessLayer\Interfaces\IUserService.cs
	namespace 	
AspireOverflow
 
. 
DataAccessLayer (
.( )

Interfaces) 3
{ 
public 

	interface 
IUserService !
:" #
IDesignations$ 1
,1 2
IGenders3 ;
{ 
public 
bool 

CreateUser 
( 
User #
user$ (
)( )
;) *
public 
bool 

RemoveUser 
( 
int "
UserId# )
)) *
;* +
public		 
bool		 "
UpdateUserByIsReviewer		 *
(		* +
int		+ .
UserId		/ 5
,		5 6
bool		7 ;

IsReviewer		< F
)		F G
;		G H
public

 
User

 
GetUser

 
(

 
string

 "
Email

# (
,

( )
string

* 0
Password

1 9
)

9 :
;

: ;
public 
IEnumerable 
< 
User 
>  
GetUsers! )
() *
)* +
;+ ,
public 
IEnumerable 
< 
Object !
>! ""
GetUsersByVerifyStatus# 9
(9 :
int: =
VerifyStatusID> L
)L M
;M N
public 
object 
GetUserByID !
(! "
int" %
UserID& ,
), -
;- .
public 
IEnumerable 
< 
Object !
>! " 
GetUsersByUserRoleID# 7
(7 8
int8 ;

UserRoleID< F
)F G
;G H
public 
bool (
ChangeUserVerificationStatus 0
(0 1
int1 4
UserID5 ;
,; <
int= @
VerifyStatusIDA O
)O P
;P Q
public 
IEnumerable 
< 
Object !
>! " 
GetUsersByIsReviewer# 7
(7 8
bool8 <

IsReviewer= G
)G H
;H I
} 
public 

	interface 
IDesignations "
{ 
public 
IEnumerable 
< 
Object !
>! "
GetDesignations# 2
(2 3
)3 4
;4 5
public 
IEnumerable 
< 
Object !
>! "
GetDepartments# 1
(1 2
)2 3
;3 4
} 
public 

	interface 
IGenders 
{ 
public 
IEnumerable 
< 
Object !
>! "

GetGenders# -
(- .
). /
;/ 0
} 
}  
iC:\Users\manimaran.venkat\Documents\Backup\AspireOverflow\DataAccessLayer\Repository\ArticleRepository.cs
	namespace 	
AspireOverflow
 
. 
DataAccessLayer (
{		 
public

 

class

 
ArticleRepository

 "
:

# $
IArticleRepository

% 7
{ 
private 
readonly !
AspireOverflowContext .
_context/ 7
;7 8
private 
readonly 
ILogger  
<  !
ArticleRepository! 2
>2 3
_logger4 ;
;; <
public 
ArticleRepository  
(  !!
AspireOverflowContext! 6
context7 >
,> ?
ILogger@ G
<G H
ArticleRepositoryH Y
>Y Z
logger[ a
)a b
{ 	
_context 
= 
context 
; 
_logger 
= 
logger 
; 
} 	
public 
bool 

AddArticle 
( 
Article &
article' .
). /
{ 	

Validation 
. 
ValidateArticle &
(& '
article' .
). /
;/ 0
try 
{ 
_context 
. 
Articles !
.! "
Add" %
(% &
article& -
)- .
;. /
_context 
. 
SaveChanges $
($ %
)% &
;& '
return 
true 
; 
}   
catch!! 
(!! 
	Exception!! 
	exception!! &
)!!& '
{"" 
_logger## 
.## 
LogError##  
(##  !
HelperService##! .
.##. /
LoggerMessage##/ <
(##< =
$str##= P
,##P Q
$str##R o
,##o p
	exception##q z
,##z {
article	##| ƒ
)
##ƒ „
)
##„ …
;
##… †
return%% 
false%% 
;%% 
}(( 
})) 	
public++ 
bool++ 
AddPrivateArticle++ %
(++% &
Article++& -
article++. 5
,++5 6
List++7 ;
<++; <
int++< ?
>++? @
SharedUsersId++A N
)++N O
{,, 	

Validation-- 
.-- 
ValidateArticle-- &
(--& '
article--' .
)--. /
;--/ 0
try.. 
{// 
var00 
entry00 
=00 
_context00 $
.00$ %
Articles00% -
.00- .
Add00. 1
(001 2
article002 9
)009 :
;00: ;
_context11 
.11 
SaveChanges11 $
(11$ %
)11% &
;11& '
if22 
(22 
article22 
.22 
	IsPrivate22 %
&&22& (
SharedUsersId22) 6
!=227 9
null22: >
&&22? A
SharedUsersId22B O
.22O P
Count22P U
>22V W
$num22X Y
)22Y Z
{33 
SharedUsersId44 !
.44! "
ForEach44" )
(44) *
item44* .
=>44/ 1
_context442 :
.44: ;
PrivateArticles44; J
.44J K
AddAsync44K S
(44S T
new44T W
PrivateArticle44X f
(44f g
entry44g l
.44l m
Entity44m s
.44s t
ArtileId44t |
,44| }
item	44~ ‚
)
44‚ ƒ
)
44ƒ „
)
44„ …
;
44… †
_context55 
.55 
SaveChanges55 (
(55( )
)55) *
;55* +
}66 
return88 
true88 
;88 
}99 
catch:: 
(:: 
	Exception:: 
	exception:: &
)::& '
{;; 
_logger<< 
.<< 
LogError<<  
(<<  !
HelperService<<! .
.<<. /
LoggerMessage<</ <
(<<< =
$str<<= P
,<<P Q
$str	<<R 
,
<< 
	exception
<<‘ š
,
<<š ›
article
<<œ £
)
<<£ ¤
)
<<¤ ¥
;
<<¥ ¦
return>> 
false>> 
;>> 
}@@ 
}AA 	
publicCC 
boolCC 
UpdateArticleCC !
(CC! "
ArticleCC" )
articleCC* 1
)CC1 2
{DD 	

ValidationEE 
.EE 
ValidateArticleEE &
(EE& '
articleEE' .
)EE. /
;EE/ 0
tryFF 
{GG 
_contextHH 
.HH 
ArticlesHH !
.HH! "
UpdateHH" (
(HH( )
articleHH) 0
)HH0 1
;HH1 2
_contextII 
.II 
SaveChangesII $
(II$ %
)II% &
;II& '
returnJJ 
trueJJ 
;JJ 
}KK 
catchLL 
(LL 
	ExceptionLL 
	exceptionLL &
)LL& '
{MM 
_loggerNN 
.NN 
LogErrorNN  
(NN  !
HelperServiceNN! .
.NN. /
LoggerMessageNN/ <
(NN< =
$strNN= P
,NNP Q
$strNNR r
,NNr s
	exceptionNNt }
,NN} ~
article	NN †
)
NN† ‡
)
NN‡ ˆ
;
NNˆ ‰
returnPP 
falsePP 
;PP 
}SS 
}TT 	
publicVV 
boolVV 
UpdateArticleVV !
(VV! "
intVV" %
	ArticleIdVV& /
,VV/ 0
intVV1 4
ArticleStatusIDVV5 D
,VVD E
intVVF I
UpdatedByUserIdVVJ Y
)VVY Z
{WW 	
ifYY 
(YY 
	ArticleIdYY 
<=YY 
$numYY 
)YY 
throwYY  %
newYY& )
ArgumentExceptionYY* ;
(YY; <
$"YY< >
$strYY> p
{YYp q
	ArticleIdYYq z
}YYz {
"YY{ |
)YY| }
;YY} ~
ifZZ 
(ZZ 
ArticleStatusIDZZ 
<=ZZ  "
$numZZ# $
||ZZ% '
ArticleStatusIDZZ( 7
>ZZ8 9
$numZZ: ;
)ZZ; <
throwZZ= B
newZZC F
ArgumentExceptionZZG X
(ZZX Y
$"ZZY [
$str	ZZ[ •
{
ZZ• –
ArticleStatusID
ZZ– ¥
}
ZZ¥ ¦
"
ZZ¦ §
)
ZZ§ ¨
;
ZZ¨ ©
try[[ 
{\\ 
var]] 
ExistingArticle]] #
=]]$ %
GetArticleByID]]& 4
(]]4 5
	ArticleId]]5 >
)]]> ?
;]]? @
ExistingArticle^^ 
.^^  
ArticleStatusID^^  /
=^^0 1
ArticleStatusID^^2 A
;^^A B
ExistingArticle__ 
.__  
	UpdatedOn__  )
=__* +
DateTime__, 4
.__4 5
Now__5 8
;__8 9
ExistingArticle`` 
.``  
	UpdatedBy``  )
=``* +
UpdatedByUserId``, ;
;``; <
_contextdd 
.dd 
Articlesdd !
.dd! "
Updatedd" (
(dd( )
ExistingArticledd) 8
)dd8 9
;dd9 :
_contextee 
.ee 
SaveChangesee $
(ee$ %
)ee% &
;ee& '
returnff 
trueff 
;ff 
}gg 
catchhh 
(hh 
	Exceptionhh 
	exceptionhh &
)hh& '
{ii 
_loggerjj 
.jj 
LogErrorjj  
(jj  !
HelperServicejj! .
.jj. /
LoggerMessagejj/ <
(jj< =
$strjj= P
,jjP Q
$str	jjR š
,
jjš ›
	exception
jjœ ¥
)
jj¥ ¦
)
jj¦ §
;
jj§ ¨
returnkk 
falsekk 
;kk 
}mm 
}nn 	
publicpp 
boolpp 
DeleteArticlepp !
(pp! "
intpp" %
	ArticleIdpp& /
)pp/ 0
{qq 	
ifrr 
(rr 
	ArticleIdrr 
<=rr 
$numrr 
)rr 
throwrr  %
newrr& )
ArgumentExceptionrr* ;
(rr; <
$"rr< >
$strrr> p
{rrp q
	ArticleIdrrq z
}rrz {
"rr{ |
)rr| }
;rr} ~
tryss 
{tt 
varuu  
ExistingDraftArticleuu (
=uu) *
GetArticlesuu+ 6
(uu6 7
)uu7 8
.uu8 9
ToListuu9 ?
(uu? @
)uu@ A
.uuA B
FinduuB F
(uuF G
itemuuG K
=>uuL N
itemuuO S
.uuS T
ArtileIduuT \
==uu] _
	ArticleIduu` i
&&uuj l
itemuum q
.uuq r
ArticleStatusID	uur 
==
uu‚ „
$num
uu… †
)
uu† ‡
;
uu‡ ˆ
ifvv 
(vv  
ExistingDraftArticlevv (
==vv) +
nullvv, 0
)vv0 1
throwvv2 7
newvv8 ;!
ItemNotFoundExceptionvv< Q
(vvQ R
$"vvR T
$strvvT z
{vvz {
	ArticleId	vv{ „
}
vv„ …
"
vv… †
)
vv† ‡
;
vv‡ ˆ
_contextxx 
.xx 
Articlesxx !
.xx! "
Removexx" (
(xx( ) 
ExistingDraftArticlexx) =
)xx= >
;xx> ?
_contextyy 
.yy 
SaveChangesyy $
(yy$ %
)yy% &
;yy& '
returnzz 
truezz 
;zz 
}|| 
catch}} 
(}} 
	Exception}} 
	exception}} &
)}}& '
{~~ 
_logger 
. 
LogError  
(  !
HelperService! .
.. /
LoggerMessage/ <
(< =
$str= P
,P Q
$strR p
,p q
	exceptionr {
,{ |
	ArticleId	} †
)
† ‡
)
‡ ˆ
;
ˆ ‰
return
€€ 
false
€€ 
;
€€ 
}
‚‚ 
}
ƒƒ 	
public
„„ 
Article
„„ 
GetArticleByID
„„ %
(
„„% &
int
„„& )
	ArticleId
„„* 3
)
„„3 4
{
…… 	
if
†† 
(
†† 
	ArticleId
†† 
<=
†† 
$num
†† 
)
†† 
throw
††  %
new
††& )
ArgumentException
††* ;
(
††; <
$"
††< >
$str
††> p
{
††p q
	ArticleId
††q z
}
††z {
"
††{ |
)
††| }
;
††} ~
Article
‡‡ 
?
‡‡ 
ExistingArticle
‡‡ $
;
‡‡$ %
try
ˆˆ 
{
‰‰ 
ExistingArticle
ŠŠ 
=
ŠŠ  !
GetArticles
ŠŠ" -
(
ŠŠ- .
)
ŠŠ. /
.
ŠŠ/ 0
ToList
ŠŠ0 6
(
ŠŠ6 7
)
ŠŠ7 8
.
ŠŠ8 9
Find
ŠŠ9 =
(
ŠŠ= >
item
ŠŠ> B
=>
ŠŠC E
item
ŠŠF J
.
ŠŠJ K
ArtileId
ŠŠK S
==
ŠŠT V
	ArticleId
ŠŠW `
)
ŠŠ` a
;
ŠŠa b
return
‹‹ 
ExistingArticle
‹‹ &
!=
‹‹' )
null
‹‹* .
?
‹‹/ 0
ExistingArticle
‹‹1 @
:
‹‹A B
throw
‹‹C H
new
‹‹I L#
ItemNotFoundException
‹‹M b
(
‹‹b c
$"
‹‹c e
$str‹‹e —
{‹‹— ˜
	ArticleId‹‹˜ ¡
}‹‹¡ ¢
"‹‹¢ £
)‹‹£ ¤
;‹‹¤ ¥
}
ŒŒ 
catch
 
(
 
	Exception
 
	exception
 &
)
& '
{
 
_logger
 
.
 
LogError
  
(
  !
HelperService
! .
.
. /
LoggerMessage
/ <
(
< =
$str
= P
,
P Q
$str
R q
,
q r
	exception
s |
,
| }
	ArticleId~ ‡
)‡ ˆ
)ˆ ‰
;‰ Š
throw
 
;
 
}
‘‘ 
}
’’ 	
public
”” 
IEnumerable
”” 
<
”” 
Article
”” "
>
””" #
GetArticles
””$ /
(
””/ 0
)
””0 1
{
•• 	
try
–– 
{
—— 
var
˜˜ 
ListOfArticle
˜˜ !
=
˜˜" #
_context
˜˜$ ,
.
˜˜, -
Articles
˜˜- 5
.
˜˜5 6
Include
˜˜6 =
(
˜˜= >
e
˜˜> ?
=>
˜˜? A
e
˜˜A B
.
˜˜B C
ArticleStatus
˜˜C P
)
˜˜P Q
.
˜˜Q R
Include
˜˜R Y
(
˜˜Y Z
e
˜˜Z [
=>
˜˜[ ]
e
˜˜] ^
.
˜˜^ _
User
˜˜_ c
)
˜˜c d
.
˜˜d e
ToList
˜˜e k
(
˜˜k l
)
˜˜l m
;
˜˜m n
return
™™ 
ListOfArticle
™™ $
;
™™$ %
}
›› 
catch
œœ 
(
œœ 
	Exception
œœ 
	exception
œœ &
)
œœ& '
{
 
_logger
 
.
 
LogError
  
(
  !
HelperService
! .
.
. /
LoggerMessage
/ <
(
< =
$str
= P
,
P Q
$str
R a
,
a b
	exception
c l
)
l m
)
m n
;
n o
throw
   
;
   
}
¡¡ 
}
¤¤ 	
public
¦¦ 
IEnumerable
¦¦ 
<
¦¦ 
PrivateArticle
¦¦ )
>
¦¦) * 
GetPrivateArticles
¦¦+ =
(
¦¦= >
)
¦¦> ?
{
§§ 	
try
¨¨ 
{
©© 
var
ªª #
ListofPrivateArticles
ªª )
=
ªª* +
_context
ªª, 4
.
ªª4 5
PrivateArticles
ªª5 D
.
ªªD E
ToList
ªªE K
(
ªªK L
)
ªªL M
;
ªªM N
return
«« #
ListofPrivateArticles
«« ,
;
««, -
}
­­ 
catch
®® 
(
®® 
	Exception
®® 
	exception
®® &
)
®®& '
{
¯¯ 
_logger
°° 
.
°° 
LogError
°°  
(
°°  !
HelperService
°°! .
.
°°. /
LoggerMessage
°°/ <
(
°°< =
$str
°°= P
,
°°P Q
$str
°°R h
,
°°h i
	exception
°°j s
)
°°s t
)
°°t u
;
°°u v
throw
²² 
;
²² 
}
³³ 
}
¶¶ 	
public
¸¸ 
bool
¸¸ 

AddComment
¸¸ 
(
¸¸ 
ArticleComment
¸¸ -
comment
¸¸. 5
)
¸¸5 6
{
¹¹ 	

Validation
ºº 
.
ºº $
ValidateArticleComment
ºº -
(
ºº- .
comment
ºº. 5
)
ºº5 6
;
ºº6 7
try
»» 
{
¼¼ 
_context
½½ 
.
½½ 
ArticleComments
½½ (
.
½½( )
Add
½½) ,
(
½½, -
comment
½½- 4
)
½½4 5
;
½½5 6
_context
¾¾ 
.
¾¾ 
SaveChanges
¾¾ $
(
¾¾$ %
)
¾¾% &
;
¾¾& '
return
ÀÀ 
true
ÀÀ 
;
ÀÀ 
}
ÁÁ 
catch
ÂÂ 
(
ÂÂ 
	Exception
ÂÂ 
	exception
ÂÂ &
)
ÂÂ& '
{
ÃÃ 
_logger
ÄÄ 
.
ÄÄ 
LogError
ÄÄ  
(
ÄÄ  !
HelperService
ÄÄ! .
.
ÄÄ. /
LoggerMessage
ÄÄ/ <
(
ÄÄ< =
$str
ÄÄ= P
,
ÄÄP Q
$str
ÄÄR v
,
ÄÄv w
	exceptionÄÄx 
,ÄÄ ‚
commentÄÄƒ Š
)ÄÄŠ ‹
)ÄÄ‹ Œ
;ÄÄŒ 
return
ÆÆ 
false
ÆÆ 
;
ÆÆ 
}
ÉÉ 
}
ÊÊ 	
public
ÎÎ 
IEnumerable
ÎÎ 
<
ÎÎ 
ArticleComment
ÎÎ )
>
ÎÎ) *
GetComments
ÎÎ+ 6
(
ÎÎ6 7
)
ÎÎ7 8
{
ÏÏ 	
try
ÑÑ 
{
ÒÒ 
var
ÓÓ 
ListOfComments
ÓÓ "
=
ÓÓ# $
_context
ÓÓ% -
.
ÓÓ- .
ArticleComments
ÓÓ. =
.
ÓÓ= >
ToList
ÓÓ> D
(
ÓÓD E
)
ÓÓE F
;
ÓÓF G
return
ÔÔ 
ListOfComments
ÔÔ %
;
ÔÔ% &
}
ÖÖ 
catch
×× 
(
×× 
	Exception
×× 
	exception
×× &
)
××& '
{
ØØ 
_logger
ÙÙ 
.
ÙÙ 
LogError
ÙÙ  
(
ÙÙ  !
HelperService
ÙÙ! .
.
ÙÙ. /
LoggerMessage
ÙÙ/ <
(
ÙÙ< =
$str
ÙÙ= P
,
ÙÙP Q
$str
ÙÙR a
,
ÙÙa b
	exception
ÙÙc l
)
ÙÙl m
)
ÙÙm n
;
ÙÙn o
throw
ÛÛ 
;
ÛÛ 
}
ÜÜ 
}
İİ 	
public
àà 
bool
àà 
AddLike
àà 
(
àà 
ArticleLike
àà '
like
àà( ,
)
àà, -
{
áá 	
if
ââ 
(
ââ 
like
ââ 
.
ââ 
	ArticleId
ââ 
<=
ââ !
$num
ââ" #
)
ââ# $
throw
ââ% *
new
ââ+ .
ArgumentException
ââ/ @
(
ââ@ A
$"
ââA C
$str
ââC u
{
ââu v
like
ââv z
.
ââz {
	ArticleIdââ{ „
}ââ„ …
"ââ… †
)ââ† ‡
;ââ‡ ˆ
if
ãã 
(
ãã 
like
ãã 
.
ãã 
UserId
ãã 
<=
ãã 
$num
ãã  
)
ãã  !
throw
ãã" '
new
ãã( +
ArgumentException
ãã, =
(
ãã= >
$"
ãã> @
$str
ãã@ l
{
ããl m
like
ããm q
.
ããq r
UserId
ããr x
}
ããx y
"
ããy z
)
ããz {
;
ãã{ |
try
ää 
{
åå 
_context
ææ 
.
ææ 
ArticleLikes
ææ %
.
ææ% &
Add
ææ& )
(
ææ) *
like
ææ* .
)
ææ. /
;
ææ/ 0
_context
çç 
.
çç 
SaveChanges
çç $
(
çç$ %
)
çç% &
;
çç& '
return
èè 
true
èè 
;
èè 
}
éé 
catch
êê 
(
êê 
	Exception
êê 
	exception
êê &
)
êê& '
{
ëë 
_logger
ìì 
.
ìì 
LogError
ìì  
(
ìì  !
HelperService
ìì! .
.
ìì. /
LoggerMessage
ìì/ <
(
ìì< =
$str
ìì= P
,
ììP Q
$str
ììR m
,
ììm n
	exception
ììo x
,
ììx y
like
ììz ~
)
ìì~ 
)ìì €
;ìì€ 
return
îî 
false
îî 
;
îî 
}
ğğ 
}
ññ 	
public
ôô 
IEnumerable
ôô 
<
ôô 
ArticleLike
ôô &
>
ôô& '
GetLikes
ôô( 0
(
ôô0 1
)
ôô1 2
{
õõ 	
try
÷÷ 
{
øø 
var
ùù  
ListOfArticleLikes
ùù &
=
ùù' (
_context
ùù) 1
.
ùù1 2
ArticleLikes
ùù2 >
.
ùù> ?
Include
ùù? F
(
ùùF G
e
ùùG H
=>
ùùH J
e
ùùJ K
.
ùùK L
Article
ùùL S
)
ùùS T
.
ùùT U
ToList
ùùU [
(
ùù[ \
)
ùù\ ]
;
ùù] ^
return
úú  
ListOfArticleLikes
úú )
;
úú) *
}
üü 
catch
ıı 
(
ıı 
	Exception
ıı 
	exception
ıı &
)
ıı& '
{
şş 
_logger
ÿÿ 
.
ÿÿ 
LogError
ÿÿ  
(
ÿÿ  !
HelperService
ÿÿ! .
.
ÿÿ. /
LoggerMessage
ÿÿ/ <
(
ÿÿ< =
$str
ÿÿ= P
,
ÿÿP Q
$str
ÿÿR ^
,
ÿÿ^ _
	exception
ÿÿ` i
)
ÿÿi j
)
ÿÿj k
;
ÿÿk l
throw
 
;
 
}
‚‚ 
}
ƒƒ 	
}
„„ 
}…… Æ‚
gC:\Users\manimaran.venkat\Documents\Backup\AspireOverflow\DataAccessLayer\Repository\QueryRepository.cs
	namespace

 	
AspireOverflow


 
.

 
DataAccessLayer

 (
{ 
public 

class 
QueryRepository  
:! "
IQueryRepository# 3
{ 
private 
readonly !
AspireOverflowContext .
_context/ 7
;7 8
private 
readonly 
ILogger  
<  !
QueryRepository! 0
>0 1
_logger2 9
;9 :
public 
QueryRepository 
( !
AspireOverflowContext 4
context5 <
,< =
ILogger> E
<E F
QueryRepositoryF U
>U V
loggerW ]
)] ^
{ 	
_context 
= 
context 
; 
_logger 
= 
logger 
; 
} 	
public 
bool 
AddQuery 
( 
Query "
query# (
)( )
{ 	

Validation 
. 
ValidateQuery $
($ %
query% *
)* +
;+ ,
try 
{ 
_context!! 
.!! 
Queries!!  
.!!  !
Add!!! $
(!!$ %
query!!% *
)!!* +
;!!+ ,
_context"" 
."" 
SaveChanges"" $
(""$ %
)""% &
;""& '
return$$ 
true$$ 
;$$ 
}%% 
catch&& 
(&& 
	Exception&& 
	exception&& &
)&&& '
{'' 
_logger(( 
.(( 
LogError((  
(((  !
HelperService((! .
.((. /
LoggerMessage((/ <
(((< =
$str((= N
,((N O
$str((P g
,((g h
	exception((i r
,((r s
query((t y
)((y z
)((z {
;(({ |
return** 
false** 
;** 
}-- 
}// 	
public33 
bool33 

AddComment33 
(33 
QueryComment33 +
comment33, 3
)333 4
{44 	

Validation55 
.55 
ValidateComment55 &
(55& '
comment55' .
)55. /
;55/ 0
try66 
{77 
_context88 
.88 
QueryComments88 &
.88& '
Add88' *
(88* +
comment88+ 2
)882 3
;883 4
_context99 
.99 
SaveChanges99 $
(99$ %
)99% &
;99& '
return:: 
true:: 
;:: 
}<< 
catch== 
(== 
	Exception== 
	exception== &
)==& '
{>> 
_logger?? 
.?? 
LogError??  
(??  !
HelperService??! .
.??. /
LoggerMessage??/ <
(??< =
$str??= N
,??N O
$str??P r
,??r s
	exception??t }
,??} ~
comment	?? †
)
??† ‡
)
??‡ ˆ
;
??ˆ ‰
return@@ 
false@@ 
;@@ 
}BB 
}CC 	
publicGG 
boolGG 
UpdateQueryGG 
(GG  
intGG  #
QueryIdGG$ +
,GG+ ,
boolGG- 1
IsSolvedGG2 :
=GG: ;
falseGG; @
,GG@ A
boolGGB F
IsDeleteGGG O
=GGO P
falseGGP U
)GGU V
{HH 	
ifII 
(II 
QueryIdII 
<=II 
$numII 
)II 
throwII #
newII$ '
ArgumentExceptionII( 9
(II9 :
$"II: <
$strII< j
{IIj k
QueryIdIIk r
}IIr s
"IIs t
)IIt u
;IIu v
ifJJ 
(JJ 
IsSolvedJJ 
==JJ 
IsDeleteJJ $
)JJ$ %
throwJJ& +
newJJ, /
ArgumentExceptionJJ0 A
(JJA B
$strJJB x
)JJx y
;JJy z
tryKK 
{LL 
varMM 
ExistingQueryMM !
=MM" #
GetQueryByIDMM$ 0
(MM0 1
QueryIdMM1 8
)MM8 9
;MM9 :
ifNN 
(NN 
IsSolvedNN 
)NN 
ExistingQueryNN +
.NN+ ,
IsSolvedNN, 4
=NN5 6
IsSolvedNN7 ?
;NN? @
ifOO 
(OO 
IsDeleteOO 
)OO 
ExistingQueryOO +
.OO+ ,
IsActiveOO, 4
=OO5 6
falseOO7 <
;OO< =
_contextPP 
.PP 
QueriesPP  
.PP  !
UpdatePP! '
(PP' (
ExistingQueryPP( 5
)PP5 6
;PP6 7
_contextQQ 
.QQ 
SaveChangesQQ $
(QQ$ %
)QQ% &
;QQ& '
returnRR 
trueRR 
;RR 
}SS 
catchTT 
(TT 
	ExceptionTT 
	exceptionTT &
)TT& '
{UU 
_loggerVV 
.VV 
LogErrorVV  
(VV  !
HelperServiceVV! .
.VV. /
LoggerMessageVV/ <
(VV< =
$strVV= N
,VVN O
$str	VVP ˆ
,
VVˆ ‰
	exception
VVŠ “
,
VV“ ”
IsSolved
VV• 
?
VV Ÿ
IsSolved
VV  ¨
:
VV© ª
IsDelete
VV« ³
)
VV³ ´
)
VV´ µ
;
VVµ ¶
returnWW 
falseWW 
;WW 
}YY 
}ZZ 	
public]] 
Query]] 
GetQueryByID]] !
(]]! "
int]]" %
QueryId]]& -
)]]- .
{^^ 	
if__ 
(__ 
QueryId__ 
<=__ 
$num__ 
)__ 
throw__ $
new__% (
ArgumentException__) :
(__: ;
$"__; =
$str__= k
{__k l
QueryId__l s
}__s t
"__t u
)__u v
;__v w
Query`` 
?`` 
ExistingQuery``  
;``  !
tryaa 
{bb 
ExistingQuerycc 
=cc 

GetQueriescc  *
(cc* +
)cc+ ,
.cc, -
ToListcc- 3
(cc3 4
)cc4 5
.cc5 6
Findcc6 :
(cc: ;
querycc; @
=>ccA C
queryccC H
.ccH I
QueryIdccI P
==ccP R
QueryIdccR Y
)ccY Z
;ccZ [
returndd 
ExistingQuerydd $
!=dd% '
nulldd( ,
?dd- .
ExistingQuerydd/ <
:dd= >
throwdd? D
newddE H!
ItemNotFoundExceptionddI ^
(dd^ _
$"dd_ a
$str	dda 
{
dd 
QueryId
dd —
}
dd— ˜
"
dd˜ ™
)
dd™ š
;
ddš ›
}ee 
catchff 
(ff 
	Exceptionff 
	exceptionff &
)ff& '
{gg 
_loggerhh 
.hh 
LogErrorhh  
(hh  !
HelperServicehh! .
.hh. /
LoggerMessagehh/ <
(hh< =
$strhh= N
,hhN O
$strhhP k
,hhk l
	exceptionhhm v
,hhv w
QueryIdhhx 
)	hh €
)
hh€ 
;
hh ‚
throwii 
;ii 
}jj 
}kk 	
publicmm 
IEnumerablemm 
<mm 
Querymm  
>mm  !

GetQueriesmm" ,
(mm, -
)mm- .
{nn 	
tryoo 
{pp 
varqq 
ListOfQueriesqq !
=qq" #
_contextqq$ ,
.qq, -
Queriesqq- 4
.qq4 5
Whereqq5 :
(qq: ;
itemqq; ?
=>qq@ B
itemqqC G
.qqG H
IsActiveqqH P
)qqP Q
.qqQ R
IncludeqqR Y
(qqY Z
eqqZ [
=>qq[ ]
eqq] ^
.qq^ _
Userqq_ c
)qqc d
.qqd e
ToListqqe k
(qqk l
)qql m
;qqm n
returnrr 
ListOfQueriesrr $
;rr$ %
}tt 
catchuu 
(uu 
	Exceptionuu 
	exceptionuu &
)uu& '
{vv 
_loggerww 
.ww 
LogErrorww  
(ww  !
HelperServiceww! .
.ww. /
LoggerMessageww/ <
(ww< =
$strww= N
,wwN O
$strwwP ^
,ww^ _
	exceptionww` i
)wwi j
)wwj k
;wwk l
throwyy 
;yy 
}zz 
}}} 	
public
€€ 
IEnumerable
€€ 
<
€€ 
QueryComment
€€ '
>
€€' (
GetComments
€€) 4
(
€€4 5
)
€€5 6
{
 	
try
‚‚ 
{
ƒƒ 
var
„„ 
ListOfComments
„„ "
=
„„# $
_context
„„% -
.
„„- .
QueryComments
„„. ;
.
„„; <
Include
„„< C
(
„„C D
e
„„D E
=>
„„E G
e
„„G H
.
„„H I
Query
„„I N
)
„„N O
.
„„O P
Include
„„P W
(
„„W X
e
„„X Y
=>
„„Y [
e
„„[ \
.
„„\ ]
User
„„] a
)
„„a b
.
„„b c
ToList
„„c i
(
„„i j
)
„„j k
;
„„k l
return
…… 
ListOfComments
…… %
;
……% &
}
‡‡ 
catch
ˆˆ 
(
ˆˆ 
	Exception
ˆˆ 
	exception
ˆˆ &
)
ˆˆ& '
{
‰‰ 
_logger
ŠŠ 
.
ŠŠ 
LogError
ŠŠ  
(
ŠŠ  !
HelperService
ŠŠ! .
.
ŠŠ. /
LoggerMessage
ŠŠ/ <
(
ŠŠ< =
$str
ŠŠ= N
,
ŠŠN O
$str
ŠŠP _
,
ŠŠ_ `
	exception
ŠŠa j
)
ŠŠj k
)
ŠŠk l
;
ŠŠl m
throw
ŒŒ 
;
ŒŒ 
}
 
}
 	
public
 
bool
 
AddSpam
 
(
 
Spam
  
spam
! %
)
% &
{
‘‘ 	

Validation
’’ 
.
’’ 
ValidateSpam
’’ "
(
’’" #
spam
’’# '
)
’’' (
;
’’( )
try
““ 
{
”” 
if
•• 
(
•• 
GetSpams
•• 
(
•• 
)
•• 
.
•• 
AsEnumerable
•• *
(
••* +
)
••+ ,
.
••, -
Any
••- 0
(
••0 1
item
••1 5
=>
••6 8
item
••9 =
.
••= >
UserId
••> D
==
••E G
spam
••H L
.
••L M
UserId
••M S
&&
••T V
item
••W [
.
••[ \
QueryId
••\ c
==
••d f
spam
••g k
.
••k l
QueryId
••l s
)
••s t
)
••t u
throw
••v {
new
••| !
ArgumentException••€ ‘
(••‘ ’
$str••’ È
)••È É
;••É Ê
_context
—— 
.
—— 
Spams
—— 
.
—— 
AddRange
—— '
(
——' (
spam
——( ,
)
——, -
;
——- .
_context
˜˜ 
.
˜˜ 
SaveChanges
˜˜ $
(
˜˜$ %
)
˜˜% &
;
˜˜& '
return
™™ 
true
™™ 
;
™™ 
}
šš 
catch
›› 
(
›› 
	Exception
›› 
	exception
›› &
)
››& '
{
œœ 
_logger
 
.
 
LogError
  
(
  !
HelperService
! .
.
. /
LoggerMessage
/ <
(
< =
$str
= N
,
N O
$str
P d
,
d e
	exception
f o
,
o p
spam
q u
)
u v
)
v w
;
w x
return
ŸŸ 
false
ŸŸ 
;
ŸŸ 
}
¡¡ 
}
¢¢ 	
public
¥¥ 
IEnumerable
¥¥ 
<
¥¥ 
Spam
¥¥ 
>
¥¥  
GetSpams
¥¥! )
(
¥¥) *
)
¥¥* +
{
¦¦ 	
try
§§ 
{
¨¨ 
var
©© 
ListOfSpams
©© 
=
©©  !
_context
©©" *
.
©©* +
Spams
©©+ 0
.
©©0 1
Include
©©1 8
(
©©8 9
e
©©9 :
=>
©©: <
e
©©< =
.
©©= >
Query
©©> C
)
©©C D
.
©©D E
Include
©©E L
(
©©L M
e
©©M N
=>
©©N P
e
©©P Q
.
©©Q R
User
©©R V
)
©©V W
.
©©W X
ToList
©©X ^
(
©©^ _
)
©©_ `
;
©©` a
return
ªª 
ListOfSpams
ªª "
;
ªª" #
}
¬¬ 
catch
­­ 
(
­­ 
	Exception
­­ 
	exception
­­ &
)
­­& '
{
®® 
_logger
¯¯ 
.
¯¯ 
LogError
¯¯  
(
¯¯  !
HelperService
¯¯! .
.
¯¯. /
LoggerMessage
¯¯/ <
(
¯¯< =
$str
¯¯= N
,
¯¯N O
$str
¯¯P \
,
¯¯\ ]
	exception
¯¯^ g
)
¯¯g h
)
¯¯h i
;
¯¯i j
throw
°° 
;
°° 
}
±± 
}
²² 	
public
¶¶ 
bool
¶¶ 

UpdateSpam
¶¶ 
(
¶¶ 
int
¶¶ "
QueryId
¶¶# *
,
¶¶* +
int
¶¶, /
VerifyStatusID
¶¶0 >
)
¶¶> ?
{
·· 	
if
¹¹ 
(
¹¹ 
QueryId
¹¹ 
<=
¹¹ 
$num
¹¹ 
)
¹¹ 
throw
¹¹ #
new
¹¹$ '
ArgumentException
¹¹( 9
(
¹¹9 :
$"
¹¹: <
$str
¹¹< j
{
¹¹j k
QueryId
¹¹k r
}
¹¹r s
"
¹¹s t
)
¹¹t u
;
¹¹u v
if
ºº 
(
ºº 
VerifyStatusID
ºº 
<=
ºº !
$num
ºº" #
||
ºº$ &
VerifyStatusID
ºº' 5
>
ºº6 7
$num
ºº8 9
)
ºº9 :
throw
ºº; @
new
ººA D
ArgumentException
ººE V
(
ººV W
$"
ººW Y
$strººY –
{ºº– —
VerifyStatusIDºº— ¥
}ºº¥ ¦
"ºº¦ §
)ºº§ ¨
;ºº¨ ©
try
¼¼ 
{
½½ 
var
¾¾ 
ExistingSpam
¾¾ 
=
¾¾  
GetSpams
¾¾! )
(
¾¾) *
)
¾¾* +
.
¾¾+ ,
Where
¾¾, 1
(
¾¾1 2
item
¾¾2 6
=>
¾¾6 8
item
¾¾8 <
.
¾¾< =
QueryId
¾¾= D
==
¾¾D F
QueryId
¾¾F M
)
¾¾M N
.
¾¾N O
ToList
¾¾O U
(
¾¾U V
)
¾¾V W
;
¾¾W X
if
¿¿ 
(
¿¿ 
ExistingSpam
¿¿ 
==
¿¿ !
null
¿¿" &
)
¿¿& '
throw
¿¿( -
new
¿¿. 1#
ItemNotFoundException
¿¿2 G
(
¿¿G H
$"
¿¿H J
$str
¿¿J w
{
¿¿w x
QueryId
¿¿x 
}¿¿ €
"¿¿€ 
)¿¿ ‚
;¿¿‚ ƒ
ExistingSpam
ÀÀ 
.
ÀÀ 
ForEach
ÀÀ %
(
ÀÀ% &
Item
ÀÀ& *
=>
ÀÀ+ -
Item
ÀÀ- 1
.
ÀÀ1 2
VerifyStatusID
ÀÀ2 @
=
ÀÀ@ A
VerifyStatusID
ÀÀA O
)
ÀÀO P
;
ÀÀP Q
_context
ÁÁ 
.
ÁÁ 
Spams
ÁÁ 
.
ÁÁ 
UpdateRange
ÁÁ *
(
ÁÁ* +
ExistingSpam
ÁÁ+ 7
)
ÁÁ7 8
;
ÁÁ8 9
_context
ÂÂ 
.
ÂÂ 
SaveChanges
ÂÂ $
(
ÂÂ$ %
)
ÂÂ% &
;
ÂÂ& '
return
ÃÃ 
true
ÃÃ 
;
ÃÃ 
}
ÄÄ 
catch
ÅÅ 
(
ÅÅ 
	Exception
ÅÅ 
	exception
ÅÅ &
)
ÅÅ& '
{
ÆÆ 
_logger
ÇÇ 
.
ÇÇ 
LogError
ÇÇ  
(
ÇÇ  !
HelperService
ÇÇ! .
.
ÇÇ. /
LoggerMessage
ÇÇ/ <
(
ÇÇ< =
$str
ÇÇ= N
,
ÇÇN O
$str
ÇÇP }
,
ÇÇ} ~
	exceptionÇÇ ˆ
,ÇÇˆ ‰
VerifyStatusIDÇÇŠ ˜
)ÇÇ˜ ™
)ÇÇ™ š
;ÇÇš ›
return
ÈÈ 
false
ÈÈ 
;
ÈÈ 
}
ÊÊ 
}
ËË 	
}
ĞĞ 
}ÒÒ Å|
fC:\Users\manimaran.venkat\Documents\Backup\AspireOverflow\DataAccessLayer\Repository\UserRepository.cs
	namespace

 	
AspireOverflow


 
.

 
DataAccessLayer

 (
{ 
public 

class 
UserRepository 
:  !
IUserRepository" 1
{ 
private 
readonly !
AspireOverflowContext .
_context/ 7
;7 8
private 
readonly 
ILogger  
<  !
UserRepository! /
>/ 0
_logger1 8
;8 9
public 
UserRepository 
( !
AspireOverflowContext 3
context4 ;
,; <
ILogger= D
<D E
UserRepositoryE S
>S T
loggerU [
)[ \
{ 	
_context 
= 
context 
; 
_logger 
= 
logger 
; 
} 	
public 
bool 

CreateUser 
( 
User #
User$ (
)( )
{ 	

Validation 
. 
ValidateUser #
(# $
User$ (
)( )
;) *
try 
{ 
var 
ExistingUsers !
=" #
_context$ ,
., -
Users- 2
.2 3
ToList3 9
(9 :
): ;
;; <
if   
(   
ExistingUsers   !
.  ! "
Any  " %
(  % &
Item  & *
=>  + -
Item  . 2
.  2 3
	AceNumber  3 <
==  = ?
User  @ D
.  D E
	AceNumber  E N
)  N O
)  O P
throw  Q V
new  W Z
ValidationException  [ n
(  n o
$str	  o Š
)
  Š ‹
;
  ‹ Œ
if!! 
(!! 
ExistingUsers!! !
.!!! "
Any!!" %
(!!% &
Item!!& *
=>!!+ -
Item!!. 2
.!!2 3
EmailAddress!!3 ?
==!!@ B
User!!C G
.!!G H
EmailAddress!!H T
)!!T U
)!!U V
throw!!W \
new!!] `
ValidationException!!a t
(!!t u
$str	!!u “
)
!!“ ”
;
!!” •
_context"" 
."" 
Users"" 
."" 
Add"" "
(""" #
User""# '
)""' (
;""( )
_context## 
.## 
SaveChanges## $
(##$ %
)##% &
;##& '
return$$ 
true$$ 
;$$ 
}%% 
catch&& 
(&& 
ValidationException&& &
	exception&&' 0
)&&0 1
{'' 
_logger(( 
.(( 
LogError((  
(((  !
HelperService((! .
.((. /
LoggerMessage((/ <
(((< =
$str((= M
,((M N
$str((O f
,((f g
	exception((h q
,((q r
User((s w
)((w x
)((x y
;((y z
throw)) 
;)) 
}** 
catch++ 
(++ 
	Exception++ 
	exception++ &
)++& '
{,, 
_logger-- 
.-- 
LogError--  
(--  !
HelperService--! .
.--. /
LoggerMessage--/ <
(--< =
$str--= M
,--M N
$str--O f
,--f g
	exception--h q
,--q r
User--s w
)--w x
)--x y
;--y z
return.. 
false.. 
;.. 
}00 
}22 	
public55 
bool55 

RemoveUser55 
(55 
int55 "
UserId55# )
)55) *
{66 	
if77 
(77 
UserId77 
<=77 
$num77 
)77 
throw77 "
new77# &
ArgumentException77' 8
(778 9
$"779 ;
$str77; g
{77g h
UserId77h n
}77n o
"77o p
)77p q
;77q r
try88 
{99 
var:: 
User_NotVerified:: $
=::% &
GetUserByID::' 2
(::2 3
UserId::3 9
)::9 :
;::: ;
if;; 
(;; 
User_NotVerified;; $
.;;$ %
VerifyStatusID;;% 3
==;;4 6
$num;;7 8
);;8 9
{<< 
_context== 
.== 
Users== "
.==" #
Remove==# )
(==) *
User_NotVerified==* :
)==: ;
;==; <
_context>> 
.>> 
SaveChanges>> (
(>>( )
)>>) *
;>>* +
}?? 
return@@ 
true@@ 
;@@ 
}AA 
catchBB 
(BB 
	ExceptionBB 
	exceptionBB &
)BB& '
{CC 
_loggerDD 
.DD 
LogErrorDD  
(DD  !
HelperServiceDD! .
.DD. /
LoggerMessageDD/ <
(DD< =
$strDD= M
,DDM N
$strDDO g
,DDg h
	exceptionDDi r
,DDr s
UserIdDDt z
)DDz {
)DD{ |
;DD| }
returnEE 
falseEE 
;EE 
}GG 
}II 	
publicJJ 
UserJJ 
GetUserByIDJJ 
(JJ  
intJJ  #
UserIdJJ$ *
)JJ* +
{KK 	
ifLL 
(LL 
UserIdLL 
<=LL 
$numLL 
)LL 
throwLL "
newLL# &
ArgumentExceptionLL' 8
(LL8 9
$"LL9 ;
$strLL; g
{LLg h
UserIdLLh n
}LLn o
"LLo p
)LLp q
;LLq r
UserMM 
?MM 
userMM 
;MM 
tryNN 
{OO 
userPP 
=PP 
GetUsersPP 
(PP  
)PP  !
.PP! "
ToListPP" (
(PP( )
)PP) *
.PP* +
FindPP+ /
(PP/ 0
UserPP0 4
=>PP5 7
UserPP8 <
.PP< =
UserIdPP= C
==PPD F
UserIdPPG M
)PPM N
;PPN O
returnQQ 
userQQ 
!=QQ 
nullQQ #
?QQ$ %
userQQ& *
:QQ+ ,
throwQQ- 2
newQQ3 6!
ItemNotFoundExceptionQQ7 L
(QQL M
$"QQM O
$strQQO {
{QQ{ |
UserId	QQ| ‚
}
QQ‚ ƒ
"
QQƒ „
)
QQ„ …
;
QQ… †
}RR 
catchSS 
(SS 
	ExceptionSS 
	exceptionSS &
)SS& '
{TT 
_loggerUU 
.UU 
LogErrorUU  
(UU  !
HelperServiceUU! .
.UU. /
LoggerMessageUU/ <
(UU< =
$strUU= M
,UUM N
$strUUO h
,UUh i
	exceptionUUj s
,UUs t
UserIdUUu {
)UU{ |
)UU| }
;UU} ~
throwVV 
;VV 
}WW 
}XX 	
public[[ 
IEnumerable[[ 
<[[ 
User[[ 
>[[  
GetUsers[[! )
([[) *
)[[* +
{\\ 	
try]] 
{^^ 
return`` 
_context`` 
.``  
Users``  %
.``% &
Include``& -
(``- .
e``. /
=>``/ 1
e``1 2
.``2 3
Designation``3 >
)``> ?
.``? @
Include``@ G
(``G H
e``H I
=>``I K
e``K L
.``L M
UserRole``M U
)``U V
.``V W
Include``W ^
(``^ _
e``_ `
=>``` b
e``b c
.``c d
Gender``d j
)``j k
.``k l
Include``l s
(``s t
e``t u
=>``u w
e``w x
.``x y
VerifyStatus	``y …
)
``… †
.
``† ‡
ToList
``‡ 
(
`` 
)
`` 
;
`` 
}aa 
catchbb 
(bb 
	Exceptionbb 
	exceptionbb &
)bb& '
{cc 
_loggerdd 
.dd 
LogErrordd  
(dd  !
HelperServicedd! .
.dd. /
LoggerMessagedd/ <
(dd< =
$strdd= M
,ddM N
$strddO [
,dd[ \
	exceptiondd] f
)ddf g
)ddg h
;ddh i
throwee 
;ee 
}ff 
}gg 	
publicii 
boolii $
UpdateUserByVerifyStatusii ,
(ii, -
intii- 0
UserIdii1 7
,ii7 8
intii9 <
VerifyStatusIDii= K
)iiK L
{jj 	
ifkk 
(kk 
UserIdkk 
<=kk 
$numkk 
)kk 
throwkk "
newkk# &
ArgumentExceptionkk' 8
(kk8 9
$"kk9 ;
$strkk; g
{kkg h
UserIdkkh n
}kkn o
"kko p
)kkp q
;kkq r
ifll 
(ll 
VerifyStatusIDll 
<=ll !
$numll" #
||ll$ &
VerifyStatusIDll' 5
>ll6 7
$numll8 9
)ll9 :
throwll; @
newllA D
ArgumentExceptionllE V
(llV W
$"llW Y
$str	llY –
{
ll– —
VerifyStatusID
ll— ¥
}
ll¥ ¦
"
ll¦ §
)
ll§ ¨
;
ll¨ ©
trymm 
{nn 
varoo 
ExistingUseroo  
=oo! "
GetUserByIDoo# .
(oo. /
UserIdoo/ 5
)oo5 6
;oo6 7
ExistingUserpp 
.pp 
VerifyStatusIDpp +
=pp, -
VerifyStatusIDpp. <
;pp< =
_contextqq 
.qq 
Usersqq 
.qq 
Updateqq %
(qq% &
ExistingUserqq& 2
)qq2 3
;qq3 4
_contextrr 
.rr 
SaveChangesrr $
(rr$ %
)rr% &
;rr& '
returnss 
truess 
;ss 
}tt 
catchuu 
(uu 
	Exceptionuu 
	exceptionuu &
)uu& '
{vv 
_loggerww 
.ww 
LogErrorww  
(ww  !
HelperServiceww! .
.ww. /
LoggerMessageww/ <
(ww< =
$strww= M
,wwM N
$str	wwO ‰
,
ww‰ Š
	exception
ww‹ ”
,
ww” •
$"
ww– ˜
$str
ww˜ ¡
{
ww¡ ¢
UserId
ww¢ ¨
}
ww¨ ©
$str
ww© º
{
wwº »
VerifyStatusID
ww» É
}
wwÉ Ê
"
wwÊ Ë
)
wwË Ì
)
wwÌ Í
;
wwÍ Î
throwxx 
;xx 
}zz 
}|| 	
public~~ 
bool~~  
UpdateUserByReviewer~~ (
(~~( )
int~~) ,
UserId~~- 3
,~~3 4
bool~~5 9

IsReviewer~~: D
)~~D E
{ 	
if
€€ 
(
€€ 
UserId
€€ 
<=
€€ 
$num
€€ 
)
€€ 
throw
€€ "
new
€€# &
ArgumentException
€€' 8
(
€€8 9
$"
€€9 ;
$str
€€; g
{
€€g h
UserId
€€h n
}
€€n o
"
€€o p
)
€€p q
;
€€q r
try
 
{
‚‚ 
var
ƒƒ 
ExistingUser
ƒƒ  
=
ƒƒ! "
GetUserByID
ƒƒ# .
(
ƒƒ. /
UserId
ƒƒ/ 5
)
ƒƒ5 6
;
ƒƒ6 7
ExistingUser
„„ 
.
„„ 

IsReviewer
„„ '
=
„„( )

IsReviewer
„„* 4
;
„„4 5
_context
…… 
.
…… 
Users
…… 
.
…… 
Update
…… %
(
……% &
ExistingUser
……& 2
)
……2 3
;
……3 4
_context
†† 
.
†† 
SaveChanges
†† $
(
††$ %
)
††% &
;
††& '
return
‡‡ 
true
‡‡ 
;
‡‡ 
}
ˆˆ 
catch
‰‰ 
(
‰‰ 
	Exception
‰‰ 
	exception
‰‰ &
)
‰‰& '
{
ŠŠ 
_logger
‹‹ 
.
‹‹ 
LogError
‹‹  
(
‹‹  !
HelperService
‹‹! .
.
‹‹. /
LoggerMessage
‹‹/ <
(
‹‹< =
$str
‹‹= M
,
‹‹M N
$str‹‹O ‚
,‹‹‚ ƒ
	exception‹‹„ 
,‹‹ 
$"‹‹ ‘
$str‹‹‘ š
{‹‹š ›
UserId‹‹› ¡
}‹‹¡ ¢
$str‹‹¢ ¯
{‹‹¯ °

IsReviewer‹‹° º
}‹‹º »
"‹‹» ¼
)‹‹¼ ½
)‹‹½ ¾
;‹‹¾ ¿
throw
ŒŒ 
;
ŒŒ 
}
 
}
 	
public
’’ 
IEnumerable
’’ 
<
’’ 
Gender
’’ !
>
’’! "

GetGenders
’’# -
(
’’- .
)
’’. /
{
““ 	
try
”” 
{
•• 
return
—— 
_context
—— 
.
——  
Genders
——  '
.
——' (
ToList
——( .
(
——. /
)
——/ 0
;
——0 1
}
˜˜ 
catch
™™ 
(
™™ 
	Exception
™™ 
	exception
™™ &
)
™™& '
{
šš 
_logger
›› 
.
›› 
LogError
››  
(
››  !
HelperService
››! .
.
››. /
LoggerMessage
››/ <
(
››< =
$str
››= M
,
››M N
$str
››O ^
,
››^ _
	exception
››` i
)
››i j
)
››j k
;
››k l
throw
œœ 
;
œœ 
}
 
}
 	
public
   
IEnumerable
   
<
   
Designation
   &
>
  & '
GetDesignations
  ( 7
(
  7 8
)
  8 9
{
¡¡ 	
try
¢¢ 
{
££ 
return
¥¥ 
_context
¥¥ 
.
¥¥  
Designations
¥¥  ,
.
¥¥, -
Include
¥¥- 4
(
¥¥4 5
e
¥¥5 6
=>
¥¥6 8
e
¥¥8 9
.
¥¥9 :

Department
¥¥: D
)
¥¥D E
.
¥¥E F
ToList
¥¥F L
(
¥¥L M
)
¥¥M N
;
¥¥N O
}
¦¦ 
catch
§§ 
(
§§ 
	Exception
§§ 
	exception
§§ &
)
§§& '
{
¨¨ 
_logger
©© 
.
©© 
LogError
©©  
(
©©  !
HelperService
©©! .
.
©©. /
LoggerMessage
©©/ <
(
©©< =
$str
©©= M
,
©©M N
$str
©©O c
,
©©c d
	exception
©©e n
)
©©n o
)
©©o p
;
©©p q
throw
ªª 
;
ªª 
}
«« 
}
¬¬ 	
public
®® 
IEnumerable
®® 
<
®® 

Department
®® %
>
®®% &
GetDepartments
®®' 5
(
®®5 6
)
®®6 7
{
¯¯ 	
try
°° 
{
±± 
return
²² 
_context
²² 
.
²²  
Departments
²²  +
.
²²+ ,
ToList
²², 2
(
²²2 3
)
²²3 4
;
²²4 5
}
³³ 
catch
´´ 
(
´´ 
	Exception
´´ 
	exception
´´ &
)
´´& '
{
µµ 
_logger
¶¶ 
.
¶¶ 
LogError
¶¶  
(
¶¶  !
HelperService
¶¶! .
.
¶¶. /
LoggerMessage
¶¶/ <
(
¶¶< =
$str
¶¶= M
,
¶¶M N
$str
¶¶O b
,
¶¶b c
	exception
¶¶d m
)
¶¶m n
)
¶¶n o
;
¶¶o p
throw
·· 
;
·· 
}
¸¸ 
}
¹¹ 	
}
¼¼ 
}½½ ›6
KC:\Users\manimaran.venkat\Documents\Backup\AspireOverflow\Models\Article.cs
	namespace 	
AspireOverflow
 
. 
Models 
{ 
public 

partial 
class 
Article  
:! "
IAuditField# .
{ 
[ 	
Key	 
] 
public 
int 
ArtileId 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
? 
Title 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
? 
Content 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
byte 
[ 
] 
Image 
{ 
get !
;! "
set# &
;& '
}( )
=) *
null* .
!. /
;/ 0
public 
int 
ArticleStatusID "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
int 
? 

ReviewerId 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
DateTime 
Datetime  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
bool 
	IsPrivate 
{ 
get  #
;# $
set% (
;( )
}* +
=, -
false. 3
;3 4
public 
int 
	CreatedBy 
{ 
get "
;" #
set$ '
;' (
}) *
public 
DateTime 
	CreatedOn !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
int 
? 
	UpdatedBy 
{ 
get  #
;# $
set% (
;( )
}* +
public!! 
DateTime!! 
?!! 
	UpdatedOn!! "
{!!# $
get!!% (
;!!( )
set!!* -
;!!- .
}!!/ 0
["" 	
	NotMapped""	 
]"" 
public## 
string## 
?## 
ImageString## "
{### $
get##% (
;##( )
set##* -
;##- .
}##/ 0
[%% 	

ForeignKey%%	 
(%% 
$str%% %
)%%% &
]%%& '
[&& 	
InverseProperty&&	 
(&& 
$str&& #
)&&# $
]&&$ %
public'' 
virtual'' 
ArticleStatus'' $
?''$ %
ArticleStatus''& 3
{''4 5
get''6 9
;''9 :
set''; >
;''> ?
}''@ A
[++ 	

ForeignKey++	 
(++ 
$str++ 
)++  
]++  !
[,, 	
InverseProperty,,	 
(,, 
$str,, #
),,# $
],,$ %
public-- 
virtual-- 
User-- 
?-- 
User-- !
{--" #
get--$ '
;--' (
set--) ,
;--, -
}--. /
=--0 1
null--2 6
!--6 7
;--7 8
[// 	
InverseProperty//	 
(// 
$str// "
)//" #
]//# $
public00 
virtual00 
ICollection00 "
<00" #
ArticleComment00# 1
>001 2
?002 3
ArticleComments004 C
{00D E
get00F I
;00I J
set00K N
;00N O
}00P Q
[33 	
InverseProperty33	 
(33 
$str33 "
)33" #
]33# $
public44 
virtual44 
ICollection44 "
<44" #
ArticleLike44# .
>44. /
?44/ 0
ArticleLikes441 =
{44> ?
get44@ C
;44C D
set44E H
;44H I
}44J K
[66 	
InverseProperty66	 
(66 
$str66 "
)66" #
]66# $
public77 
virtual77 
ICollection77 "
<77" #
PrivateArticle77# 1
>771 2
?772 3
PrivateArticles774 C
{77D E
get77F I
;77I J
set77K N
;77N O
}77P Q
}99 
public:: 

partial:: 
class:: 
PrivateArticle:: '
{;; 
public<< 
PrivateArticle<< 
(<< 
int<< !
	articleId<<" +
,<<+ ,
int<<- 0
userId<<1 7
)<<7 8
{== 	
	ArticleId>> 
=>> 
	articleId>> !
;>>! "
UserId?? 
=?? 
userId?? 
;?? 
}@@ 	
[BB 	
KeyBB	 
]BB 
publicCC 
intCC 
IdCC 
{CC 
getCC 
;CC 
setCC  
;CC  !
}CC" #
publicEE 
intEE 
	ArticleIdEE 
{EE 
getEE "
;EE" #
setEE$ '
;EE' (
}EE) *
publicGG 
intGG 
UserIdGG 
{GG 
getGG 
;GG  
setGG! $
;GG$ %
}GG& '
[II 	

ForeignKeyII	 
(II 
$strII 
)II  
]II  !
[JJ 	
InversePropertyJJ	 
(JJ 
$strJJ *
)JJ* +
]JJ+ ,
publicKK 
virtualKK 
ArticleKK 
?KK 
articleKK  '
{KK( )
getKK* -
;KK- .
setKK/ 2
;KK2 3
}KK4 5
[LL 	

ForeignKeyLL	 
(LL 
$strLL 
)LL 
]LL 
[MM 	
InversePropertyMM	 
(MM 
$strMM *
)MM* +
]MM+ ,
publicNN 
virtualNN 
UserNN 
?NN 
userNN !
{NN" #
getNN$ '
;NN' (
setNN) ,
;NN, -
}NN. /
}QQ 
publicSS 

partialSS 
classSS 
PrivateArticleDtoSS *
{SS+ ,
publicUU 
ArticleUU 
?UU 
articleUU 
{UU  !
getUU" %
;UU% &
setUU' *
;UU* +
}UU, -
publicVV 
ListVV 
<VV 
intVV 
>VV 
?VV 
SharedUsersIdVV '
{VV( )
getVV* -
;VV- .
setVV/ 2
;VV2 3
}VV4 5
}WW 
}[[ ¿
RC:\Users\manimaran.venkat\Documents\Backup\AspireOverflow\Models\ArticleComment.cs
	namespace 	
AspireOverflow
 
. 
Models 
{		 
public

 

partial

 
class

 
ArticleComment

 '
:

( )
IAuditField

* 5
{ 
public 
ArticleComment 
( 
) 
{ 	
} 	
[ 	
Key	 
] 
public 
int 
ArticleCommentId #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
string 
? 
Comment 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
DateTime 
Datetime  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
int 
UserId 
{ 
get 
;  
set" %
;% &
}& '
public 
int 
	CreatedBy 
{ 
get  
;  !
set! $
;$ %
}% &
public 
int 
	ArticleId 
{ 
get "
;" #
set$ '
;' (
}) *
public   
DateTime   
	CreatedOn   !
{  " #
get  $ '
;  ' (
set  ) ,
;  , -
}  . /
public"" 
int"" 
?"" 
	UpdatedBy"" 
{"" 
get""  #
;""# $
set""% (
;""( )
}""* +
public$$ 
DateTime$$ 
?$$ 
	UpdatedOn$$ "
{$$# $
get$$% (
;$$( )
set$$* -
;$$- .
}$$/ 0
[&& 	

ForeignKey&&	 
(&& 
$str&& 
)&&  
]&&  !
['' 	
InverseProperty''	 
('' 
$str'' *
)''* +
]''+ ,
public(( 
virtual(( 
Article(( 
?(( 
Article((  '
{((( )
get((* -
;((- .
set((/ 2
;((2 3
}((4 5
=((6 7
null((8 <
!((< =
;((= >
[** 	

ForeignKey**	 
(** 
$str** 
)** 
]** 
[++ 	
InverseProperty++	 
(++ 
$str++ *
)++* +
]+++ ,
public,, 
virtual,, 
User,, 
?,, 
User,, !
{,," #
get,,$ '
;,,' (
set,,) ,
;,,, -
},,. /
=,,0 1
null,,2 6
!,,6 7
;,,7 8
}-- 
}.. Æ
OC:\Users\manimaran.venkat\Documents\Backup\AspireOverflow\Models\ArticleLike.cs
	namespace 	
AspireOverflow
 
. 
Models 
{ 
public		 

partial		 
class		 
ArticleLike		 $
{

 
[ 	
Key	 
] 
public 
int 
LikeId 
{ 
get 
;  
set! $
;$ %
}& '
public 
int 
	ArticleId 
{ 
get "
;" #
set$ '
;' (
}) *
public 
int 
UserId 
{ 
get 
;  
set! $
;$ %
}& '
[ 	

ForeignKey	 
( 
$str 
)  
]  !
[ 	
InverseProperty	 
( 
$str '
)' (
]( )
public 
virtual 
Article 
? 
Article  '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
=5 6
null6 :
!: ;
;; <
[ 

ForeignKey 
( 
$str 
) 
] 
[ 
InverseProperty 
( 
$str 
) 
] 
public 

virtual 
User 
? 
	LikedUser "
{# $
get% (
;( )
set* -
;- .
}/ 0
=0 1
null1 5
!5 6
;6 7
} 
} ‘
QC:\Users\manimaran.venkat\Documents\Backup\AspireOverflow\Models\ArticleStatus.cs
	namespace 	
AspireOverflow
 
. 
Models 
{ 
public		 

partial		 
class		 
ArticleStatus		 &
{

 
[ 	
Key	 
] 
public 
int 
ArticleStatusID "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
string 
? 
Status 
{ 
get  #
;# $
set% (
;( )
}* +
[ 	
InverseProperty	 
( 
$str (
)( )
]) *
public 
virtual 
ICollection "
<" #
Article# *
>* +
?+ ,
Articles- 5
{6 7
get8 ;
;; <
set= @
;@ A
}B C
} 
} 
NC:\Users\manimaran.venkat\Documents\Backup\AspireOverflow\Models\Department.cs
	namespace 	
AspireOverflow
 
. 
Models 
{ 
public 
partial 
class 

Department &
{		 
public

 

Department

 
(

 
)

 
{ 	
Designations 
= 
new 
HashSet &
<& '
Designation' 2
>2 3
(3 4
)4 5
;5 6
} 	
public 
int 
DepartmentId 
{  !
get" %
;% &
set' *
;* +
}, -
[ 	
StringLength	 
( 
$num 
) 
] 
public 
string 
DepartmentName $
{% &
get' *
;* +
set, /
;/ 0
}1 2
=3 4
null5 9
!9 :
;: ;
[ 	
InverseProperty	 
( 
$str %
)% &
]& '
public 
virtual 
ICollection "
<" #
Designation# .
>. /
Designations0 <
{= >
get? B
;B C
setD G
;G H
}I J
} 
} º
OC:\Users\manimaran.venkat\Documents\Backup\AspireOverflow\Models\Designation.cs
	namespace 	
AspireOverflow
 
. 
Models 
{ 
public 

partial 
class 
Designation $
{		 
[ 	
Key	 
] 
public 
int 
DesignationId  
{! "
get# &
;& '
set( +
;+ ,
}- .
[ 	
StringLength	 
( 
$num 
) 
] 
public 
string 
DesignationName %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
=4 5
null6 :
!: ;
;; <
public 
int 
DepartmentId 
{  !
get" %
;% &
set' *
;* +
}, -
[ 	

ForeignKey	 
( 
$str "
)" #
]# $
[ 	
InverseProperty	 
( 
$str '
)' (
]( )
public 
virtual 

Department !

Department" ,
{- .
get/ 2
;2 3
set4 7
;7 8
}9 :
=; <
null= A
!A B
;B C
[
 
InverseProperty 
( 
$str (
)( )
]) *
public 
virtual 
ICollection "
<" #
User# '
>' (
Users) .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
=< =
null> B
!B C
;C D
} 
} ò
]C:\Users\manimaran.venkat\Documents\Backup\AspireOverflow\Models\Enum\Enum-DevelopmentTeam.cs
	namespace 	
AspireOverflow
 
. 
Models 
{ 
enum 
DevelopmentTeam	 
{ 
Web 
, 
Mobile 
, 
Desktop 
}		 
}

 ˆ
JC:\Users\manimaran.venkat\Documents\Backup\AspireOverflow\Models\Gender.cs
	namespace 	
AspireOverflow
 
. 
Models 
{ 
[ 
Table 

(
 
$str 
) 
] 
public 

partial 
class 
Gender 
{		 
public

 
Gender

 
(

 
)

 
{ 	
Users 
= 
new 
HashSet 
<  
User  $
>$ %
(% &
)& '
;' (
} 	
[ 	
Key	 
] 
[ 
DatabaseGenerated 
(  #
DatabaseGeneratedOption  7
.7 8
None8 <
)< =
]= >
public 
int 
GenderId 
{ 
get !
;! "
set# &
;& '
}( )
[ 	
StringLength	 
( 
$num 
) 
] 
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
=) *
null+ /
!/ 0
;0 1
[ 	
InverseProperty	 
( 
$str !
)! "
]" #
public 
virtual 
ICollection "
<" #
User# '
>' (
Users) .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
} 
} “
ZC:\Users\manimaran.venkat\Documents\Backup\AspireOverflow\Models\Interfaces\IAuditField.cs
	namespace 	
AspireOverflow
 
. 
Models 
.  

Interfaces  *
{ 
public 

	interface 
IAuditField  
{ 
int	 
	CreatedBy 
{ 
get 
; 
set !
;! "
}# $
DateTime			 
	CreatedOn		 
{		 
get		 !
;		! "
set		# &
;		& '
}		( )
int

	 
?

 
	UpdatedBy

 
{

 
get

 
;

 
set

 "
;

" #
}

$ %
DateTime	 
? 
	UpdatedOn 
{ 
get "
;" #
set$ '
;' (
}) *
} 
} ¨
HC:\Users\manimaran.venkat\Documents\Backup\AspireOverflow\Models\Mail.cs
	namespace 	
AspireOverflow
 
. 
Models 
{ 
public 

class 
MailRequest 
{ 
public 

string 
? 
ToEmail 
{ 
get  
;  !
set" %
;% &
}' (
public 

string 
? 
Subject 
{ 
get  
;  !
set" %
;% &
}' (
public 

string 
? 
Body 
{ 
get 
; 
set "
;" #
}$ %
}

 
public 

class 
MailSettings 
{ 
public 
string 
? 
Mail 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
? 
DisplayName "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
string 
? 
Password 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
? 
Host 
{ 
get !
;! "
set# &
;& '
}( )
public 
int 
Port 
{ 
get 
; 
set "
;" #
}$ %
} 
} ’
IC:\Users\manimaran.venkat\Documents\Backup\AspireOverflow\Models\Query.cs
	namespace 	
AspireOverflow
 
. 
Models 
{ 
public 

partial 
class 
Query 
:  
IAuditField  +
{ 
public		 
Query		 
(		 
)		 
{		 
QueryComments

 
=

 
new

 
HashSet

  '
<

' (
QueryComment

( 4
>

4 5
(

5 6
)

6 7
;

7 8
} 	
[ 	
Key	 
] 
public 
int 
QueryId 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
? 
Title 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
? 
Content 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
? 
code 
{ 
get !
;! "
set# &
;& '
}( )
public 
bool 
IsSolved 
{ 
get "
;" #
set$ '
;' (
}) *
public 
bool 
IsActive 
{ 
get 
; 
set "
;" #
}# $
=% &
true& *
;* +
public 
int 
	CreatedBy 
{ 
get "
;" #
set$ '
;' (
}) *
public 
DateTime 
	CreatedOn !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
int 
? 
	UpdatedBy 
{ 
get  #
;# $
set% (
;( )
}* +
public 
DateTime 
? 
	UpdatedOn "
{# $
get% (
;( )
set* -
;- .
}/ 0
[   	
InverseProperty  	 
(   
$str    
)    !
]  ! "
public!! 
virtual!! 
ICollection!!  
<!!  !
QueryComment!!! -
>!!- .
?!!. /
QueryComments!!0 =
{!!> ?
get!!? B
;!!B C
set!!C F
;!!F G
}!!G H
[## 

ForeignKey## 
(## 
$str## 
)## 
]## 
[$$ 
InverseProperty$$ 
($$ 
$str$$  
)$$  !
]$$! "
public%% 
virtual%% 
User%% 
?%% 
User%% 
{%%  !
get%%! $
;%%$ %
set%%% (
;%%( )
}%%) *
}&& 
}'' Ã
PC:\Users\manimaran.venkat\Documents\Backup\AspireOverflow\Models\QueryComment.cs
	namespace 	
AspireOverflow
 
. 
Models 
{		 
public

 	
partial


 
class

 
QueryComment

 $
:

% &
IAuditField

& 1
{ 
public 
QueryComment 
( 
) 
{ 
} 	
[ 	
Key	 
] 
public 
int 
QueryCommentId !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
? 
Comment 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
DateTime 
Datetime  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
string 
? 
Code 
{ 
get  
;  !
set" %
;% &
}' (
public 
int 
QueryId 
{ 
get  
;  !
set" %
;% &
}' (
public 
int 
	CreatedBy 
{ 
get "
;" #
set$ '
;' (
}) *
public 
DateTime 
	CreatedOn !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
int 
? 
	UpdatedBy 
{ 
get  #
;# $
set% (
;( )
}* +
public 
DateTime 
? 
	UpdatedOn "
{# $
get% (
;( )
set* -
;- .
}/ 0
["" 

ForeignKey"" 
("" 
$str"" 
)"" 
]"" 
[## 	
InverseProperty##	 
(## 
$str## (
)##( )
]##) *
public$$ 
virtual$$ 
Query$$ 
?$$ 
Query$$ #
{$$$ %
get$$& )
;$$) *
set$$+ .
;$$. /
}$$0 1
[&&	 


ForeignKey&&
 
(&& 
$str&&  
)&&  !
]&&! "
['' 
InverseProperty'' 
('' 
$str'' &
)''& '
]''' (
public(( 
virtual(( 
User(( 
?(( 
User(( 
{((  !
get((! $
;(($ %
set((% (
;((( )
}(() *
}** 
}** ¾
HC:\Users\manimaran.venkat\Documents\Backup\AspireOverflow\Models\Spam.cs
	namespace 	
AspireOverflow
 
. 
Models 
{ 
public 

class 
Spam 
{ 
[ 	
Key	 
] 
public		 
int		 
SpamId		 
{		 
get		 
;		  
set		! $
;		$ %
}		& '
public 
string 
? 
Reason 
{ 
get  #
;# $
set% (
;( )
}* +
public 
int 
QueryId 
{ 
get  
;  !
set" %
;% &
}' (
public 
int 
UserId 
{ 
get 
;  
set! $
;$ %
}& '
public 
int 
VerifyStatusID !
{" #
get$ '
;' (
set) ,
;, -
}. /
[ 	

ForeignKey	 
( 
$str $
)$ %
]% &
public 
virtual 
VerifyStatus #
?# $
VerifyStatus% 1
{2 3
get4 7
;7 8
set9 <
;< =
}> ?
[ 	

ForeignKey	 
( 
$str 
) 
] 
public 
virtual 
Query 
? 
Query #
{$ %
get& )
;) *
set+ .
;. /
}0 1
[ 	

ForeignKey	 
( 
$str 
) 
] 
public 
virtual 
User 
? 
User !
{" #
get$ '
;' (
set) ,
;, -
}. /
} 
} ¯C
HC:\Users\manimaran.venkat\Documents\Backup\AspireOverflow\Models\User.cs
	namespace 	
AspireOverflow
 
. 
Models 
{		 
public 

partial 
class 
User 
{ 
public 
User 
( 
) 
{ 	
} 	
[ 	
Key	 
] 
public 
int 
UserId 
{ 
get 
;  
set! $
;$ %
}& '
[ 	
StringLength	 
( 
$num 
) 
] 
public 
string 
FullName 
{  
get! $
;$ %
set& )
;) *
}+ ,
=- .
null/ 3
!3 4
;4 5
public 
int 
GenderId 
{ 
get !
;! "
set# &
;& '
}( )
[ 	
StringLength	 
( 
$num 
) 
] 
public 
string 
	AceNumber 
{  !
get" %
;% &
set' *
;* +
}, -
=. /
null0 4
!4 5
;5 6
public 
string 
EmailAddress "
{# $
get% (
;( )
set* -
;- .
}/ 0
=1 2
null3 7
!7 8
;8 9
[!! 	
Column!!	 
(!! 
TypeName!! 
=!! 
$str!! *
)!!* +
]!!+ ,
public"" 
string"" 
Password"" 
{""  
get""! $
;""$ %
set""& )
;"") *
}""+ ,
=""- .
null""/ 3
!""3 4
;""4 5
public%% 
DateTime%% 
DateOfBirth%% #
{%%$ %
get%%& )
;%%) *
set%%+ .
;%%. /
}%%0 1
public'' 
int'' 
VerifyStatusID'' !
{''" #
get''$ '
;''' (
set'') ,
;'', -
}''. /
=''0 1
$num''2 3
;''3 4
public)) 
bool)) 

IsReviewer)) 
{))  
get))! $
;))$ %
set))& )
;))) *
}))+ ,
public++ 
int++ 

UserRoleId++ 
{++ 
get++  #
;++# $
set++% (
;++( )
}++* +
=++, -
$num++. /
;++/ 0
public.. 
int.. 
DesignationId..  
{..! "
get..# &
;..& '
set..( +
;..+ ,
}..- .
public00 
DateTime00 
	CreatedOn00 !
{00" #
get00$ '
;00' (
set00) ,
;00, -
}00. /
=000 1
DateTime002 :
.00: ;
Now00; >
;00> ?
public33 
DateTime33 
?33 
	UpdatedOn33 "
{33# $
get33% (
;33( )
set33* -
;33- .
}33/ 0
public44 
int44 
?44 
	UpdatedBy44 
{44 
get44  #
;44# $
set44% (
;44( )
}44* +
[77 	

ForeignKey77	 
(77 
$str77 #
)77# $
]77$ %
[88 	
InverseProperty88	 
(88 
$str88  
)88  !
]88! "
public:: 
virtual:: 
Designation:: "
?::" #
Designation::$ /
{::0 1
get::2 5
;::5 6
set::7 :
;::: ;
}::< =
=::> ?
null::@ D
!::D E
;::E F
[;; 	

ForeignKey;;	 
(;; 
$str;; 
);; 
];;  
[<< 	
InverseProperty<<	 
(<< 
$str<<  
)<<  !
]<<! "
public== 
virtual== 
Gender== 
?== 
Gender== %
{==& '
get==( +
;==+ ,
set==- 0
;==0 1
}==2 3
===4 5
null==6 :
!==: ;
;==; <
[?? 	

ForeignKey??	 
(?? 
$str??  
)??  !
]??! "
[@@ 	
InverseProperty@@	 
(@@ 
$str@@  
)@@  !
]@@! "
publicAA 
virtualAA 
UserRoleAA 
?AA  
UserRoleAA! )
{AA* +
getAA, /
;AA/ 0
setAA1 4
;AA4 5
}AA6 7
=AA8 9
nullAA: >
!AA> ?
;AA? @
[CC 	

ForeignKeyCC	 
(CC 
$strCC $
)CC$ %
]CC% &
[DD 	
InversePropertyDD	 
(DD 
$strDD  
)DD  !
]DD! "
publicEE 
virtualEE 
VerifyStatusEE #
?EE# $
VerifyStatusEE% 1
{EE2 3
getEE4 7
;EE7 8
setEE9 <
;EE< =
}EE> ?
=EE@ A
nullEEB F
!EEF G
;EEG H
[GG 	
InversePropertyGG	 
(GG 
$strGG 
)GG  
]GG  !
publicHH 
virtualHH 
ICollectionHH "
<HH" #
QueryHH# (
>HH( )
?HH) *
QueriesHH+ 2
{HH3 4
getHH5 8
;HH8 9
setHH: =
;HH= >
}HH? @
[II 	
InversePropertyII	 
(II 
$strII 
)II  
]II  !
publicJJ 
virtualJJ 
ICollectionJJ "
<JJ" #
QueryCommentJJ# /
>JJ/ 0
?JJ0 1
QueryCommentsJJ2 ?
{JJ@ A
getJJB E
;JJE F
setJJG J
;JJJ K
}JJL M
[KK 	
InversePropertyKK	 
(KK 
$strKK 
)KK  
]KK  !
publicLL 
virtualLL 
ICollectionLL "
<LL" #
ArticleCommentLL# 1
>LL1 2
?LL2 3
ArticleCommentsLL4 C
{LLD E
getLLF I
;LLI J
setLLK N
;LLN O
}LLP Q
[MM 	
InversePropertyMM	 
(MM 
$strMM 
)MM  
]MM  !
publicNN 
virtualNN 
ICollectionNN "
<NN" #
ArticleNN# *
>NN* +
?NN+ ,
ArticlesNN- 5
{NN6 7
getNN8 ;
;NN; <
setNN= @
;NN@ A
}NNB C
[OO 	
InversePropertyOO	 
(OO 
$strOO $
)OO$ %
]OO% &
publicPP 
virtualPP 
ICollectionPP "
<PP" #
ArticleLikePP# .
>PP. /
?PP/ 0
LikesPP1 6
{PP7 8
getPP9 <
;PP< =
setPP> A
;PPA B
}PPC D
[QQ
 
InversePropertyQQ 
(QQ 
$strQQ !
)QQ! "
]QQ" #
publicRR 
virtualRR 
ICollectionRR "
<RR" #
PrivateArticleRR# 1
>RR1 2
?RR2 3
PrivateArticlesRR4 C
{RRD E
getRRF I
;RRI J
setRRK N
;RRN O
}RRP Q
}WW 
publicYY 

classYY 
LoginYY 
{YY 
publicZZ 
stringZZ 
?ZZ 
EmailZZ 
{ZZ 
getZZ  #
;ZZ# $
setZZ% (
;ZZ( )
}ZZ* +
public[[ 
string[[ 
?[[ 
Password[[ 
{[[  !
get[[" %
;[[% &
set[[' *
;[[* +
}[[, -
}\\ 
public^^ 

class^^ 
CurrentUser^^ 
{^^ 
public__ 
string__ 
?__ 
Email__ 
{__  !
get__" %
;__% &
set__' *
;__* +
}__, -
publicaa 
intaa 
UserIdaa 
{aa 
getaa "
;aa" #
setaa$ '
;aa' (
}aa) *
publiccc 
intcc 
RoleIdcc 
{cc 
getcc "
;cc" #
setcc$ '
;cc' (
}cc) *
publicee 
boolee 

IsRevieweree !
{ee" #
getee$ '
;ee' (
setee) ,
;ee, -
}ee. /
}ff 
}gg ›
LC:\Users\manimaran.venkat\Documents\Backup\AspireOverflow\Models\UserRole.cs
	namespace 	
AspireOverflow
 
. 
Models 
{ 
public		 

partial		 
class		 
UserRole		 !
{

 
public 
UserRole 
( 
) 
{ 	
Users 
= 
new 
HashSet 
<  
User  $
>$ %
(% &
)& '
;' (
} 	
[ 	
Key	 
] 
[ 
DatabaseGenerated 
(  #
DatabaseGeneratedOption  7
.7 8
None8 <
)< =
]= >
public 
int 

UserRoleId 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
? 
RoleName 
{  !
get" %
;% &
set' *
;* +
}, -
[ 	
InverseProperty	 
( 
$str #
)# $
]$ %
public 
virtual 
ICollection "
<" #
User# '
>' (
Users) .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
} 
} §
PC:\Users\manimaran.venkat\Documents\Backup\AspireOverflow\Models\VerifyStatus.cs
	namespace 	
AspireOverflow
 
. 
Models 
{ 
public		 

partial		 
class		 
VerifyStatus		 %
{

 
public 
VerifyStatus 
( 
) 
{ 	
Users 
= 
new 
HashSet 
<  
User  $
>$ %
(% &
)& '
;' (
} 	
[ 	
Key	 
] 
[ 
DatabaseGenerated 
(  #
DatabaseGeneratedOption  7
.7 8
None8 <
)< =
]= >
public 
int 
VerifyStatusID !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
? 
Name 
{ 
get !
;! "
set# &
;& '
}( )
[ 	
InverseProperty	 
( 
$str '
)' (
]( )
public 
virtual 
ICollection "
<" #
User# '
>' (
Users) .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
} 
} U
DC:\Users\manimaran.venkat\Documents\Backup\AspireOverflow\Program.cs
var 
builder 
= 
WebApplication 
. 
CreateBuilder *
(* +
args+ /
)/ 0
;0 1
builder 
. 
Services 
. 
AddControllers 
(  
)  !
;! "
builder 
. 
Services 
. #
AddEndpointsApiExplorer (
(( )
)) *
;* +
try 
{ 
builder 
. 
Services 
. 
AddDbContext !
<! "!
AspireOverflowContext" 7
>7 8
(8 9
options9 @
=>A C
{ 
options 
. 
UseSqlServer 
( 
builder $
.$ %
Configuration% 2
.2 3
GetConnectionString3 F
(F G
$strG P
)P Q
)Q R
;R S
} 
) 
; 
} 
catch 
( 
SystemException 
	Exception  
)  !
{ 
Console   
.   
	WriteLine   
(   
	Exception   
.    
Message    '
)  ' (
;  ( )
}"" 
builder$$ 
.$$ 
Services$$ 
.$$ 
AddHttpLogging$$ 
($$  
httpLogging$$  +
=>$$, .
{%% 
httpLogging&& 
.&& 
LoggingFields&& 
=&& 
HttpLoggingFields&&  1
.&&1 2
All&&2 5
;&&5 6
})) 
))) 
;)) 
builder,, 
.,, 
Services,, 
.,, 
AddTransient,, 
<,, 
IQueryService,, +
,,,+ ,
QueryService,,, 8
>,,8 9
(,,9 :
),,: ;
;,,; <
builder-- 
.-- 
Services-- 
.-- 
AddTransient-- 
<-- 
IQueryRepository-- .
,--. /
QueryRepository--/ >
>--> ?
(--? @
)--@ A
;--A B
builder.. 
... 
Services.. 
... 
AddTransient.. 
<.. 
IArticleRepository.. 0
,..0 1
ArticleRepository..1 B
>..B C
(..C D
)..D E
;..E F
builder// 
.// 
Services// 
.// 
AddTransient// 
<// 
IUserRepository// -
,//- .
UserRepository//. <
>//< =
(//= >
)//> ?
;//? @
builder00 
.00 
Services00 
.00 
AddTransient00 
<00 
IUserService00 *
,00* +
UserService00+ 6
>006 7
(007 8
)008 9
;009 :
builder11 
.11 
Services11 
.11 
AddTransient11 
<11 
ITokenService11 +
,11+ ,
TokenService11, 8
>118 9
(119 :
)11: ;
;11; <
builder33 
.33 
Services33 
.33 
AddTransient33 
<33 
IArticleService33 -
,33- .
ArticleService33. <
>33< =
(33= >
)33> ?
;33? @
builder44 
.44 
Services44 
.44 
	Configure44 
<44 
MailSettings44 '
>44' (
(44( )
builder44) 0
.440 1
Configuration441 >
.44> ?

GetSection44? I
(44I J
$str44J X
)44X Y
)44Y Z
;44Z [
builder55 
.55 
Services55 
.55 
AddTransient55 
<55 
MailService55 )
>55) *
(55* +
)55+ ,
;55, -
builder77 
.77 
Services77 
.77 
AddAuthentication77 "
(77" #
JwtBearerDefaults77# 4
.774 5 
AuthenticationScheme775 I
)77I J
.77J K
AddJwtBearer77K W
(77W X
options77X _
=>77` b
{88 
options99 
.99  
RequireHttpsMetadata99  
=99! "
false99# (
;99( )
options:: 
.:: 
	SaveToken:: 
=:: 
true:: 
;:: 
options;; 
.;; %
TokenValidationParameters;; %
=;;& '
new;;( +%
TokenValidationParameters;;, E
(;;E F
);;F G
{<< 
ValidateIssuer== 
=== 
true== 
,== 
ValidateAudience>> 
=>> 
true>> 
,>>  
ValidAudience?? 
=?? 
builder?? 
.??  
Configuration??  -
[??- .
$str??. <
]??< =
,??= >
ValidIssuer@@ 
=@@ 
builder@@ 
.@@ 
Configuration@@ +
[@@+ ,
$str@@, 8
]@@8 9
,@@9 :
IssuerSigningKeyAA 
=AA 
newAA  
SymmetricSecurityKeyAA 3
(AA3 4
EncodingAA4 <
.AA< =
UTF8AA= A
.AAA B
GetBytesAAB J
(AAJ K
builderAAK R
.AAR S
ConfigurationAAS `
[AA` a
$strAAa j
]AAj k
)AAk l
)AAl m
}BB 
;BB 
}CC 
)CC 
;CC 
builderDD 
.DD 
ServicesDD 
.DD 
AddSwaggerGenDD 
(DD 
cDD  
=>DD! #
{DD$ %
cEE 
.EE 

SwaggerDocEE 
(EE 
$strEE 
,EE 
newEE 
OpenApiInfoEE &
{EE' (
TitleFF 
=FF 
$strFF #
,FF# $
VersionFF% ,
=FF- .
$strFF/ 3
}GG 
)GG 
;GG 
cHH 
.HH !
AddSecurityDefinitionHH 
(HH 
$strHH $
,HH$ %
newHH& )!
OpenApiSecuritySchemeHH* ?
(HH? @
)HH@ A
{HHB C
NameII 
=II 
$strII 
,II 
TypeJJ 
=JJ 
SecuritySchemeTypeJJ %
.JJ% &
ApiKeyJJ& ,
,JJ, -
SchemeKK 
=KK 
$strKK 
,KK 
BearerFormatLL 
=LL 
$strLL  
,LL  !
InMM 
=MM 
ParameterLocationMM "
.MM" #
HeaderMM# )
,MM) *
DescriptionNN 
=NN 
$str	NN Â
,
NNÂ Ã
}OO 
)OO 
;OO 
cPP 
.PP "
AddSecurityRequirementPP 
(PP 
newPP  &
OpenApiSecurityRequirementPP! ;
{PP< =
{QQ 	
newRR !
OpenApiSecuritySchemeRR %
{RR& '
	ReferenceSS 
=SS 
newSS 
OpenApiReferenceSS  0
{SS1 2
TypeTT 
=TT 
ReferenceTypeTT (
.TT( )
SecuritySchemeTT) 7
,TT7 8
IdUU 
=UU 
$strUU %
}VV 
}WW 
,WW 
newXX 
stringXX 
[XX 
]XX 
{XX 
}XX 
}YY 	
}ZZ 
)ZZ 
;ZZ 
}[[ 
)[[ 
;[[ 
builder]] 
.]] 
Services]] 
.]] #
AddControllersWithViews]] (
(]]( )
)]]) *
.^^ 
AddNewtonsoftJson^^ 
(^^ 
options^^ 
=>^^ !
options__ 
.__ 
SerializerSettings__ 
.__ !
ReferenceLoopHandling__ 4
=__5 6

Newtonsoft`` 

.``
 
Json`` 
.`` !
ReferenceLoopHandling`` %
.``% &
Ignore``& ,
)aa 
;aa 
trydd 
{ee 
varff 
loggerff 
=ff 
newff 
LoggerConfigurationff (
(ff( )
)ff) *
.gg 
ReadFromgg 
.gg 
Configurationgg 
(gg 
buildergg %
.gg% &
Configurationgg& 3
)gg3 4
.hh 
Enrichhh 
.hh 
FromLogContexthh 
(hh 
)hh 
.ii 
CreateLoggerii 
(ii 
)ii 
;ii 
builderjj 
.jj 
Loggingjj 
.jj 

AddSerilogjj 
(jj 
loggerjj %
)jj% &
;jj& '
}kk 
catchll 
(ll 
	Exceptionll 
	exceptionll 
)ll 
{mm 
Consolenn 
.nn 
	WriteLinenn 
(nn 
	exceptionnn 
.nn  
Messagenn  '
)nn' (
;nn( )
}pp 
varuu 
appuu 
=uu 	
builderuu
 
.uu 
Builduu 
(uu 
)uu 
;uu 
ifzz 
(zz 
appzz 
.zz 
Environmentzz 
.zz 
IsDevelopmentzz !
(zz! "
)zz" #
)zz# $
{{{ 
app|| 
.|| 

UseSwagger|| 
(|| 
)|| 
;|| 
app~~ 
.~~ 
UseSwaggerUI~~ 
(~~ 
)~~ 
;~~ 
} 
app 
.
 !
UseHttpsRedirection
 
(
 
)
 
;
 
appƒƒ 
.
ƒƒ 
UseHttpLogging
ƒƒ 
(
ƒƒ 
)
ƒƒ 
;
ƒƒ 
app„„ 
.
„„ 
UseAuthentication
„„ 
(
„„ 
)
„„ 
;
„„ 
app…… 
.
…… 
UseAuthorization
…… 
(
…… 
)
…… 
;
…… 
appˆˆ 
.
ˆˆ 
UseCors
ˆˆ 
(
ˆˆ 
builder
ˆˆ 
=>
ˆˆ 
{‰‰ 
builder
ŠŠ 
.
‹‹ 
AllowAnyOrigin
‹‹ 
(
‹‹ 
)
‹‹ 
.
ŒŒ 
AllowAnyMethod
ŒŒ 
(
ŒŒ 
)
ŒŒ 
.
 
AllowAnyHeader
 
(
 
)
 
;
 
} 
)
 
;
 
app‘‘ 
.
‘‘ 
MapControllers
‘‘ 
(
‘‘ 
)
‘‘ 
;
‘‘ 
app““ 
.
““ 
Run
““ 
(
““ 
)
““ 	
;
““	 
ó
TC:\Users\manimaran.venkat\Documents\Backup\AspireOverflow\Security\PasswordHasher.cs
	namespace 	
AspireOverflow
 
. 
Security !
{! "
public 
class  
BCryptPasswordHasher "
<" #
TUser# (
>( )
:* +
IPasswordHasher, ;
<; <
TUser< A
>A B
whereC H
TUserI N
:O P
UserQ U
{ 
public 

string 
HashPassword 
(  
TUser  %
user& *
,* +
string, 2
password3 ;
); <
{ 
return 
BCrypt 
. 
Net 
. 
BCrypt  
.  !
HashPassword! -
(- .
password. 6
,6 7
$num8 :
): ;
;; <
}		 
public 
&
PasswordVerificationResult & 
VerifyHashedPassword' ;
(; <
TUser 
user 
, 
string 
hashedPassword '
,' (
string) /
providedPassword0 @
)@ A
{ 
var 
isValid 
= 
BCrypt 
. 
Net  
.  !
BCrypt! '
.' (
Verify( .
(. /
providedPassword/ ?
,? @
hashedPasswordA O
)O P
;P Q
if 

( 
isValid 
&& 
BCrypt 
. 
Net !
.! "
BCrypt" (
.( )
PasswordNeedsRehash) <
(< =
hashedPassword= K
,K L
$numM O
)O P
)P Q
{ 	
return &
PasswordVerificationResult -
.- .
SuccessRehashNeeded. A
;A B
} 	
return 
isValid 
? &
PasswordVerificationResult 3
.3 4
Success4 ;
:< =&
PasswordVerificationResult> X
.X Y
FailedY _
;_ `
} 
} 
} É
[C:\Users\manimaran.venkat\Documents\Backup\AspireOverflow\Security\PasswordHasherFactory.cs
	namespace 	
AspireOverflow
 
. 
Security !
{ 
public 

static 
class !
PasswordHasherFactory -
{ 
public 
static  
BCryptPasswordHasher *
<* +
User+ /
>/ 0$
GetPasswordHasherFactory1 I
(I J
)J K
{ 	
return		 
new		  
BCryptPasswordHasher		 +
<		+ ,
User		, 0
>		0 1
(		1 2
)		2 3
;		3 4
} 	
} 
} ³ù
TC:\Users\manimaran.venkat\Documents\Backup\AspireOverflow\Services\ArticleService.cs
	namespace 	
AspireOverflow
 
. 
Services !
{ 
public 

class 
ArticleService 
:  !
IArticleService" 1
{ 
private 
readonly 
IArticleRepository +
database, 4
;4 5
private 
readonly 
ILogger  
<  !
ArticleService! /
>/ 0
_logger1 8
;8 9
private 
readonly 
MailService $
_mailService% 1
;1 2
public 
ArticleService 
( 
ILogger %
<% &
ArticleService& 4
>4 5
logger6 <
,< =
MailService> I
mailServiceJ U
,U V
IArticleRepositoryW i
_articleRepositoryj |
)| }
{ 	
_logger 
= 
logger 
; 
_mailService 
= 
mailService &
;& '
database 
= 
_articleRepository )
;) *
} 	
public   
bool   
CreateArticle   !
(  ! "
Article  " )
article  * 1
,  1 2
List  3 7
<  7 8
int  8 ;
>  ; <
?  < =
SharedUsersId  > K
=  L M
null  N R
)  R S
{!! 	
if## 
(## 
!## 

Validation## 
.## 
ValidateArticle## +
(##+ ,
article##, 3
)##3 4
)##4 5
throw##6 ;
new##< ?
ValidationException##@ S
(##S T
$str##T k
)##k l
;##l m
try$$ 
{%% 
article&& 
.&& 
Image&& 
=&& 
System&&  &
.&&& '
Convert&&' .
.&&. /
FromBase64String&&/ ?
(&&? @
article&&@ G
.&&G H
ImageString&&H S
!&&S T
)&&T U
;&&U V
article'' 
.'' 
	CreatedOn'' !
=''" #
DateTime''$ ,
.'', -
Now''- 0
;''0 1
if)) 
()) 
SharedUsersId)) !
!=))" $
null))% )
&&))* ,
article))- 4
.))4 5
	IsPrivate))5 >
&&))? A
SharedUsersId))B O
.))O P
Count))P U
>))V W
$num))X Y
)))Y Z
return))[ a
database))b j
.))j k
AddPrivateArticle))k |
())| }
article	))} „
,
))„ …
SharedUsersId
))† “
)
))“ ”
;
))” •
return** 
database** 
.**  

AddArticle**  *
(*** +
article**+ 2
)**2 3
;**3 4
}++ 
catch-- 
(-- 
	Exception-- 
	exception-- &
)--& '
{.. 
_logger// 
.// 
LogError//  
(//  !
HelperService//! .
.//. /
LoggerMessage/// <
(//< =
$str//= M
,//M N
$str//O o
,//o p
	exception//q z
,//z {
article	//| ƒ
)
//ƒ „
)
//„ …
;
//… †
return00 
false00 
;00 
}11 
}22 	
public77 
bool77 
UpdateArticle77 !
(77! "
Article77" )
article77* 1
,771 2
int773 6
_currentUserId777 E
)77E F
{88 	
if:: 
(:: 
!:: 

Validation:: 
.:: 
ValidateArticle:: +
(::+ ,
article::, 3
)::3 4
)::4 5
throw::6 ;
new::< ?
ValidationException::@ S
(::S T
$str::T k
)::k l
;::l m
try;; 
{<< 
var== 
ExistingArticle== #
===$ %
database==& .
.==. /
GetArticles==/ :
(==: ;
)==; <
.==< =
ToList=== C
(==C D
)==D E
.==E F
Find==F J
(==J K
Item==K O
=>==P R
Item==S W
.==W X
ArtileId==X `
====a c
article==d k
.==k l
ArtileId==l t
&&==u w
Item==x |
.==| }
ArticleStatusID	==} Œ
==
== 
$num
== ‘
)
==‘ ’
;
==’ “
if>> 
(>> 
ExistingArticle>> #
==>>$ &
null>>' +
)>>+ ,
throw>>- 2
new>>3 6!
ItemNotFoundException>>7 L
(>>L M
$">>M O
$str>>O y
{>>y z
article	>>z 
.
>> ‚
ArtileId
>>‚ Š
}
>>Š ‹
"
>>‹ Œ
)
>>Œ 
;
>> 
ExistingArticle?? 
.??  
Title??  %
=??& '
article??( /
.??/ 0
Title??0 5
;??5 6
ExistingArticle@@ 
.@@  
Content@@  '
=@@( )
article@@* 1
.@@1 2
Content@@2 9
;@@9 :
ExistingArticleAA 
.AA  
	UpdatedOnAA  )
=AA* +
DateTimeAA, 4
.AA4 5
NowAA5 8
;AA8 9
ExistingArticleBB 
.BB  
	UpdatedByBB  )
=BB* +
_currentUserIdBB, :
;BB: ;
ExistingArticleCC 
.CC  
ArticleStatusIDCC  /
=CC0 1
articleCC2 9
.CC9 :
ArticleStatusIDCC: I
;CCI J
ExistingArticleDD 
.DD  
ImageDD  %
=DD& '
SystemDD( .
.DD. /
ConvertDD/ 6
.DD6 7
FromBase64StringDD7 G
(DDG H
articleDDH O
.DDO P
ImageStringDDP [
!DD[ \
)DD\ ]
;DD] ^
returnGG 
databaseGG 
.GG  
UpdateArticleGG  -
(GG- .
ExistingArticleGG. =
)GG= >
;GG> ?
}HH 
catchJJ 
(JJ 
	ExceptionJJ 
	exceptionJJ &
)JJ& '
{KK 
_loggerLL 
.LL 
LogErrorLL  
(LL  !
HelperServiceLL! .
.LL. /
LoggerMessageLL/ <
(LL< =
$strLL= M
,LLM N
$str	LLO 
,
LL ‚
	exception
LLƒ Œ
,
LLŒ 
article
LL •
)
LL• –
)
LL– —
;
LL— ˜
returnMM 
falseMM 
;MM 
}NN 
}OO 	
publicRR 
boolRR 
ChangeArticleStatusRR '
(RR' (
intRR( +
	ArticleIDRR, 5
,RR5 6
intRR7 :
ArticleStatusIDRR; J
,RRJ K
intRRL O
UserIdRRP V
)RRV W
{SS 	
ifTT 
(TT 
	ArticleIDTT 
<=TT 
$numTT 
)TT 
throwTT  %
newTT& )
ArgumentExceptionTT* ;
(TT; <
$"TT< >
$strTT> p
{TTp q
	ArticleIDTTq z
}TTz {
"TT{ |
)TT| }
;TT} ~
ifUU 
(UU 
ArticleStatusIDUU 
<=UU  "
$numUU# $
||UU% '
ArticleStatusIDUU( 7
>UU8 9
$numUU: ;
)UU; <
throwUU= B
newUUC F
ArgumentExceptionUUG X
(UUX Y
$"UUY [
$str	UU[ •
{
UU• –
ArticleStatusID
UU– ¥
}
UU¥ ¦
"
UU¦ §
)
UU§ ¨
;
UU¨ ©
tryVV 
{WW 
varXX 
IsAddedSuccfullyXX $
=XX% &
databaseXX' /
.XX/ 0
UpdateArticleXX0 =
(XX= >
	ArticleIDXX> G
,XXG H
ArticleStatusIDXXI X
,XXX Y
UserIdXXZ `
)XX` a
;XXa b
ifYY 
(YY 
IsAddedSuccfullyYY $
)YY$ %
_mailServiceYY& 2
?YY2 3
.YY3 4
SendEmailAsyncYY4 B
(YYB C
HelperServiceYYC P
.YYP Q
ArticleMailYYQ \
(YY\ ]
$strYY] w
,YYw x
$str	YYy €
,
YY€ 
$str
YY‚  
,
YY  ¡
$num
YY¢ £
)
YY£ ¤
)
YY¤ ¥
;
YY¥ ¦
returnZZ 
IsAddedSuccfullyZZ '
;ZZ' (
}[[ 
catch\\ 
(\\ 
	Exception\\ 
	exception\\ &
)\\& '
{]] 
_logger^^ 
.^^ 
LogError^^  
(^^  !
HelperService^^! .
.^^. /
LoggerMessage^^/ <
(^^< =
$str^^= M
,^^M N
$str	^^O 
,
^^ Ÿ
	exception
^^  ©
)
^^© ª
,
^^ª «
	ArticleID
^^¬ µ
,
^^µ ¶
ArticleStatusID
^^· Æ
)
^^Æ Ç
;
^^Ç È
throw`` 
;`` 
}aa 
}bb 	
publicee 
boolee $
DeleteArticleByArticleIdee ,
(ee, -
intee- 0
	ArticleIdee1 :
)ee: ;
{ff 	
ifgg 
(gg 
	ArticleIdgg 
<=gg 
$numgg 
)gg 
throwgg  %
newgg& )
ArgumentExceptiongg* ;
(gg; <
$"gg< >
$strgg> p
{ggp q
	ArticleIdggq z
}ggz {
"gg{ |
)gg| }
;gg} ~
try	gg ‚
{hh 
returnjj 
databasejj 
.jj  
DeleteArticlejj  -
(jj- .
	ArticleIdjj. 7
)jj7 8
;jj8 9
}kk 
catchll 
(ll 
	Exceptionll 
	exceptionll &
)ll& '
{mm 
_loggernn 
.nn 
LogErrornn  
(nn  !
HelperServicenn! .
.nn. /
LoggerMessagenn/ <
(nn< =
$strnn= M
,nnM N
$strnnO x
,nnx y
	exception	nnz ƒ
,
nnƒ „
	ArticleId
nn… 
)
nn 
)
nn 
;
nn ‘
returnoo 
falseoo 
;oo 
}pp 
}qq 	
publicss 
objectss 
GetArticleByIdss $
(ss$ %
intss% (
	ArticleIdss) 2
)ss2 3
{tt 	
ifuu 
(uu 
	ArticleIduu 
<=uu 
$numuu 
)uu 
throwuu  %
newuu& )
ArgumentExceptionuu* ;
(uu; <
$"uu< >
$struu> p
{uup q
	ArticleIduuq z
}uuz {
"uu{ |
)uu| }
;uu} ~
tryvv 
{ww 
varxx 
articlexx 
=xx 
databasexx &
.xx& '
GetArticleByIDxx' 5
(xx5 6
	ArticleIdxx6 ?
)xx? @
;xx@ A
returnyy 
newyy 
{zz 
	articleId{{ 
={{ 
article{{  '
.{{' (
ArtileId{{( 0
,{{0 1
PublishedDate|| !
=||" #
article||$ +
.||+ ,
	UpdatedBy||, 5
,||5 6
title}} 
=}} 
article}} #
.}}# $
Title}}$ )
,}}) *

AuthorName~~ 
=~~  
article~~! (
.~~( )
User~~) -
?~~- .
.~~. /
FullName~~/ 7
,~~7 8
content 
= 
article %
.% &
Content& -
,- .
image
€€ 
=
€€ 
article
€€ #
.
€€# $
Image
€€$ )
,
€€) *
Likes
 
=
 
GetLikesCount
 )
(
) *
article
* 1
.
1 2
ArtileId
2 :
)
: ;
,
; <
comments
‚‚ 
=
‚‚ 
GetComments
‚‚ *
(
‚‚* +
article
‚‚+ 2
.
‚‚2 3
ArtileId
‚‚3 ;
)
‚‚; <
,
‚‚< =
status
ƒƒ 
=
ƒƒ 
article
ƒƒ $
.
ƒƒ$ %
ArticleStatus
ƒƒ% 2
?
ƒƒ2 3
.
ƒƒ3 4
Status
ƒƒ4 :
,
ƒƒ: ;
}
…… 
;
…… 
}
†† 
catch
‡‡ 
(
‡‡ 
	Exception
‡‡ 
	exception
‡‡ &
)
‡‡& '
{
ˆˆ 
_logger
ŠŠ 
.
ŠŠ 
LogError
ŠŠ  
(
ŠŠ  !
HelperService
ŠŠ! .
.
ŠŠ. /
LoggerMessage
ŠŠ/ <
(
ŠŠ< =
$str
ŠŠ= M
,
ŠŠM N
$str
ŠŠO n
,
ŠŠn o
	exception
ŠŠp y
,
ŠŠy z
	ArticleIdŠŠ{ „
)ŠŠ„ …
)ŠŠ… †
;ŠŠ† ‡
throw
ŒŒ 
;
ŒŒ 
}
 
}
 	
public
‘‘ 
IEnumerable
‘‘ 
<
‘‘ 
object
‘‘ !
>
‘‘! "
GetLatestArticles
‘‘# 4
(
‘‘4 5
)
‘‘5 6
{
’’ 	
try
““ 
{
”” 
var
•• 
ListOfArticles
•• "
=
••# $
GetArticles
••% 0
(
••0 1
)
••1 2
.
••2 3
OrderByDescending
••3 D
(
••D E
article
••E L
=>
••M O
article
••P W
.
••W X
	CreatedOn
••X a
)
••a b
;
••b c
return
–– 
ListOfArticles
–– %
.
––% &
Select
––& ,
(
––, -
Article
––- 4
=>
––5 7
new
––8 ;
{
—— 
	ArticleId
˜˜ 
=
˜˜ 
Article
˜˜  '
.
˜˜' (
ArtileId
˜˜( 0
,
˜˜0 1
title
™™ 
=
™™ 
Article
™™ #
.
™™# $
Title
™™$ )
,
™™) *

AuthorName
šš 
=
šš  
Article
šš! (
.
šš( )
User
šš) -
?
šš- .
.
šš. /
FullName
šš/ 7
,
šš7 8
content
›› 
=
›› 
Article
›› %
.
››% &
Content
››& -
,
››- .
image
œœ 
=
œœ 
Article
œœ #
.
œœ# $
Image
œœ$ )
,
œœ) *
date
 
=
 
Article
 "
.
" #
	UpdatedOn
# ,
,
, -
status
 
=
 
Article
 $
.
$ %
ArticleStatus
% 2
?
2 3
.
3 4
Status
4 :
,
: ;
}
   
)
   
;
   
}
¡¡ 
catch
££ 
(
££ 
	Exception
££ 
	exception
££ &
)
££& '
{
¤¤ 
_logger
¥¥ 
.
¥¥ 
LogError
¥¥  
(
¥¥  !
HelperService
¥¥! .
.
¥¥. /
LoggerMessage
¥¥/ <
(
¥¥< =
$str
¥¥= M
,
¥¥M N
$str
¥¥O d
,
¥¥d e
	exception
¥¥f o
)
¥¥o p
)
¥¥p q
;
¥¥q r
throw
¦¦ 
;
¦¦ 
}
§§ 
}
¨¨ 	
public
«« 
IEnumerable
«« 
<
«« 
Object
«« !
>
««! "!
GetTrendingArticles
««# 6
(
««6 7
)
««7 8
{
¬¬ 	
try
­­ 
{
®® 
var
¯¯ 
data
¯¯ 
=
¯¯ 
(
¯¯ 
database
¯¯ $
.
¯¯$ %
GetLikes
¯¯% -
(
¯¯- .
)
¯¯. /
.
¯¯/ 0
GroupBy
¯¯0 7
(
¯¯7 8
item
¯¯8 <
=>
¯¯= ?
item
¯¯@ D
.
¯¯D E
	ArticleId
¯¯E N
)
¯¯N O
)
¯¯O P
.
¯¯P Q
OrderByDescending
¯¯Q b
(
¯¯b c
item
¯¯c g
=>
¯¯h j
item
¯¯k o
.
¯¯o p
Count
¯¯p u
(
¯¯u v
)
¯¯v w
)
¯¯w x
;
¯¯x y
var
±± 
ListOfArticleId
±± #
=
±±$ %
(
±±& '
from
±±' +
item
±±, 0
in
±±1 3
data
±±4 8
select
±±9 ?
item
±±@ D
.
±±D E
First
±±E J
(
±±J K
)
±±K L
.
±±L M
	ArticleId
±±M V
)
±±V W
.
±±W X
ToList
±±X ^
(
±±^ _
)
±±_ `
;
±±` a
var
²² 
ListOfArticles
²² "
=
²²# $
GetArticles
²²% 0
(
²²0 1
)
²²1 2
.
²²2 3
ToList
²²3 9
(
²²9 :
)
²²: ;
;
²²; <
var
³³ 
TrendingArticles
³³ $
=
³³% &
new
³³' *
List
³³+ /
<
³³/ 0
Article
³³0 7
>
³³7 8
(
³³8 9
)
³³9 :
;
³³: ;
foreach
´´ 
(
´´ 
var
´´ 
Id
´´ 
in
´´  "
ListOfArticleId
´´# 2
)
´´2 3
{
µµ 
TrendingArticles
¶¶ $
.
¶¶$ %
Add
¶¶% (
(
¶¶( )
ListOfArticles
¶¶) 7
.
¶¶7 8
Find
¶¶8 <
(
¶¶< =
item
¶¶= A
=>
¶¶B D
item
¶¶E I
.
¶¶I J
ArtileId
¶¶J R
==
¶¶S U
Id
¶¶V X
)
¶¶X Y
!
¶¶Y Z
)
¶¶Z [
;
¶¶[ \
}
·· 
return
¸¸ 
TrendingArticles
¸¸ '
.
¸¸' (
Select
¸¸( .
(
¸¸. /
Article
¸¸/ 6
=>
¸¸7 9
new
¸¸: =
{
¹¹ 
	ArticleId
ºº 
=
ºº 
Article
ºº  '
.
ºº' (
ArtileId
ºº( 0
,
ºº0 1
title
»» 
=
»» 
Article
»» #
.
»»# $
Title
»»$ )
,
»») *

AuthorName
¼¼ 
=
¼¼  
Article
¼¼! (
.
¼¼( )
User
¼¼) -
?
¼¼- .
.
¼¼. /
FullName
¼¼/ 7
,
¼¼7 8
content
½½ 
=
½½ 
Article
½½ %
.
½½% &
Content
½½& -
,
½½- .
image
¾¾ 
=
¾¾ 
Article
¾¾ #
.
¾¾# $
Image
¾¾$ )
,
¾¾) *
date
¿¿ 
=
¿¿ 
Article
¿¿ "
.
¿¿" #
	UpdatedOn
¿¿# ,
,
¿¿, -
status
ÀÀ 
=
ÀÀ 
Article
ÀÀ $
.
ÀÀ$ %
ArticleStatus
ÀÀ% 2
?
ÀÀ2 3
.
ÀÀ3 4
Status
ÀÀ4 :
,
ÀÀ: ;
}
ÂÂ 
)
ÂÂ 
;
ÂÂ 
}
ÃÃ 
catch
ÄÄ 
(
ÄÄ 
	Exception
ÄÄ 
	exception
ÄÄ &
)
ÄÄ& '
{
ÅÅ 
_logger
ÆÆ 
.
ÆÆ 
LogError
ÆÆ  
(
ÆÆ  !
HelperService
ÆÆ! .
.
ÆÆ. /
LoggerMessage
ÆÆ/ <
(
ÆÆ< =
$str
ÆÆ= M
,
ÆÆM N
$str
ÆÆO f
,
ÆÆf g
	exception
ÆÆh q
)
ÆÆq r
)
ÆÆr s
;
ÆÆs t
throw
ÇÇ 
;
ÇÇ 
}
ÈÈ 
}
ÉÉ 	
public
ÌÌ 
IEnumerable
ÌÌ 
<
ÌÌ 
object
ÌÌ !
>
ÌÌ! "!
GetArticlesByUserId
ÌÌ# 6
(
ÌÌ6 7
int
ÌÌ7 :
UserId
ÌÌ; A
)
ÌÌA B
{
ÍÍ 	
if
ÎÎ 
(
ÎÎ 
UserId
ÎÎ 
<=
ÎÎ 
$num
ÎÎ 
)
ÎÎ 
throw
ÎÎ "
new
ÎÎ# &
ArgumentException
ÎÎ' 8
(
ÎÎ8 9
$"
ÎÎ9 ;
$str
ÎÎ; g
{
ÎÎg h
UserId
ÎÎh n
}
ÎÎn o
"
ÎÎo p
)
ÎÎp q
;
ÎÎq r
try
ÏÏ 
{
ĞĞ 
var
ÑÑ 
ListOfArticles
ÑÑ "
=
ÑÑ# $
database
ÑÑ% -
.
ÑÑ- .
GetArticles
ÑÑ. 9
(
ÑÑ9 :
)
ÑÑ: ;
.
ÑÑ; <
Where
ÑÑ< A
(
ÑÑA B
item
ÑÑB F
=>
ÑÑG I
item
ÑÑJ N
.
ÑÑN O
	CreatedBy
ÑÑO X
==
ÑÑY [
UserId
ÑÑ\ b
)
ÑÑb c
.
ÑÑc d
ToList
ÑÑd j
(
ÑÑj k
)
ÑÑk l
;
ÑÑl m
return
ÒÒ 
ListOfArticles
ÒÒ %
.
ÒÒ% &
Select
ÒÒ& ,
(
ÒÒ, -
Article
ÒÒ- 4
=>
ÒÒ5 7
new
ÒÒ8 ;
{
ÓÓ 
	ArticleId
ÔÔ 
=
ÔÔ 
Article
ÔÔ  '
.
ÔÔ' (
ArtileId
ÔÔ( 0
,
ÔÔ0 1
title
ÕÕ 
=
ÕÕ 
Article
ÕÕ #
.
ÕÕ# $
Title
ÕÕ$ )
,
ÕÕ) *

AuthorName
ÖÖ 
=
ÖÖ  
Article
ÖÖ! (
.
ÖÖ( )
User
ÖÖ) -
?
ÖÖ- .
.
ÖÖ. /
FullName
ÖÖ/ 7
,
ÖÖ7 8
content
×× 
=
×× 
Article
×× %
.
××% &
Content
××& -
,
××- .
image
ØØ 
=
ØØ 
Article
ØØ #
.
ØØ# $
Image
ØØ$ )
,
ØØ) *
date
ÙÙ 
=
ÙÙ 
Article
ÙÙ "
.
ÙÙ" #
	UpdatedOn
ÙÙ# ,
,
ÙÙ, -
status
ÚÚ 
=
ÚÚ 
Article
ÚÚ $
.
ÚÚ$ %
ArticleStatus
ÚÚ% 2
?
ÚÚ2 3
.
ÚÚ3 4
Status
ÚÚ4 :
,
ÚÚ: ;
}
ÜÜ 
)
ÜÜ 
;
ÜÜ 
}
ŞŞ 
catch
ßß 
(
ßß 
	Exception
ßß 
	exception
ßß &
)
ßß& '
{
àà 
_logger
ââ 
.
ââ 
LogError
ââ  
(
ââ  !
HelperService
ââ! .
.
ââ. /
LoggerMessage
ââ/ <
(
ââ< =
$str
ââ= M
,
ââM N
$str
ââO p
,
ââp q
	exception
ââr {
,
ââ{ |
UserIdââ} ƒ
)ââƒ „
)ââ„ …
;ââ… †
throw
ää 
;
ää 
}
åå 
}
çç 	
private
êê 
IEnumerable
êê 
<
êê 
Article
êê #
>
êê# $
GetArticles
êê% 0
(
êê0 1
)
êê1 2
{
ëë 	
try
íí 
{
îî 
var
ïï 
ListOfArticles
ïï "
=
ïï# $
database
ïï% -
.
ïï- .
GetArticles
ïï. 9
(
ïï9 :
)
ïï: ;
.
ïï; <
Where
ïï< A
(
ïïA B
item
ïïB F
=>
ïïG I
item
ïïJ N
.
ïïN O
ArticleStatusID
ïïO ^
==
ïï_ a
$num
ïïb c
)
ïïc d
;
ïïd e
return
ğğ 
ListOfArticles
ğğ %
;
ğğ% &
}
ññ 
catch
óó 
(
óó 
	Exception
óó 
	exception
óó &
)
óó& '
{
ôô 
_logger
õõ 
.
õõ 
LogError
õõ  
(
õõ  !
HelperService
õõ! .
.
õõ. /
LoggerMessage
õõ/ <
(
õõ< =
$str
õõ= M
,
õõM N
$str
õõO ^
,
õõ^ _
	exception
õõ` i
)
õõi j
)
õõj k
;
õõk l
throw
öö 
;
öö 
}
÷÷ 
}
úú 	
public
ûû 
IEnumerable
ûû 
<
ûû 
Article
ûû "
>
ûû" #
GetAll
ûû$ *
(
ûû* +
)
ûû+ ,
{
üü 	
try
şş 
{
ÿÿ 
var
€€ 
ListOfArticles
€€ "
=
€€# $
database
€€% -
.
€€- .
GetArticles
€€. 9
(
€€9 :
)
€€: ;
;
€€; <
return
 
ListOfArticles
 %
;
% &
}
‚‚ 
catch
„„ 
(
„„ 
	Exception
„„ 
	exception
„„ &
)
„„& '
{
…… 
_logger
†† 
.
†† 
LogError
††  
(
††  !
HelperService
††! .
.
††. /
LoggerMessage
††/ <
(
††< =
$str
††= M
,
††M N
$str
††O Y
,
††Y Z
	exception
††[ d
)
††d e
)
††e f
;
††f g
throw
‡‡ 
;
‡‡ 
}
ˆˆ 
}
‹‹ 	
public
 
IEnumerable
 
<
 
Object
 !
>
! "
GetListOfArticles
# 4
(
4 5
)
5 6
{
 	
try
‘‘ 
{
’’ 
var
““ 
ListOfArticles
““ "
=
““# $
GetArticles
““% 0
(
““0 1
)
““1 2
.
““2 3
Where
““3 8
(
““8 9
Item
““9 =
=>
““> @
!
““A B
Item
““B F
.
““F G
	IsPrivate
““G P
)
““P Q
;
““Q R
return
”” 
ListOfArticles
”” %
.
””% &
Select
””& ,
(
””, -
Article
””- 4
=>
””5 7
new
””8 ;
{
•• 
	ArticleId
–– 
=
–– 
Article
––  '
.
––' (
ArtileId
––( 0
,
––0 1
title
—— 
=
—— 
Article
—— #
.
——# $
Title
——$ )
,
——) *

AuthorName
˜˜ 
=
˜˜  
Article
˜˜! (
.
˜˜( )
User
˜˜) -
?
˜˜- .
.
˜˜. /
FullName
˜˜/ 7
,
˜˜7 8
content
™™ 
=
™™ 
Article
™™ %
.
™™% &
Content
™™& -
,
™™- .
image
šš 
=
šš 
Article
šš #
.
šš# $
Image
šš$ )
,
šš) *
date
›› 
=
›› 
Article
›› "
.
››" #
	UpdatedOn
››# ,
,
››, -
status
œœ 
=
œœ 
Article
œœ $
.
œœ$ %
ArticleStatus
œœ% 2
?
œœ2 3
.
œœ3 4
Status
œœ4 :
,
œœ: ;
}
 
)
 
;
 
}
ŸŸ 
catch
¡¡ 
(
¡¡ 
	Exception
¡¡ 
	exception
¡¡ &
)
¡¡& '
{
¢¢ 
_logger
££ 
.
££ 
LogError
££  
(
££  !
HelperService
££! .
.
££. /
LoggerMessage
££/ <
(
££< =
$str
££= M
,
££M N
$str
££O ^
,
££^ _
	exception
££` i
)
££i j
)
££j k
;
££k l
throw
¤¤ 
;
¤¤ 
}
¥¥ 
}
¨¨ 	
public
ªª 
IEnumerable
ªª 
<
ªª 
Object
ªª !
>
ªª! " 
GetPrivateArticles
ªª# 5
(
ªª5 6
int
ªª6 9
UserId
ªª: @
)
ªª@ A
{
«« 	
try
­­ 
{
®® 
var
¯¯ #
ListOfPrivateArticles
¯¯ )
=
¯¯* +
database
¯¯, 4
.
¯¯4 5 
GetPrivateArticles
¯¯5 G
(
¯¯G H
)
¯¯H I
.
¯¯I J
Where
¯¯J O
(
¯¯O P
Item
¯¯P T
=>
¯¯U W
Item
¯¯X \
.
¯¯\ ]
UserId
¯¯] c
==
¯¯d f
UserId
¯¯g m
)
¯¯m n
;
¯¯n o
return
°° #
ListOfPrivateArticles
°° ,
.
°°, -
Select
°°- 3
(
°°3 4
PrivateArticle
°°4 B
=>
°°C E
GetArticleById
°°F T
(
°°T U
PrivateArticle
°°U c
.
°°c d
	ArticleId
°°d m
)
°°m n
)
°°n o
;
°°o p
}
±± 
catch
³³ 
(
³³ 
	Exception
³³ 
	exception
³³ &
)
³³& '
{
´´ 
_logger
µµ 
.
µµ 
LogError
µµ  
(
µµ  !
HelperService
µµ! .
.
µµ. /
LoggerMessage
µµ/ <
(
µµ< =
$str
µµ= M
,
µµM N
$str
µµO o
,
µµo p
	exception
µµq z
)
µµz {
)
µµ{ |
;
µµ| }
throw
¶¶ 
;
¶¶ 
}
·· 
}
ºº 	
public
¾¾ 
IEnumerable
¾¾ 
<
¾¾ 
object
¾¾ !
>
¾¾! " 
GetArticlesByTitle
¾¾# 5
(
¾¾5 6
string
¾¾6 <
Title
¾¾= B
)
¾¾B C
{
¿¿ 	
if
ÀÀ 
(
ÀÀ 
String
ÀÀ 
.
ÀÀ 
IsNullOrEmpty
ÀÀ $
(
ÀÀ$ %
Title
ÀÀ% *
)
ÀÀ* +
)
ÀÀ+ ,
throw
ÀÀ- 2
new
ÀÀ3 6!
ValidationException
ÀÀ7 J
(
ÀÀJ K
$str
ÀÀK r
)
ÀÀr s
;
ÀÀs t
try
ÁÁ 
{
ÂÂ 
var
ÃÃ 
ListOfArticles
ÃÃ "
=
ÃÃ# $
GetArticles
ÃÃ% 0
(
ÃÃ0 1
)
ÃÃ1 2
.
ÃÃ2 3
Where
ÃÃ3 8
(
ÃÃ8 9
article
ÃÃ9 @
=>
ÃÃA C
article
ÃÃD K
.
ÃÃK L
Title
ÃÃL Q
!
ÃÃQ R
.
ÃÃR S
Contains
ÃÃS [
(
ÃÃ[ \
Title
ÃÃ\ a
)
ÃÃa b
)
ÃÃb c
;
ÃÃc d
return
ÄÄ 
ListOfArticles
ÄÄ %
.
ÄÄ% &
Select
ÄÄ& ,
(
ÄÄ, -
Article
ÄÄ- 4
=>
ÄÄ5 7
new
ÄÄ8 ;
{
ÅÅ 
	ArticleId
ÆÆ 
=
ÆÆ 
Article
ÆÆ  '
.
ÆÆ' (
ArtileId
ÆÆ( 0
,
ÆÆ0 1
title
ÇÇ 
=
ÇÇ 
Article
ÇÇ #
.
ÇÇ# $
Title
ÇÇ$ )
,
ÇÇ) *

AuthorName
ÈÈ 
=
ÈÈ  
Article
ÈÈ! (
.
ÈÈ( )
User
ÈÈ) -
?
ÈÈ- .
.
ÈÈ. /
FullName
ÈÈ/ 7
,
ÈÈ7 8
content
ÉÉ 
=
ÉÉ 
Article
ÉÉ %
.
ÉÉ% &
Content
ÉÉ& -
,
ÉÉ- .
image
ÊÊ 
=
ÊÊ 
Article
ÊÊ #
.
ÊÊ# $
Image
ÊÊ$ )
,
ÊÊ) *
date
ËË 
=
ËË 
Article
ËË "
.
ËË" #
	UpdatedOn
ËË# ,
,
ËË, -
status
ÌÌ 
=
ÌÌ 
Article
ÌÌ $
.
ÌÌ$ %
ArticleStatus
ÌÌ% 2
?
ÌÌ2 3
.
ÌÌ3 4
Status
ÌÌ4 :
,
ÌÌ: ;
}
ÎÎ 
)
ÎÎ 
;
ÎÎ 
}
ÏÏ 
catch
ĞĞ 
(
ĞĞ 
	Exception
ĞĞ 
	exception
ĞĞ &
)
ĞĞ& '
{
ÑÑ 
_logger
ÓÓ 
.
ÓÓ 
LogError
ÓÓ  
(
ÓÓ  !
HelperService
ÓÓ! .
.
ÓÓ. /
LoggerMessage
ÓÓ/ <
(
ÓÓ< =
$str
ÓÓ= M
,
ÓÓM N
$str
ÓÓO q
,
ÓÓq r
	exception
ÓÓs |
,
ÓÓ| }
TitleÓÓ~ ƒ
)ÓÓƒ „
)ÓÓ„ …
;ÓÓ… †
throw
ÕÕ 
;
ÕÕ 
}
ÖÖ 
}
ØØ 	
public
ÜÜ 
IEnumerable
ÜÜ 
<
ÜÜ 
object
ÜÜ !
>
ÜÜ! "!
GetArticlesByAuthor
ÜÜ# 6
(
ÜÜ6 7
string
ÜÜ7 =

AuthorName
ÜÜ> H
)
ÜÜH I
{
İİ 	
if
ŞŞ 
(
ŞŞ 
String
ŞŞ 
.
ŞŞ 
IsNullOrEmpty
ŞŞ $
(
ŞŞ$ %

AuthorName
ŞŞ% /
)
ŞŞ/ 0
)
ŞŞ0 1
throw
ŞŞ2 7
new
ŞŞ8 ;
ArgumentException
ŞŞ< M
(
ŞŞM N
$str
ŞŞN n
)
ŞŞn o
;
ŞŞo p
try
ßß 
{
àà 
var
áá 
ListOfArticles
áá "
=
áá# $
GetArticles
áá% 0
(
áá0 1
)
áá1 2
.
áá2 3
Where
áá3 8
(
áá8 9
article
áá9 @
=>
ááA C
article
ááD K
.
ááK L
User
ááL P
!
ááP Q
.
ááQ R
FullName
ááR Z
.
ááZ [
Contains
áá[ c
(
áác d

AuthorName
áád n
)
áán o
)
ááo p
;
ááp q
return
ââ 
ListOfArticles
ââ %
.
ââ% &
Select
ââ& ,
(
ââ, -
Article
ââ- 4
=>
ââ5 7
new
ââ8 ;
{
ãã 
	ArticleId
ää 
=
ää 
Article
ää  '
.
ää' (
ArtileId
ää( 0
,
ää0 1
title
åå 
=
åå 
Article
åå #
.
åå# $
Title
åå$ )
,
åå) *

AuthorName
ææ 
=
ææ  
Article
ææ! (
.
ææ( )
User
ææ) -
?
ææ- .
.
ææ. /
FullName
ææ/ 7
,
ææ7 8
content
çç 
=
çç 
Article
çç %
.
çç% &
Content
çç& -
,
çç- .
image
èè 
=
èè 
Article
èè #
.
èè# $
Image
èè$ )
,
èè) *
date
éé 
=
éé 
Article
éé "
.
éé" #
	UpdatedOn
éé# ,
,
éé, -
status
êê 
=
êê 
Article
êê $
.
êê$ %
ArticleStatus
êê% 2
?
êê2 3
.
êê3 4
Status
êê4 :
,
êê: ;
}
ìì 
)
ìì 
;
ìì 
}
íí 
catch
îî 
(
îî 
	Exception
îî 
	exception
îî &
)
îî& '
{
ïï 
_logger
ññ 
.
ññ 
LogError
ññ  
(
ññ  !
HelperService
ññ! .
.
ññ. /
LoggerMessage
ññ/ <
(
ññ< =
$str
ññ= M
,
ññM N
$str
ññO w
,
ññw x
	exceptionññy ‚
,ññ‚ ƒ

AuthorNameññ„ 
)ññ 
)ññ 
;ññ ‘
throw
óó 
;
óó 
}
ôô 
}
öö 	
public
ùù 
IEnumerable
ùù 
<
ùù 
object
ùù !
>
ùù! "%
GetArticlesByReviewerId
ùù# :
(
ùù: ;
int
ùù; >

ReviewerId
ùù? I
)
ùùI J
{
úú 	
if
ûû 
(
ûû 

ReviewerId
ûû 
<=
ûû 
$num
ûû 
)
ûû  
throw
ûû! &
new
ûû' *
ArgumentException
ûû+ <
(
ûû< =
$"
ûû= ?
$str
ûû? r
{
ûûr s

ReviewerId
ûûs }
}
ûû} ~
"
ûû~ 
)ûû €
;ûû€ 
try
üü 
{
ıı 
var
şş 
ListOfArticles
şş "
=
şş# $
GetArticles
şş% 0
(
şş0 1
)
şş1 2
.
şş2 3
Where
şş3 8
(
şş8 9
article
şş9 @
=>
şşA C
article
şşD K
.
şşK L

ReviewerId
şşL V
==
şşW Y

ReviewerId
şşZ d
)
şşd e
;
şşe f
return
ÿÿ 
ListOfArticles
ÿÿ %
.
ÿÿ% &
Select
ÿÿ& ,
(
ÿÿ, -
Article
ÿÿ- 4
=>
ÿÿ5 7
new
ÿÿ8 ;
{
€€ 
	ArticleId
 
=
 
Article
  '
.
' (
ArtileId
( 0
,
0 1
title
‚‚ 
=
‚‚ 
Article
‚‚ #
.
‚‚# $
Title
‚‚$ )
,
‚‚) *

AuthorName
ƒƒ 
=
ƒƒ  
Article
ƒƒ! (
.
ƒƒ( )
User
ƒƒ) -
?
ƒƒ- .
.
ƒƒ. /
FullName
ƒƒ/ 7
,
ƒƒ7 8
content
„„ 
=
„„ 
Article
„„ %
.
„„% &
Content
„„& -
,
„„- .
image
…… 
=
…… 
Article
…… #
.
……# $
Image
……$ )
,
……) *
date
†† 
=
†† 
Article
†† "
.
††" #
	UpdatedOn
††# ,
,
††, -
status
‡‡ 
=
‡‡ 
Article
‡‡ $
.
‡‡$ %
ArticleStatus
‡‡% 2
?
‡‡2 3
.
‡‡3 4
Status
‡‡4 :
,
‡‡: ;
}
‰‰ 
)
‰‰ 
;
‰‰ 
}
ŠŠ 
catch
‹‹ 
(
‹‹ 
	Exception
‹‹ 
	exception
‹‹ &
)
‹‹& '
{
ŒŒ 
_logger
 
.
 
LogError
  
(
  !
HelperService
! .
.
. /
LoggerMessage
/ <
(
< =
$str
= M
,
M N
$str
O y
,
y z
	exception{ „
,„ …

ReviewerId† 
) ‘
)‘ ’
;’ “
throw
 
;
 
}
‘‘ 
}
““ 	
public
–– 
IEnumerable
–– 
<
–– 
object
–– !
>
––! "*
GetArticlesByArticleStatusId
––# ?
(
––? @
int
––@ C
ArticleStatusID
––D S
)
––S T
{
—— 	
if
™™ 
(
™™ 
ArticleStatusID
™™ 
<=
™™  "
$num
™™# $
||
™™% '
ArticleStatusID
™™( 7
>
™™8 9
$num
™™: ;
)
™™; <
throw
™™= B
new
™™C F
ArgumentException
™™G X
(
™™X Y
$"
™™Y [
$str™™[ •
{™™• –
ArticleStatusID™™– ¥
}™™¥ ¦
"™™¦ §
)™™§ ¨
;™™¨ ©
try
šš 
{
›› 
var
œœ 
ListOfArticles
œœ "
=
œœ# $
database
œœ% -
.
œœ- .
GetArticles
œœ. 9
(
œœ9 :
)
œœ: ;
.
œœ; <
Where
œœ< A
(
œœA B
item
œœB F
=>
œœG I
item
œœJ N
.
œœN O
ArticleStatusID
œœO ^
==
œœ_ a
ArticleStatusID
œœb q
)
œœq r
.
œœr s
ToList
œœs y
(
œœy z
)
œœz {
;
œœ{ |
return
 
ListOfArticles
 %
.
% &
Select
& ,
(
, -
Article
- 4
=>
5 7
new
8 ;
{
 
	ArticleId
ŸŸ 
=
ŸŸ 
Article
ŸŸ  '
.
ŸŸ' (
ArtileId
ŸŸ( 0
,
ŸŸ0 1
title
   
=
   
Article
   #
.
  # $
Title
  $ )
,
  ) *

AuthorName
¡¡ 
=
¡¡  
Article
¡¡! (
.
¡¡( )
User
¡¡) -
?
¡¡- .
.
¡¡. /
FullName
¡¡/ 7
,
¡¡7 8
content
¢¢ 
=
¢¢ 
Article
¢¢ %
.
¢¢% &
Content
¢¢& -
,
¢¢- .
image
££ 
=
££ 
Article
££ #
.
££# $
Image
££$ )
,
££) *
date
¤¤ 
=
¤¤ 
Article
¤¤ "
.
¤¤" #
	UpdatedOn
¤¤# ,
,
¤¤, -
status
¥¥ 
=
¥¥ 
Article
¥¥ $
.
¥¥$ %
ArticleStatus
¥¥% 2
?
¥¥2 3
.
¥¥3 4
Status
¥¥4 :
,
¥¥: ;
}
¦¦ 
)
¦¦ 
;
¦¦ 
}
§§ 
catch
¨¨ 
(
¨¨ 
	Exception
¨¨ 
	exception
¨¨ &
)
¨¨& '
{
©© 
_logger
ªª 
.
ªª 
LogError
ªª  
(
ªª  !
HelperService
ªª! .
.
ªª. /
LoggerMessage
ªª/ <
(
ªª< =
$str
ªª= M
,
ªªM N
$strªªO ‚
,ªª‚ ƒ
	exceptionªª„ 
)ªª 
,ªª 
ArticleStatusIDªª Ÿ
)ªªŸ  
;ªª  ¡
throw
¬¬ 
;
¬¬ 
}
­­ 
}
¯¯ 	
public
³³ 
bool
³³ 
CreateComment
³³ !
(
³³! "
ArticleComment
³³" 0
comment
³³1 8
)
³³8 9
{
´´ 	

Validation
µµ 
.
µµ $
ValidateArticleComment
µµ -
(
µµ- .
comment
µµ. 5
)
µµ5 6
;
µµ6 7
try
¶¶ 
{
·· 
comment
¸¸ 
.
¸¸ 
	CreatedBy
¸¸ !
=
¸¸" #
comment
¸¸$ +
.
¸¸+ ,
UserId
¸¸, 2
;
¸¸2 3
var
¹¹ #
IsCommentSuccessfully
¹¹ )
=
¹¹* +
database
¹¹, 4
.
¹¹4 5

AddComment
¹¹5 ?
(
¹¹? @
comment
¹¹@ G
)
¹¹G H
;
¹¹H I
if
ºº 
(
ºº #
IsCommentSuccessfully
ºº )
)
ºº) *
_mailService
ºº+ 7
?
ºº7 8
.
ºº8 9
SendEmailAsync
ºº9 G
(
ººG H
HelperService
ººH U
.
ººU V
CommentMail
ººV a
(
ººa b
$strººb …
,ºº… †
$strºº‡ 
,ºº 
$strºº ®
)ºº® ¯
)ºº¯ °
;ºº° ±
return
»» #
IsCommentSuccessfully
»» ,
;
»», -
}
¼¼ 
catch
½½ 
(
½½ 
	Exception
½½ 
	exception
½½ &
)
½½& '
{
¾¾ 
_logger
¿¿ 
.
¿¿ 
LogError
¿¿  
(
¿¿  !
HelperService
¿¿! .
.
¿¿. /
LoggerMessage
¿¿/ <
(
¿¿< =
$str
¿¿= M
,
¿¿M N
$str
¿¿O `
,
¿¿` a
	exception
¿¿b k
)
¿¿k l
,
¿¿l m
comment
¿¿n u
)
¿¿u v
;
¿¿v w
return
ÀÀ 
false
ÀÀ 
;
ÀÀ 
}
ÁÁ 
}
ÂÂ 	
public
ÅÅ 
IEnumerable
ÅÅ 
<
ÅÅ 
Object
ÅÅ !
>
ÅÅ! "
GetComments
ÅÅ# .
(
ÅÅ. /
int
ÅÅ/ 2
	ArticleID
ÅÅ3 <
)
ÅÅ< =
{
ÆÆ 	
if
ÇÇ 
(
ÇÇ 
	ArticleID
ÇÇ 
<=
ÇÇ 
$num
ÇÇ 
)
ÇÇ 
throw
ÇÇ  %
new
ÇÇ& )
ArgumentException
ÇÇ* ;
(
ÇÇ; <
$"
ÇÇ< >
$str
ÇÇ> p
{
ÇÇp q
	ArticleID
ÇÇq z
}
ÇÇz {
"
ÇÇ{ |
)
ÇÇ| }
;
ÇÇ} ~
try
ÈÈ 
{
ÉÉ 
var
ÊÊ 
ListOfComments
ÊÊ "
=
ÊÊ# $
database
ÊÊ% -
.
ÊÊ- .
GetComments
ÊÊ. 9
(
ÊÊ9 :
)
ÊÊ: ;
.
ÊÊ; <
Where
ÊÊ< A
(
ÊÊA B
comment
ÊÊB I
=>
ÊÊJ L
comment
ÊÊM T
.
ÊÊT U
	ArticleId
ÊÊU ^
==
ÊÊ_ a
	ArticleID
ÊÊb k
)
ÊÊk l
;
ÊÊl m
return
ËË 
ListOfComments
ËË %
.
ËË% &
Select
ËË& ,
(
ËË, -
Item
ËË- 1
=>
ËË2 4
new
ËË5 8
{
ÌÌ 
	CommentId
ÍÍ 
=
ÍÍ 
Item
ÍÍ  $
.
ÍÍ$ %
ArticleCommentId
ÍÍ% 5
,
ÍÍ5 6
Message
ÎÎ 
=
ÎÎ 
Item
ÎÎ "
.
ÎÎ" #
Comment
ÎÎ# *
,
ÎÎ* +
Name
ÏÏ 
=
ÏÏ 
Item
ÏÏ 
.
ÏÏ  
User
ÏÏ  $
?
ÏÏ$ %
.
ÏÏ% &
FullName
ÏÏ& .
,
ÏÏ. /
	ArticleId
ĞĞ 
=
ĞĞ 
Item
ĞĞ  $
.
ĞĞ$ %
	ArticleId
ĞĞ% .
}
ÒÒ 
)
ÒÒ 
;
ÒÒ 
}
ÔÔ 
catch
ÕÕ 
(
ÕÕ 
	Exception
ÕÕ 
	exception
ÕÕ &
)
ÕÕ& '
{
ÖÖ 
_logger
×× 
.
×× 
LogError
××  
(
××  !
HelperService
××! .
.
××. /
LoggerMessage
××/ <
(
××< =
$str
××= M
,
××M N
$str
××O ^
,
××^ _
	exception
××` i
,
××i j
	ArticleID
××k t
)
××t u
)
××u v
;
××v w
throw
ØØ 
;
ØØ 
}
ÙÙ 
}
ÚÚ 	
public
ŞŞ 
bool
ŞŞ 
AddLikeToArticle
ŞŞ $
(
ŞŞ$ %
ArticleLike
ŞŞ% 0
Like
ŞŞ1 5
)
ŞŞ5 6
{
ßß 	
if
àà 
(
àà 
Like
àà 
==
àà 
null
àà 
)
àà 
throw
àà #
new
àà$ '
ArgumentException
àà( 9
(
àà9 :
$str
àà: ]
)
àà] ^
;
àà^ _
if
áá 
(
áá 
Like
áá 
.
áá 
	ArticleId
áá 
<=
áá !
$num
áá" #
)
áá# $
throw
áá% *
new
áá+ .
ArgumentException
áá/ @
(
áá@ A
$"
ááA C
$str
ááC u
{
ááu v
Like
ááv z
.
ááz {
	ArticleIdáá{ „
}áá„ …
"áá… †
)áá† ‡
;áá‡ ˆ
if
ââ 
(
ââ 
Like
ââ 
.
ââ 
UserId
ââ 
<=
ââ 
$num
ââ  
)
ââ  !
throw
ââ" '
new
ââ( +
ArgumentException
ââ, =
(
ââ= >
$"
ââ> @
$str
ââ@ l
{
ââl m
Like
ââm q
.
ââq r
UserId
ââr x
}
ââx y
"
âây z
)
ââz {
;
ââ{ |
try
ãã 
{
ää 
if
åå 
(
åå 
database
åå 
.
åå 
GetLikes
åå %
(
åå% &
)
åå& '
.
åå' (
ToList
åå( .
(
åå. /
)
åå/ 0
.
åå0 1
Find
åå1 5
(
åå5 6
item
åå6 :
=>
åå; =
item
åå> B
.
ååB C
UserId
ååC I
==
ååJ L
Like
ååM Q
.
ååQ R
UserId
ååR X
&&
ååY [
item
åå\ `
.
åå` a
	ArticleId
ååa j
==
ååk m
Like
åån r
.
åår s
	ArticleId
åås |
)
åå| }
!=åå~ €
nullåå …
)åå… †
throwåå‡ Œ
newåå #
ValidationExceptionåå‘ ¤
(åå¤ ¥
$stråå¥ Ú
)ååÚ Û
;ååÛ Ü
return
çç 
database
çç 
.
çç  
AddLike
çç  '
(
çç' (
Like
çç( ,
)
çç, -
;
çç- .
}
èè 
catch
éé 
(
éé 
	Exception
éé 
	exception
éé &
)
éé& '
{
êê 
_logger
ëë 
.
ëë 
LogError
ëë  
(
ëë  !
HelperService
ëë! .
.
ëë. /
LoggerMessage
ëë/ <
(
ëë< =
$str
ëë= M
,
ëëM N
$str
ëëO c
,
ëëc d
	exception
ëëe n
,
ëën o
Like
ëëp t
)
ëët u
)
ëëu v
;
ëëv w
return
ìì 
false
ìì 
;
ìì 
}
íí 
}
îî 	
public
ññ 
int
ññ 
GetLikesCount
ññ  
(
ññ  !
int
ññ! $
	ArticleID
ññ% .
)
ññ. /
{
òò 	
if
óó 
(
óó 
	ArticleID
óó 
<=
óó 
$num
óó 
)
óó 
throw
óó  %
new
óó& )
ArgumentException
óó* ;
(
óó; <
$"
óó< >
$str
óó> p
{
óóp q
	ArticleID
óóq z
}
óóz {
"
óó{ |
)
óó| }
;
óó} ~
try
ôô 
{
õõ 
var
öö 
ArticleLikes
öö  
=
öö! "
database
öö# +
.
öö+ ,
GetLikes
öö, 4
(
öö4 5
)
öö5 6
.
öö6 7
Count
öö7 <
(
öö< =
item
öö= A
=>
ööB D
item
ööE I
.
ööI J
	ArticleId
ööJ S
==
ööT V
	ArticleID
ööW `
)
öö` a
;
ööa b
return
÷÷ 
ArticleLikes
÷÷ #
;
÷÷# $
}
øø 
catch
ùù 
(
ùù 
	Exception
ùù 
	exception
ùù &
)
ùù& '
{
úú 
_logger
ûû 
.
ûû 
LogError
ûû  
(
ûû  !
HelperService
ûû! .
.
ûû. /
LoggerMessage
ûû/ <
(
ûû< =
$str
ûû= M
,
ûûM N
$str
ûûO `
,
ûû` a
	exception
ûûb k
)
ûûk l
)
ûûl m
;
ûûm n
throw
üü 
;
üü 
}
ıı 
}
şş 	
}
 
}‚‚ şQ
TC:\Users\manimaran.venkat\Documents\Backup\AspireOverflow\Services\HelperServices.cs
	namespace 	
AspireOverflow
 
. 
Services !
{ 
public 

static 
class 
HelperService %
{ 
public 
static 
string 
PropertyList )
() *
this* .
object/ 5
obj6 9
)9 :
{ 	
if 
( 
obj 
== 
null 
) 
return #
$str$ &
;& '
try 
{ 
var 

properties 
=  
obj! $
.$ %
GetType% ,
(, -
)- .
.. /
GetProperties/ <
(< =
)= >
;> ?
var 
stringBuilder !
=" #
new$ '
StringBuilder( 5
(5 6
)6 7
;7 8
foreach 
( 
var 
data !
in" $

properties% /
)/ 0
{ 
stringBuilder !
.! "

AppendLine" ,
(, -
data- 1
.1 2
Name2 6
+7 8
$str9 =
+> ?
data@ D
.D E
GetValueE M
(M N
objN Q
,Q R
nullS W
)W X
)X Y
;Y Z
} 
return 
stringBuilder $
.$ %
ToString% -
(- .
). /
;/ 0
} 
catch 
{ 
return 
$str 
; 
} 
} 	
public"" 
static"" 
string"" 
LoggerMessage"" *
(""* +
string""+ 1
RepositoryName""2 @
,""@ A
string""B H

MethodName""I S
,""S T
	Exception""U ^
	exception""_ h
,""h i
object""j p
?""p q
Data""r v
=""w x
null""y }
)""} ~
{## 	
return%% 
Data%% 
!=%% 
null%% 
?%%  !
$"%%" $
{%%$ %
RepositoryName%%% 3
}%%3 4
$str%%4 5
{%%5 6

MethodName%%6 @
}%%@ A
$str%%A X
{%%X Y
PropertyList%%Y e
(%%e f
Data%%f j
)%%j k
}%%k l
$str%%l {
{%%{ |
	exception	%%| …
.
%%… †
ToString
%%† 
(
%% 
)
%% 
}
%% ‘
"
%%‘ ’
:
%%“ ”
$"'' 
{'' 
RepositoryName'' 
}'' 
$str''  
{''  !

MethodName''! +
}''+ ,
$str'', 9
{''9 :
	exception'': C
.''C D
ToString''D L
(''L M
)''M N
}''N O
"''O P
;''P Q
}(( 	
public++ 
static++ 
string++ 
LoggerMessage++ *
(++* +
string+++ 1
RepositoryName++2 @
,++@ A
string++B H

MethodName++I S
,++S T
	Exception++U ^
	exception++_ h
,++h i
int++j m
FirstId++n u
,++u v
int++w z
?++z {
secondId	++| „
)
++„ …
{,, 	
return.. 
secondId.. 
!=.. 
null.. #
?..$ %
$"..& (
{..( )
RepositoryName..) 7
}..7 8
$str..8 9
{..9 :

MethodName..: D
}..D E
$str..E \
{..\ ]
FirstId..] d
}..d e
$str..e g
{..g h
secondId..h p
}..p q
$str	..q 
{
.. ‚
	exception
..‚ ‹
.
..‹ Œ
ToString
..Œ ”
(
..” •
)
..• –
}
..– —
"
..— ˜
:
..™ š
$"00 
{00 
RepositoryName00 
}00 
$str00  
{00  !

MethodName00! +
}00+ ,
$str00, B
{00B C
FirstId00C J
}00J K
$str00K [
{00[ \
	exception00\ e
.00e f
ToString00f n
(00n o
)00o p
}00p q
"00q r
;00r s
}11 	
public44 
static44 
string44 
LoggerMessage44 *
(44* +
string44+ 1
RepositoryName442 @
,44@ A
string44B H

MethodName44I S
,44S T
	Exception44U ^
	exception44_ h
,44h i
string44j p
data44q u
)44u v
{55 	
return77 
$"77 
{77 
RepositoryName77 $
}77$ %
$str77% &
{77& '

MethodName77' 1
}771 2
$str772 I
{77I J
data77J N
}77N O
$str77O _
{77_ `
	exception77` i
.77i j
ToString77j r
(77r s
)77s t
}77t u
"77u v
;77v w
}88 	
public<< 

static<< 
MailRequest<< 
ArticleMail<< )
(<<) *
string<<* 0
RecieverEmail<<1 >
,<<> ?
string<<? E
ArticleTitle<<F R
,<<R S
string<<S Y
Subject<<Z a
,<<a b
int<<b e
ArticleStatusID<<f u
)<<u v
{== 
var>> 
mail>> 
=>> 
new>> 
MailRequest>> $
(>>$ %
)>>% &
;>>& '
mail?? 
.?? 
ToEmail?? 
=?? 
RecieverEmail?? &
;??& '
mail@@ 
.@@ 
Subject@@ 
=@@ 
Subject@@  
;@@  !
switchAA 
(AA 
ArticleStatusIDAA "
)AA" #
{AA# $
caseCC 
$numCC 
:CC 
mailCC 
.CC 
BodyCC !
=CC! "
$"CC" $
$strCC$ W
{CCW X
ArticleTitleCCX d
}CCd e
$str	CCe ³
"
CC³ ´
;
CC´ µ
returnDD 
mailDD #
;DD# $
caseGG 
$numGG 
:GG 
mailGG 
.GG 
BodyGG !
=GG! "
$"GG" $
$strGG$ W
{GGW X
ArticleTitleGGX d
}GGd e
$str	GGe ´
"
GG´ µ
;
GGµ ¶
returnHH 
mailHH #
;HH# $
defaultKK 
:KK 
returnKK 
mailKK  $
;KK$ %
}NN 
}QQ 	
publicUU 

staticUU 
MailRequestUU 
SpamMailUU &
(UU& '
stringUU' -
RecieverEmailUU. ;
,UU; <
stringUU< B

QueryTitleUUC M
,UUM N
stringUUN T
SubjectUUU \
,UU\ ]
intUU] `
VerifyStatusIDUUa o
)UUo p
{VV 	
varWW 
mailWW 
=WW 
newWW 
MailRequestWW $
(WW$ %
)WW% &
;WW& '
mailXX 
.XX 
ToEmailXX 
=XX 
RecieverEmailXX &
;XX& '
mailYY 
.YY 
SubjectYY 
=YY 
SubjectYY  
;YY  !
switchZZ 
(ZZ 
VerifyStatusIDZZ !
)ZZ! "
{ZZ" #
case\\ 
$num\\ 
:\\ 
mail\\ 
.\\ 
Body\\ !
=\\! "
$"\\" $
$str\\$ Y
{\\Y Z

QueryTitle\\Z d
}\\d e
$str	\\e ¬
"
\\¬ ­
;
\\­ ®
return]] 
mail]] #
;]]# $
case`` 
$num`` 
:`` 
mail`` 
.`` 
Body`` !
=``! "
$"``" $
$str``$ Y
{``Y Z

QueryTitle``Z d
}``d e
$str	``e ½
"
``½ ¾
;
``¾ ¿
returnaa 
mailaa #
;aa# $
casedd 
$numdd 
:dd 
maildd 
.dd 
Bodydd  
=dd  !
$"dd! #
$strdd# X
{ddX Y

QueryTitleddY c
}ddc d
$str	ddd ±
"
dd± ²
;
dd² ³
returnee 
mailee "
;ee" #
defaulthh 
:hh 
returnhh 
mailhh  $
;hh$ %
}kk 
}mm 	
publicpp 
staticpp 
MailRequestpp !
	QueryMailpp" +
(pp+ ,
stringpp, 2
RecieverEmailpp3 @
,pp@ A
stringppA G

QueryTitleppH R
,ppR S
stringppS Y
SubjectppZ a
)ppa b
{qq 	
varrr 
mailrr 
=rr 
newrr 
MailRequestrr $
(rr$ %
)rr% &
;rr& '
mailss 
.ss 
ToEmailss 
=ss 
RecieverEmailss &
;ss& '
mailtt 
.tt 
Subjecttt 
=tt 
Subjecttt  
;tt  !
mailuu 
.uu 
Bodyuu 
=uu 
$"uu 
$struu H
{uuH I

QueryTitleuuI S
}uuS T
$str	uuT ”
"
uu” •
;
uu• –
returnvv 
mailvv 
;vv 
}xx 	
publiczz 
staticzz 
MailRequestzz !
CommentMailzz" -
(zz- .
stringzz. 4
RecieverEmailzz5 B
,zzB C
stringzzC I
TitlezzJ O
,zzO P
stringzzP V
SubjectzzW ^
)zz^ _
{{{ 	
var|| 
mail|| 
=|| 
new|| 
MailRequest|| $
(||$ %
)||% &
;||& '
mail}} 
.}} 
ToEmail}} 
=}} 
RecieverEmail}} &
;}}& '
mail~~ 
.~~ 
Subject~~ 
=~~ 
Subject~~  
;~~  !
mail 
. 
Body 
= 
$" 
$str [
{[ \
Title\ a
}a b
$str	b 
"
 ‘
;
‘ ’
return
€€ 
mail
€€ 
;
€€ 
}
‚‚ 	
}
ƒƒ 
}„„ ú
QC:\Users\manimaran.venkat\Documents\Backup\AspireOverflow\Services\MailService.cs
	namespace

 	
AspireOverflow


 
.

 
Services

 !
{

! "
public 

class 
MailService 
: 
IEmailService ,
{ 
private 
readonly 
MailSettings !
_mailSettings" /
;/ 0
public 

MailService 
( 
IOptions 
<  
MailSettings  ,
>, -
mailSettings. :
): ;
{ 
_mailSettings 
= 
mailSettings $
.$ %
Value% *
;* +
} 
public 

async 
Task 
SendEmailAsync $
($ %
MailRequest% 0
mailRequest1 <
)< =
{ 
var 
email 
= 
new 
MimeMessage 
(  
)  !
;! "
email 	
.	 

Sender
 
= 
MailboxAddress !
.! "
Parse" '
(' (
_mailSettings( 5
.5 6
Mail6 :
): ;
;; <
email 	
.	 

To
 
. 
Add 
( 
MailboxAddress 
.  
Parse  %
(% &
mailRequest& 1
.1 2
ToEmail2 9
)9 :
): ;
;; <
email 	
.	 

Subject
 
= 
mailRequest 
.  
Subject  '
;' (
var 
builder 
= 
new 
BodyBuilder !
(! "
)" #
;# $
builder 
. 
TextBody 
= 
mailRequest "
." #
Body# '
;' (
email 	
.	 

Body
 
= 
builder 
. 
ToMessageBody &
(& '
)' (
;( )
using 	
var
 
smtp 
= 
new 

SmtpClient #
(# $
)$ %
;% &
smtp 
. 	
Connect	 
( 
_mailSettings 
. 
Host #
,# $
_mailSettings% 2
.2 3
Port3 7
,7 8
SecureSocketOptions9 L
.L M
StartTlsM U
)U V
;V W
smtp   
.   	
Authenticate  	 
(   
_mailSettings   #
.  # $
Mail  $ (
,  ( )
_mailSettings  * 7
.  7 8
Password  8 @
)  @ A
;  A B
await!! 	
smtp!!
 
.!! 
	SendAsync!! 
(!! 
email!! 
)!! 
;!!  
smtp"" 
."" 	

Disconnect""	 
("" 
true"" 
)"" 
;"" 
}## 
}$$ 
}%% ø€
RC:\Users\manimaran.venkat\Documents\Backup\AspireOverflow\Services\QueryService.cs
	namespace 	
AspireOverflow
 
. 
Services !
{ 
public 

class 
QueryService 
: 
IQueryService ,
{ 
private 
readonly 
IQueryRepository *
database+ 3
;3 4
private 
readonly 
ILogger !
<! "
QueryService" .
>. /
_logger0 7
;7 8
private 
readonly 
MailService $
_mailService% 1
;1 2
public 
QueryService 
( 
ILogger #
<# $
QueryService$ 0
>0 1
logger2 8
,8 9
MailService: E
mailServiceF Q
,Q R
IQueryRepositoryR b
_queryRepositoryc s
)s t
{ 	
_logger 
= 
logger 
; 
_mailService 
= 
mailService &
;& '
database 
= 
_queryRepository &
;& '
}!! 	
public$$ 
bool$$ 
CreateQuery$$ 
($$  
Query$$  %
query$$& +
)$$+ ,
{%% 	

Validation&& 
.&& 
ValidateQuery&& $
(&&$ %
query&&% *
)&&* +
;&&+ ,
try'' 
{(( 
query)) 
.)) 
	CreatedOn)) 
=))  !
DateTime))" *
.))* +
Now))+ .
;)). /
var** 
IsAddedSuccessfully** '
=**( )
database*** 2
.**2 3
AddQuery**3 ;
(**; <
query**< A
)**A B
;**B C
if++ 
(++ 
IsAddedSuccessfully++ '
)++' (
_mailService++) 5
?++5 6
.++6 7
SendEmailAsync++7 E
(++E F
HelperService++F S
.++S T
	QueryMail++T ]
(++] ^
$str++^ x
,++x y
query++z 
.	++ €
Title
++€ …
!
++… †
,
++† ‡
$str
++ˆ ¤
)
++¤ ¥
)
++¥ ¦
;
++¦ §
return,, 
IsAddedSuccessfully,, *
;,,* +
}-- 
catch.. 
(.. 
	Exception.. 
	exception.. &
)..& '
{// 
_logger00 
.00 
LogError00  
(00  !
HelperService00! .
.00. /
LoggerMessage00/ <
(00< =
$str00= K
,00K L
$str00M g
,00g h
	exception00i r
,00r s
query00t y
)00y z
)00z {
;00{ |
return11 
false11 
;11 
}22 
}33 	
public66 
bool66  
RemoveQueryByQueryId66 (
(66( )
int66) ,
QueryId66- 4
)664 5
{77 	
if88 
(88 
QueryId88 
<=88 
$num88 
)88 
throw88 #
new88$ '
ArgumentException88( 9
(889 :
$"88: <
$str88< j
{88j k
QueryId88k r
}88r s
"88s t
)88t u
;88u v
try99 
{:: 
return;; 
database;; 
.;;  
UpdateQuery;;  +
(;;+ ,
QueryId;;, 3
,;;3 4
IsDelete;;5 =
:;;= >
true;;? C
);;C D
;;;D E
}<< 
catch== 
(== 
	Exception== 
	exception== &
)==& '
{>> 
_logger?? 
.?? 
LogError??  
(??  !
HelperService??! .
.??. /
LoggerMessage??/ <
(??< =
$str??= K
,??K L
$str??M p
,??p q
	exception??r {
,??{ |
QueryId	??} „
)
??„ …
)
??… †
;
??† ‡
returnAA 
falseAA 
;AA 
}BB 
}DD 	
publicGG 
boolGG 
MarkQueryAsSolvedGG %
(GG% &
intGG& )
QueryIdGG* 1
)GG1 2
{HH 	
ifII 
(II 
QueryIdII 
<=II 
$numII 
)II 
throwII #
newII$ '
ArgumentExceptionII( 9
(II9 :
$"II: <
$strII< j
{IIj k
QueryIdIIk r
}IIr s
"IIs t
)IIt u
;IIu v
tryJJ 
{KK 
returnLL 
databaseLL 
.LL  
UpdateQueryLL  +
(LL+ ,
QueryIdLL, 3
,LL3 4
IsSolvedLL5 =
:LL= >
trueLL? C
)LLC D
;LLD E
}MM 
catchOO 
(OO 
	ExceptionOO 
	exceptionOO &
)OO& '
{PP 
_loggerQQ 
.QQ 
LogErrorQQ  
(QQ  !
HelperServiceQQ! .
.QQ. /
LoggerMessageQQ/ <
(QQ< =
$strQQ= K
,QQK L
$strQQM n
,QQn o
	exceptionQQp y
,QQy z
QueryId	QQ{ ‚
)
QQ‚ ƒ
)
QQƒ „
;
QQ„ …
returnSS 
falseSS 
;SS 
}TT 
}UU 	
publicWW 
ObjectWW 
GetQueryWW 
(WW 
intWW "
QueryIDWW# *
)WW* +
{XX 	
ifYY 
(YY 
QueryIDYY 
<=YY 
$numYY 
)YY 
throwYY #
newYY$ '
ArgumentExceptionYY( 9
(YY9 :
$"YY: <
$strYY< j
{YYj k
QueryIDYYk r
}YYr s
"YYs t
)YYt u
;YYu v
tryZZ 
{[[ 
var\\ 
Query\\ 
=\\ 
database\\ $
.\\$ %
GetQueryByID\\% 1
(\\1 2
QueryID\\2 9
)\\9 :
;\\: ;
return]] 
new]] 
{^^ 
QueryId__ 
=__ 
Query__ #
.__# $
QueryId__$ +
,__+ ,
Title`` 
=`` 
Query`` !
.``! "
Title``" '
,``' (
Contentaa 
=aa 
Queryaa #
.aa# $
Contentaa$ +
,aa+ ,
codebb 
=bb 
Querybb  
.bb  !
codebb! %
,bb% &
Datecc 
=cc 
Querycc  
.cc  !
	CreatedOncc! *
,cc* +

RaiserNamedd 
=dd  
Querydd! &
.dd& '
Userdd' +
?dd+ ,
.dd, -
FullNamedd- 5
,dd5 6
IsSolvedee 
=ee 
Queryee "
.ee" #
IsSolvedee# +
,ee+ ,
Commentsff 
=ff 
GetCommentsff *
(ff* +
QueryIDff+ 2
)ff2 3
}hh 
;hh 
}ii 
catchjj 
(jj 
	Exceptionjj 
	exceptionjj &
)jj& '
{kk 
_loggerll 
.ll 
LogErrorll  
(ll  !
HelperServicell! .
.ll. /
LoggerMessagell/ <
(ll< =
$strll= K
,llK L
$strllM d
,lld e
	exceptionllf o
,llo p
QueryIDllq x
)llx y
)lly z
;llz {
throwmm 
;mm 
}nn 
}pp 	
privatess 
IEnumerabless 
<ss 
Queryss !
>ss! "

GetQueriesss# -
(ss- .
)ss. /
{tt 	
tryuu 
{vv 
varww 
ListOfQueriesww !
=ww" #
databaseww$ ,
.ww, -

GetQueriesww- 7
(ww7 8
)ww8 9
;ww9 :
returnxx 
ListOfQueriesxx $
;xx$ %
}yy 
catchzz 
(zz 
	Exceptionzz 
	exceptionzz &
)zz& '
{{{ 
_logger|| 
.|| 
LogError||  
(||  !
HelperService||! .
.||. /
LoggerMessage||/ <
(||< =
$str||= K
,||K L
$str||M [
,||[ \
	exception||] f
)||f g
)||g h
;||h i
throw}} 
;}} 
}~~ 
}
€€ 	
public
‚‚ 
IEnumerable
‚‚ 
<
‚‚ 
Object
‚‚ !
>
‚‚! "
GetListOfQueries
‚‚# 3
(
‚‚3 4
)
‚‚4 5
{
ƒƒ 	
try
„„ 
{
…… 
var
†† 
ListOfQueries
†† !
=
††" #
database
††$ ,
.
††, -

GetQueries
††- 7
(
††7 8
)
††8 9
;
††9 :
return
‡‡ 
ListOfQueries
‡‡ $
.
‡‡$ %
Select
‡‡% +
(
‡‡+ ,
item
‡‡, 0
=>
‡‡1 3
new
‡‡4 7
{
ˆˆ 
QueryId
‰‰ 
=
‰‰ 
item
‰‰ "
.
‰‰" #
QueryId
‰‰# *
,
‰‰* +
Title
ŠŠ 
=
ŠŠ 
item
ŠŠ  
.
ŠŠ  !
Title
ŠŠ! &
,
ŠŠ& '
content
‹‹ 
=
‹‹ 
item
‹‹ "
.
‹‹" #
Content
‹‹# *
,
‹‹* +
IsSolved
ŒŒ 
=
ŒŒ 
item
ŒŒ !
.
ŒŒ! "
IsSolved
ŒŒ" *
}
 
)
 
;
 
}
 
catch
 
(
 
	Exception
 
	exception
 &
)
& '
{
 
_logger
‘‘ 
.
‘‘ 
LogError
‘‘  
(
‘‘  !
HelperService
‘‘! .
.
‘‘. /
LoggerMessage
‘‘/ <
(
‘‘< =
$str
‘‘= K
,
‘‘K L
$str
‘‘M [
,
‘‘[ \
	exception
‘‘] f
)
‘‘f g
)
‘‘g h
;
‘‘h i
throw
’’ 
;
’’ 
}
““ 
}
•• 	
public
™™ 
IEnumerable
™™ 
<
™™ 
Object
™™ !
>
™™! "
GetLatestQueries
™™# 3
(
™™3 4
)
™™4 5
{
šš 	
try
›› 
{
œœ 
var
 
ListOfQueries
 !
=
" #

GetQueries
$ .
(
. /
)
/ 0
.
0 1
OrderByDescending
1 B
(
B C
query
C H
=>
I K
query
L Q
.
Q R
	CreatedOn
R [
)
[ \
;
\ ]
return
ŸŸ 
ListOfQueries
ŸŸ $
.
ŸŸ$ %
Select
ŸŸ% +
(
ŸŸ+ ,
item
ŸŸ, 0
=>
ŸŸ1 3
new
ŸŸ4 7
{
   
QueryId
¡¡ 
=
¡¡ 
item
¡¡ "
.
¡¡" #
QueryId
¡¡# *
,
¡¡* +
Title
¢¢ 
=
¢¢ 
item
¢¢  
.
¢¢  !
Title
¢¢! &
,
¢¢& '
content
££ 
=
££ 
item
££ "
.
££" #
Content
££# *
,
££* +
IsSolved
¤¤ 
=
¤¤ 
item
¤¤ #
.
¤¤# $
IsSolved
¤¤$ ,
}
¥¥ 
)
¥¥ 
;
¥¥ 
}
¦¦ 
catch
¨¨ 
(
¨¨ 
	Exception
¨¨ 
	exception
¨¨ &
)
¨¨& '
{
©© 
_logger
ªª 
.
ªª 
LogError
ªª  
(
ªª  !
HelperService
ªª! .
.
ªª. /
LoggerMessage
ªª/ <
(
ªª< =
$str
ªª= K
,
ªªK L
$str
ªªM a
,
ªªa b
	exception
ªªc l
)
ªªl m
)
ªªm n
;
ªªn o
throw
«« 
;
«« 
}
¬¬ 
}
­­ 	
public
±± 
IEnumerable
±± 
<
±± 
Object
±± !
>
±±! " 
GetTrendingQueries
±±# 5
(
±±5 6
)
±±6 7
{
²² 	
try
³³ 
{
´´ 
var
¶¶ 
ListOfComments
¶¶ #
=
¶¶# $
(
¶¶% &
database
¶¶& .
.
¶¶. /
GetComments
¶¶/ :
(
¶¶: ;
)
¶¶; <
.
¶¶< =
GroupBy
¶¶= D
(
¶¶D E
item
¶¶E I
=>
¶¶J L
item
¶¶M Q
.
¶¶Q R
QueryId
¶¶R Y
)
¶¶Y Z
)
¶¶Z [
.
¶¶[ \
OrderByDescending
¶¶\ m
(
¶¶m n
item
¶¶n r
=>
¶¶s u
item
¶¶v z
.
¶¶z {
Count¶¶{ €
(¶¶€ 
)¶¶ ‚
)¶¶‚ ƒ
;¶¶ƒ „
var
¸¸ 
ListOfQueryId
¸¸ !
=
¸¸" #
(
¸¸$ %
from
¸¸% )
queryComment
¸¸* 6
in
¸¸7 9
ListOfComments
¸¸: H
select
¸¸I O
queryComment
¸¸P \
.
¸¸\ ]
First
¸¸] b
(
¸¸b c
)
¸¸c d
.
¸¸d e
QueryId
¸¸e l
)
¸¸l m
.
¸¸m n
ToList
¸¸n t
(
¸¸t u
)
¸¸u v
;
¸¸v w
var
¹¹ 
ListOfQueries
¹¹ !
=
¹¹" #

GetQueries
¹¹$ .
(
¹¹. /
)
¹¹/ 0
.
¹¹0 1
Where
¹¹1 6
(
¹¹6 7
item
¹¹7 ;
=>
¹¹< >
!
¹¹? @
item
¹¹@ D
.
¹¹D E
IsSolved
¹¹E M
)
¹¹M N
.
¹¹N O
ToList
¹¹O U
(
¹¹U V
)
¹¹V W
;
¹¹W X
var
ºº 
TrendingQueries
ºº #
=
ºº$ %
new
ºº& )
List
ºº* .
<
ºº. /
Query
ºº/ 4
>
ºº4 5
(
ºº5 6
)
ºº6 7
;
ºº7 8
foreach
»» 
(
»» 
var
»» 
id
»» 
in
»»  "
ListOfQueryId
»»# 0
)
»»0 1
{
¼¼ 
TrendingQueries
½½ #
.
½½# $
Add
½½$ '
(
½½' (
ListOfQueries
½½( 5
.
½½5 6
Find
½½6 :
(
½½: ;
item
½½; ?
=>
½½@ B
item
½½C G
.
½½G H
QueryId
½½H O
==
½½P R
id
½½S U
)
½½U V
!
½½V W
)
½½W X
;
½½X Y
}
¾¾ 
return
¿¿ 
TrendingQueries
¿¿ %
.
¿¿% &
Select
¿¿& ,
(
¿¿, -
item
¿¿- 1
=>
¿¿2 4
new
¿¿5 8
{
ÀÀ 
QueryId
ÁÁ 
=
ÁÁ 
item
ÁÁ "
.
ÁÁ" #
QueryId
ÁÁ# *
,
ÁÁ* +
Title
ÂÂ 
=
ÂÂ 
item
ÂÂ  
.
ÂÂ  !
Title
ÂÂ! &
,
ÂÂ& '
content
ÃÃ 
=
ÃÃ 
item
ÃÃ "
.
ÃÃ" #
Content
ÃÃ# *
,
ÃÃ* +
IsSolved
ÄÄ 
=
ÄÄ 
item
ÄÄ !
.
ÄÄ! "
IsSolved
ÄÄ" *
}
ÅÅ 
)
ÅÅ 
;
ÅÅ 
}
ÆÆ 
catch
ÈÈ 
(
ÈÈ 
	Exception
ÈÈ 
	exception
ÈÈ &
)
ÈÈ& '
{
ÉÉ 
_logger
ÊÊ 
.
ÊÊ 
LogError
ÊÊ  
(
ÊÊ  !
HelperService
ÊÊ! .
.
ÊÊ. /
LoggerMessage
ÊÊ/ <
(
ÊÊ< =
$str
ÊÊ= K
,
ÊÊK L
$str
ÊÊM c
,
ÊÊc d
	exception
ÊÊe n
)
ÊÊn o
)
ÊÊo p
;
ÊÊp q
throw
ËË 
;
ËË 
}
ÌÌ 
}
ÍÍ 	
public
ÑÑ 
IEnumerable
ÑÑ 
<
ÑÑ 
Object
ÑÑ !
>
ÑÑ! " 
GetQueriesByUserId
ÑÑ# 5
(
ÑÑ5 6
int
ÑÑ6 9
UserId
ÑÑ: @
)
ÑÑ@ A
{
ÒÒ 	
if
ÓÓ 
(
ÓÓ 
UserId
ÓÓ 
<=
ÓÓ 
$num
ÓÓ 
)
ÓÓ 
throw
ÓÓ "
new
ÓÓ# &
ArgumentException
ÓÓ' 8
(
ÓÓ8 9
$"
ÓÓ9 ;
$str
ÓÓ; g
{
ÓÓg h
UserId
ÓÓh n
}
ÓÓn o
"
ÓÓo p
)
ÓÓp q
;
ÓÓq r
try
ÔÔ 
{
ÕÕ 
var
ÖÖ 
ListOfQueries
ÖÖ !
=
ÖÖ" #

GetQueries
ÖÖ$ .
(
ÖÖ. /
)
ÖÖ/ 0
.
ÖÖ0 1
Where
ÖÖ1 6
(
ÖÖ6 7
query
ÖÖ7 <
=>
ÖÖ= ?
query
ÖÖ@ E
.
ÖÖE F
	CreatedBy
ÖÖF O
==
ÖÖP R
UserId
ÖÖS Y
)
ÖÖY Z
;
ÖÖZ [
return
ØØ 
ListOfQueries
ØØ $
.
ØØ$ %
Select
ØØ% +
(
ØØ+ ,
item
ØØ, 0
=>
ØØ1 3
new
ØØ4 7
{
ÙÙ 
QueryId
ÚÚ 
=
ÚÚ 
item
ÚÚ "
.
ÚÚ" #
QueryId
ÚÚ# *
,
ÚÚ* +
Title
ÛÛ 
=
ÛÛ 
item
ÛÛ  
.
ÛÛ  !
Title
ÛÛ! &
,
ÛÛ& '
content
ÜÜ 
=
ÜÜ 
item
ÜÜ "
.
ÜÜ" #
Content
ÜÜ# *
,
ÜÜ* +
IsSolved
İİ 
=
İİ 
item
İİ #
.
İİ# $
IsSolved
İİ$ ,
}
ŞŞ 
)
ŞŞ 
;
ŞŞ 
}
ßß 
catch
àà 
(
àà 
	Exception
àà 
	exception
àà &
)
àà& '
{
áá 
_logger
ââ 
.
ââ 
LogError
ââ  
(
ââ  !
HelperService
ââ! .
.
ââ. /
LoggerMessage
ââ/ <
(
ââ< =
$str
ââ= K
,
ââK L
$str
ââM m
,
ââm n
	exception
ââo x
,
ââx y
UserIdââz €
)ââ€ 
)ââ ‚
;ââ‚ ƒ
throw
ãã 
;
ãã 
}
ää 
}
ææ 	
public
éé 
IEnumerable
éé 
<
éé 
Object
éé !
>
éé! "
GetQueriesByTitle
éé# 4
(
éé4 5
String
éé5 ;
Title
éé< A
)
ééA B
{
êê 	
if
ëë 
(
ëë 
String
ëë 
.
ëë 
IsNullOrEmpty
ëë $
(
ëë$ %
Title
ëë% *
)
ëë* +
)
ëë+ ,
throw
ëë- 2
new
ëë3 6
ArgumentException
ëë7 H
(
ëëH I
$str
ëëI e
)
ëëe f
;
ëëf g
try
ìì 
{
íí 
var
îî 
ListOfQueries
îî !
=
îî" #

GetQueries
îî$ .
(
îî. /
)
îî/ 0
.
îî0 1
Where
îî1 6
(
îî6 7
query
îî7 <
=>
îî= ?
query
îî@ E
.
îîE F
Title
îîF K
!
îîK L
.
îîL M
Contains
îîM U
(
îîU V
Title
îîV [
)
îî[ \
)
îî\ ]
;
îî] ^
return
ïï 
ListOfQueries
ïï $
.
ïï$ %
Select
ïï% +
(
ïï+ ,
item
ïï, 0
=>
ïï1 3
new
ïï4 7
{
ğğ 
QueryId
ññ 
=
ññ 
item
ññ "
.
ññ" #
QueryId
ññ# *
,
ññ* +
Title
òò 
=
òò 
item
òò  
.
òò  !
Title
òò! &
,
òò& '
content
óó 
=
óó 
item
óó "
.
óó" #
Content
óó# *
,
óó* +
IsSolved
ôô 
=
ôô 
item
ôô #
.
ôô# $
IsSolved
ôô$ ,
}
õõ 
)
õõ 
;
õõ 
}
÷÷ 
catch
øø 
(
øø 
	Exception
øø 
	exception
øø &
)
øø& '
{
ùù 
_logger
úú 
.
úú 
LogError
úú  
(
úú  !
HelperService
úú! .
.
úú. /
LoggerMessage
úú/ <
(
úú< =
$str
úú= K
,
úúK L
$str
úúM n
,
úún o
	exception
úúp y
,
úúy z
Titleúú{ €
)úú€ 
)úú ‚
;úú‚ ƒ
throw
ûû 
;
ûû 
}
üü 
}
ıı 	
public
€€ 
IEnumerable
€€ 
<
€€ 
Object
€€ !
>
€€! "

GetQueries
€€# -
(
€€- .
bool
€€. 2
IsSolved
€€3 ;
)
€€; <
{
 	
try
‚‚ 
{
ƒƒ 
var
„„ 
ListOfQueries
„„ !
=
„„" #

GetQueries
„„$ .
(
„„. /
)
„„/ 0
.
„„0 1
Where
„„1 6
(
„„6 7
query
„„7 <
=>
„„= ?
query
„„@ E
.
„„E F
IsSolved
„„F N
==
„„O Q
IsSolved
„„R Z
)
„„Z [
;
„„[ \
return
…… 
ListOfQueries
…… $
.
……$ %
Select
……% +
(
……+ ,
item
……, 0
=>
……1 3
new
……4 7
{
†† 
QueryId
‡‡ 
=
‡‡ 
item
‡‡ "
.
‡‡" #
QueryId
‡‡# *
,
‡‡* +
Title
ˆˆ 
=
ˆˆ 
item
ˆˆ  
.
ˆˆ  !
Title
ˆˆ! &
,
ˆˆ& '
content
‰‰ 
=
‰‰ 
item
‰‰ "
.
‰‰" #
Content
‰‰# *
,
‰‰* +
IsSolved
ŠŠ 
=
ŠŠ 
item
ŠŠ #
.
ŠŠ# $
IsSolved
ŠŠ$ ,
}
‹‹ 
)
‹‹ 
;
‹‹ 
}
ŒŒ 
catch
 
(
 
	Exception
 
	exception
 &
)
& '
{
 
_logger
 
.
 
LogError
  
(
  !
HelperService
! .
.
. /
LoggerMessage
/ <
(
< =
$str
= K
,
K L
$str
M h
,
h i
	exception
j s
,
s t
IsSolved
u }
)
} ~
)
~ 
; €
throw
 
;
 
}
‘‘ 
}
’’ 	
public
•• 
bool
•• 
CreateComment
•• !
(
••! "
QueryComment
••" .
comment
••/ 6
)
••6 7
{
–– 	

Validation
—— 
.
—— 
ValidateComment
—— &
(
——& '
comment
——' .
)
——. /
;
——/ 0
try
˜˜ 
{
™™ 
comment
šš 
.
šš 
	CreatedOn
šš !
=
šš! "
DateTime
šš" *
.
šš* +
Now
šš+ .
;
šš. /
comment
›› 
.
›› 
Datetime
›› !
=
››! "
DateTime
››" *
.
››* +
Now
››+ .
;
››. /
return
œœ 
database
œœ 
.
œœ  

AddComment
œœ  *
(
œœ* +
comment
œœ+ 2
)
œœ2 3
;
œœ3 4
}
 
catch
 
(
 
	Exception
 
	exception
 &
)
& '
{
ŸŸ 
_logger
   
.
   
LogError
    
(
    !
HelperService
  ! .
.
  . /
LoggerMessage
  / <
(
  < =
$str
  = K
,
  K L
$str
  M r
,
  r s
	exception
  t }
,
  } ~
comment   †
)  † ‡
)  ‡ ˆ
;  ˆ ‰
return
¡¡ 
false
¡¡ 
;
¡¡ 
}
¢¢ 
}
££ 	
public
¥¥ 
IEnumerable
¥¥ 
<
¥¥ 
Object
¥¥ !
>
¥¥! "
GetComments
¥¥# .
(
¥¥. /
int
¥¥/ 2
QueryId
¥¥3 :
)
¥¥: ;
{
¦¦ 	
if
§§ 
(
§§ 
QueryId
§§ 
<=
§§ 
$num
§§ 
)
§§ 
throw
§§ #
new
§§$ '
ArgumentException
§§( 9
(
§§9 :
$"
§§: <
$str
§§< j
{
§§j k
QueryId
§§k r
}
§§r s
"
§§s t
)
§§t u
;
§§u v
try
¨¨ 
{
©© 
var
ªª 
ListOfComments
ªª "
=
ªª# $
database
ªª% -
.
ªª- .
GetComments
ªª. 9
(
ªª9 :
)
ªª: ;
.
ªª; <
Where
ªª< A
(
ªªA B
comment
ªªB I
=>
ªªJ L
comment
ªªM T
.
ªªT U
QueryId
ªªU \
==
ªª] _
QueryId
ªª` g
)
ªªg h
;
ªªh i
return
«« 
ListOfComments
«« %
.
««% &
Select
««& ,
(
««, -
item
««- 1
=>
««2 4
new
««5 8
{
¬¬ 
	CommentId
­­ 
=
­­ 
item
­­  $
.
­­$ %
QueryCommentId
­­% 3
,
­­3 4
Message
®® 
=
®® 
item
®® "
.
®®" #
Comment
®®# *
,
®®* +
Name
¯¯ 
=
¯¯ 
item
¯¯ 
.
¯¯  
User
¯¯  $
?
¯¯$ %
.
¯¯% &
FullName
¯¯& .
,
¯¯. /
QueryId
°° 
=
°° 
item
°° "
.
°°" #
QueryId
°°# *
}
±± 
)
±± 
;
±± 
}
³³ 
catch
´´ 
(
´´ 
	Exception
´´ 
	exception
´´ &
)
´´& '
{
µµ 
_logger
¶¶ 
.
¶¶ 
LogError
¶¶  
(
¶¶  !
HelperService
¶¶! .
.
¶¶. /
LoggerMessage
¶¶/ <
(
¶¶< =
$str
¶¶= K
,
¶¶K L
$str
¶¶M g
,
¶¶g h
	exception
¶¶i r
,
¶¶r s
QueryId
¶¶t {
)
¶¶{ |
)
¶¶| }
;
¶¶} ~
throw
·· 
;
·· 
}
¸¸ 
}
ºº 	
public
¾¾ 
bool
¾¾ 
ChangeSpamStatus
¾¾ 
(
¾¾ 
int
¾¾ !
QueryId
¾¾" )
,
¾¾) *
int
¾¾+ .
VerifyStatusID
¾¾/ =
)
¾¾= >
{
¿¿ 	
if
ÀÀ 
(
ÀÀ 
QueryId
ÀÀ 
<=
ÀÀ 
$num
ÀÀ 
)
ÀÀ 
throw
ÀÀ #
new
ÀÀ$ '
ArgumentException
ÀÀ( 9
(
ÀÀ9 :
$"
ÀÀ: <
$str
ÀÀ< k
{
ÀÀk l
QueryId
ÀÀl s
}
ÀÀs t
"
ÀÀt u
)
ÀÀu v
;
ÀÀv w
if
ÁÁ 
(
ÁÁ 
VerifyStatusID
ÁÁ 
<=
ÁÁ  
$num
ÁÁ! "
||
ÁÁ# %
VerifyStatusID
ÁÁ& 4
>
ÁÁ5 6
$num
ÁÁ7 8
)
ÁÁ8 9
throw
ÁÁ9 >
new
ÁÁ? B
ArgumentException
ÁÁC T
(
ÁÁT U
$"
ÁÁU W
$strÁÁW £
{ÁÁ£ ¤
VerifyStatusIDÁÁ¤ ²
}ÁÁ² ³
"ÁÁ³ ´
)ÁÁ´ µ
;ÁÁµ ¶
try
ÂÂ 
{
ÃÃ 
var
ÄÄ "
IsChangeSuccessfully
ÄÄ (
=
ÄÄ) *
database
ÄÄ+ 3
.
ÄÄ3 4

UpdateSpam
ÄÄ4 >
(
ÄÄ> ?
QueryId
ÄÄ? F
,
ÄÄF G
VerifyStatusID
ÄÄI W
)
ÄÄW X
;
ÄÄX Y
if
ÅÅ 
(
ÅÅ "
IsChangeSuccessfully
ÅÅ (
)
ÅÅ( )
_mailService
ÅÅ* 6
?
ÅÅ6 7
.
ÅÅ7 8
SendEmailAsync
ÅÅ8 F
(
ÅÅF G
HelperService
ÅÅG T
.
ÅÅT U
SpamMail
ÅÅU ]
(
ÅÅ] ^
$str
ÅÅ^ x
,
ÅÅx y
$strÅÅy €
,ÅÅ€ 
$strÅÅ‚ ‰
,ÅÅŠ ‹
$numÅÅŒ 
)ÅÅ 
)ÅÅ 
;ÅÅ 
return
ÆÆ "
IsChangeSuccessfully
ÆÆ +
;
ÆÆ+ ,
}
ÇÇ 
catch
ÈÈ 
(
ÈÈ 
	Exception
ÈÈ 
	exception
ÈÈ &
)
ÈÈ& '
{
ÉÉ 
_logger
ÊÊ 
.
ÊÊ 
LogError
ÊÊ  
(
ÊÊ  !
HelperService
ÊÊ! .
.
ÊÊ. /
LoggerMessage
ÊÊ/ <
(
ÊÊ< =
$"
ÊÊ= ?
$str
ÊÊ? K
"
ÊÊK L
,
ÊÊL M
$strÊÊN 
,ÊÊ ‚
	exceptionÊÊƒ Œ
,ÊÊŒ 
QueryIdÊÊ •
,ÊÊ• –
VerifyStatusIDÊÊ– ¤
)ÊÊ¤ ¥
)ÊÊ¥ ¦
;ÊÊ¦ §
throw
ËË 
;
ËË 
}
ÌÌ 
}
ÍÍ 	
public
ĞĞ 
bool
ĞĞ 
AddSpam
ĞĞ 
(
ĞĞ 
Spam
ĞĞ  
spam
ĞĞ! %
)
ĞĞ% &
{
ÑÑ 	

Validation
ÒÒ	 
.
ÒÒ 
ValidateSpam
ÒÒ  
(
ÒÒ  !
spam
ÒÒ! %
)
ÒÒ% &
;
ÒÒ& '
try
ÓÓ 
{
ÔÔ 
return
ÕÕ 
database
ÕÕ 
.
ÕÕ  
AddSpam
ÕÕ  '
(
ÕÕ' (
spam
ÕÕ( ,
)
ÕÕ, -
;
ÕÕ- .
}
ÖÖ 
catch
×× 
(
×× 
	Exception
×× 
	exception
×× &
)
××& '
{
ØØ 
_logger
ÙÙ 
.
ÙÙ 
LogError
ÙÙ  
(
ÙÙ  !
HelperService
ÙÙ! .
.
ÙÙ. /
LoggerMessage
ÙÙ/ <
(
ÙÙ< =
$str
ÙÙ= K
,
ÙÙK L
$str
ÙÙM o
,
ÙÙo p
	exception
ÙÙq z
,
ÙÙz {
spamÙÙ| €
)ÙÙ€ 
)ÙÙ ‚
;ÙÙ‚ ƒ
return
ÚÚ 
false
ÚÚ 
;
ÚÚ 
}
ÛÛ 
}
ÜÜ 	
public
ßß 
IEnumerable
ßß 
<
ßß 
object
ßß !
>
ßß! "
GetSpams
ßß# +
(
ßß+ ,
int
ßß, /
VerifyStatusID
ßß0 >
)
ßß> ?
{
àà 	
if
áá 
(
áá 
VerifyStatusID
áá 
<=
áá  
$num
áá  !
||
áá" $
VerifyStatusID
áá% 3
>
áá4 5
$num
áá6 7
)
áá7 8
throw
áá9 >
new
áá? B
ArgumentException
ááC T
(
ááT U
$strááU Ÿ
)ááŸ  
;áá  ¡
try
ââ 
{
ãã 
var
ää 
Spams
ää 
=
ää 
database
ää $
.
ää$ %
GetSpams
ää% -
(
ää- .
)
ää. /
.
ää/ 0
Where
ää0 5
(
ää5 6
item
ää6 :
=>
ää; =
item
ää= A
.
ääA B
VerifyStatusID
ääB P
==
ääP R
VerifyStatusID
ääR `
)
ää` a
.
ääa b
GroupBy
ääb i
(
ääi j
item
ääj n
=>
ääo q
item
äär v
.
ääv w
QueryId
ääw ~
)
ää~ 
.ää €!
OrderByDescendingää€ ‘
(ää‘ ’
itemää’ –
=>ää– ˜
itemää˜ œ
.ääœ 
Countää ¢
(ää¢ £
)ää£ ¤
)ää¤ ¥
.ää¥ ¦
Selectää¦ ¬
(ää¬ ­
itemää­ ±
=>ää² ´
newää´ ·
{ää· ¸
ListOfSpams
åå 
=
åå 
item
åå !
.
åå! "
Select
åå" (
(
åå( )
spam
åå) -
=>
åå. 0
new
åå0 3
{
åå4 5
Name
ææ 
=
ææ 
spam
ææ 
.
ææ 
User
ææ #
?
ææ# $
.
ææ$ %
FullName
ææ% -
,
ææ- .
Reason
çç 
=
çç 
spam
çç 
.
çç  
Reason
çç  &
}
èè 
)
èè 
,
èè 
Query
éé 
=
éé 
new
éé 
{
éé 
QueryId
êê 
=
êê 
item
êê  
.
êê  !
First
êê! &
(
êê& '
)
êê' (
.
êê( )
QueryId
êê) 0
,
êê0 1
Content
ëë 
=
ëë 
item
ëë  
.
ëë  !
First
ëë! &
(
ëë& '
)
ëë' (
.
ëë( )
Query
ëë) .
?
ëë. /
.
ëë/ 0
Content
ëë0 7
,
ëë7 8
Title
ìì 
=
ìì 
item
ìì 
.
ìì 
First
ìì $
(
ìì$ %
)
ìì% &
.
ìì& '
Query
ìì' ,
?
ìì, -
.
ìì- .
Title
ìì. 3
}
íí 
}
íí 
)
íí 
;
íí 
return
îî 
Spams
îî 
;
îî 
}
ïï 
catch
ğğ 
(
ğğ 
	Exception
ğğ 
	exception
ğğ &
)
ğğ& '
{
ññ 
_logger
òò 
.
òò 
LogError
òò  
(
òò  !
HelperService
òò! .
.
òò. /
LoggerMessage
òò/ <
(
òò< =
$str
òò= K
,
òòK L
$str
òòM Y
,
òòY Z
	exception
òò[ d
)
òòd e
)
òòe f
;
òòf g
throw
óó 
;
óó 
}
ôô 
}
õõ 	
}
öö 
}÷÷ ï8
RC:\Users\manimaran.venkat\Documents\Backup\AspireOverflow\Services\TokenService.cs
	namespace		 	
AspireOverflow		
 
.		 
Services		 !
{

 
public 

class 
TokenService 
: 
ITokenService  -
{ 
private 
readonly 
IConfiguration '
_configuration( 6
;6 7
private 
readonly 
IUserService %
_userService& 2
;2 3
private 
readonly 
ILogger  
<  !
TokenService! -
>- .
_logger/ 6
;6 7
public 
TokenService 
( 
IConfiguration *
configuration+ 8
,8 9
IUserService: F
userServiceG R
,R S
ILoggerT [
<[ \
TokenService\ h
>h i
loggerj p
)p q
{ 	
_configuration 
= 
configuration *
;* +
_userService 
= 
userService &
;& '
_logger 
= 
logger 
; 
} 	
public 
object 
GenerateToken #
(# $
Login$ )
Credentials* 5
)5 6
{ 	
if 
( 
Credentials 
== 
null "
)# $
throw$ )
new* -
ArgumentException. ?
(? @
$str@ \
)\ ]
;] ^
if 
( 
! 

Validation 
. #
ValidateUserCredentials 2
(2 3
Credentials3 >
.> ?
Email? D
!D E
,E F
CredentialsF Q
.Q R
PasswordR Z
!Z [
)[ \
)\ ]
throw^ c
newd g
ArgumentExceptionh y
(y z
$str	z ‘
)
‘ ’
;
’ “
var 
user 
= 
_userService #
.# $
GetUser$ +
(+ ,
Credentials, 7
.7 8
Email8 =
!= >
,> ?
Credentials@ K
.K L
PasswordL T
!T U
)U V
;V W
if 
( 
user 
== 
null 
) 
throw #
new$ '
ArgumentException( 9
(9 :
$str: V
)V W
;W X
try 
{   
var"" 
claims"" 
="" 
new""  
[""  !
]""! "
{""# $
new## 
Claim## !
(##! "#
JwtRegisteredClaimNames##" 9
.##9 :
Sub##: =
,##= >
_configuration##? M
[##M N
$str##N [
]##[ \
)##\ ]
,##] ^
new$$ 
Claim$$ !
($$! "#
JwtRegisteredClaimNames$$" 9
.$$9 :
Jti$$: =
,$$= >
Guid$$? C
.$$C D
NewGuid$$D K
($$K L
)$$L M
.$$M N
ToString$$N V
($$V W
)$$W X
)$$X Y
,$$Y Z
new%% 
Claim%% !
(%%! "#
JwtRegisteredClaimNames%%" 9
.%%9 :
Iat%%: =
,%%= >
DateTime%%? G
.%%G H
UtcNow%%H N
.%%N O
ToString%%O W
(%%W X
)%%X Y
)%%Y Z
,%%Z [
new&& 
Claim&& !
(&&! "

ClaimTypes&&" ,
.&&, -
Email&&- 2
,&&2 3
user&&3 7
.&&7 8
EmailAddress&&8 D
)&&D E
,&&E F
new'' 
Claim'' !
(''! "
$str''" *
,''* +
user''+ /
.''/ 0
UserId''0 6
.''6 7
ToString''7 ?
(''? @
)''@ A
)''A B
,''B C
new(( 
Claim(( !
(((! "

ClaimTypes((" ,
.((, -
Role((- 1
,((1 2
user((2 6
.((6 7

UserRoleId((7 A
.((A B
ToString((B J
(((J K
)((K L
)((L M
,((M N
new)) 
Claim)) !
())! "
$str))" .
,)). /
user))/ 3
.))3 4

IsReviewer))4 >
.))> ?
ToString))? G
())G H
)))H I
)))I J
}** 
;** 
var,, 
key,, 
=,, 
new,,  
SymmetricSecurityKey,, 2
(,,2 3
Encoding,,3 ;
.,,; <
UTF8,,< @
.,,@ A
GetBytes,,A I
(,,I J
_configuration,,J X
[,,X Y
$str,,Y b
],,b c
),,c d
),,d e
;,,e f
var-- 
signIn-- 
=-- 
new--  
SigningCredentials--! 3
(--3 4
key--4 7
,--7 8
SecurityAlgorithms--9 K
.--K L

HmacSha256--L V
)--V W
;--W X
var.. 
token.. 
=.. 
new.. 
JwtSecurityToken..  0
(..0 1
_configuration// "
[//" #
$str//# /
]/// 0
,//0 1
_configuration00 "
[00" #
$str00# 1
]001 2
,002 3
claims11 
,11 
expires22 
:22 
DateTime22 %
.22% &
UtcNow22& ,
.22, -

AddMinutes22- 7
(227 8
$num228 ;
)22; <
,22< =
signingCredentials33 &
:33& '
signIn33( .
)33. /
;33/ 0
var55 
Result55 
=55 
new55  
{66 
token77 
=77 
new77 #
JwtSecurityTokenHandler77  7
(777 8
)778 9
.779 :

WriteToken77: D
(77D E
token77E J
)77J K
,77K L
ExpiryInMinutes88 #
=88$ %
$num88& )
,88) *
IsAdmin99 
=99 
user99 "
.99" #

UserRoleId99# -
==99. 0
$num991 2
,992 3

IsReviewer:: 
=::  
user::! %
.::% &

IsReviewer::& 0
,::0 1

IsVerified;; 
=;;  
user;;! %
.;;% &
VerifyStatus;;& 2
?;;2 3
.;;3 4
Name;;4 8
}<< 
;<< 
return>> 
Result>> 
;>> 
}@@ 
catchAA 
(AA 
	ExceptionAA 
	exceptionAA &
)AA& '
{BB 
_loggerCC 
.CC 
LogErrorCC  
(CC  !
HelperServiceCC! .
.CC. /
LoggerMessageCC/ <
(CC< =
$strCC= K
,CCK L
$strCCM |
,CC| }
	exception	CC~ ‡
,
CC‡ ˆ
Credentials
CC‰ ”
)
CC” •
)
CC• –
;
CC– —
throwDD 
;DD 
}FF 
}GG 	
}HH 
}II ëÙ
QC:\Users\manimaran.venkat\Documents\Backup\AspireOverflow\Services\UserService.cs
	namespace		 	
AspireOverflow		
 
.		 
Services		 !
{

 
public 

class 
UserService 
: 
IUserService +
{ 
private 
readonly 
IUserRepository (
database) 1
;1 2
private 
readonly 
ILogger  
<  !
UserService! ,
>, -
_logger. 5
;5 6
public 
UserService 
( 
ILogger "
<" #
UserService# .
>. /
logger0 6
,6 7
IUserRepository8 G
_userRepositoryH W
)W X
{ 	
_logger 
= 
logger 
; 
database 
= 
_userRepository &
;& '
} 	
public 
bool 

CreateUser 
( 
User #
user$ (
)( )
{ 	

Validation 
. 
ValidateUser #
(# $
user$ (
)( )
;) *
try 
{ 
user 
. 
Password 
= !
PasswordHasherFactory  5
.5 6$
GetPasswordHasherFactory6 N
(N O
)O P
.P Q
HashPasswordQ ]
(] ^
user^ b
,b c
userd h
.h i
Passwordi q
)q r
;r s
return   
database   
.    

CreateUser    *
(  * +
user  + /
)  / 0
;  0 1
}!! 
catch"" 
("" 
ValidationException"" &
	exception""' 0
)""0 1
{## 
_logger$$ 
.$$ 
LogError$$  
($$  !
HelperService$$! .
.$$. /
LoggerMessage$$/ <
($$< =
$str$$= J
,$$J K
$str$$L c
,$$c d
	exception$$e n
,$$n o
user$$p t
)$$t u
)$$u v
;$$v w
throw%% 
;%% 
}&& 
catch'' 
('' 
	Exception'' 
	exception'' &
)''& '
{(( 
_logger)) 
.)) 
LogError))  
())  !
HelperService))! .
.)). /
LoggerMessage))/ <
())< =
$str))= J
,))J K
$str))L c
,))c d
	exception))e n
,))n o
user))p t
)))t u
)))u v
;))v w
return** 
false** 
;** 
}++ 
},, 	
public.. 
bool.. 

RemoveUser.. 
(.. 
int.. "
UserId..# )
)..) *
{// 	
if00 
(00 
UserId00 
<=00 
$num00 
)00 
throw00 "
new00# &
ArgumentException00' 8
(008 9
$"009 ;
$str00; g
{00g h
UserId00h n
}00n o
"00o p
)00p q
;00q r
try11 
{22 
return33 
database33 
.33  

RemoveUser33  *
(33* +
UserId33+ 1
)331 2
;332 3
}44 
catch55 
(55 
	Exception55 
	exception55 &
)55& '
{66 
_logger77 
.77 
LogError77  
(77  !
HelperService77! .
.77. /
LoggerMessage77/ <
(77< =
$str77= J
,77J K
$str77L d
,77d e
	exception77f o
,77o p
UserId77q w
)77w x
)77x y
;77y z
return88 
false88 
;88 
}99 
};; 	
public== 
bool== "
UpdateUserByIsReviewer== *
(==* +
int==+ .
UserId==/ 5
,==5 6
bool==7 ;

IsReviewer==< F
)==F G
{>> 	
if?? 
(?? 
UserId?? 
<=?? 
$num?? 
)?? 
throw?? "
new??# &
ArgumentException??' 8
(??8 9
$"??9 ;
$str??; g
{??g h
UserId??h n
}??n o
"??o p
)??p q
;??q r
try@@ 
{AA 
returnBB 
databaseBB 
.BB   
UpdateUserByReviewerBB  4
(BB4 5
UserIdBB5 ;
,BB; <

IsReviewerBB= G
)BBG H
;BBH I
}DD 
catchEE 
(EE 
	ExceptionEE 
	exceptionEE &
)EE& '
{FF 
_loggerGG 
.GG 
LogErrorGG  
(GG  !
HelperServiceGG! .
.GG. /
LoggerMessageGG/ <
(GG< =
$strGG= J
,GGJ K
$str	GGL €
,
GG€ 
	exception
GG‚ ‹
,
GG‹ Œ
UserId
GG “
)
GG“ ”
)
GG” •
;
GG• –
returnHH 
falseHH 
;HH 
}II 
}LL 	
publicNN 
UserNN 
GetUserNN 
(NN 
stringNN "
EmailNN# (
,NN( )
stringNN* 0
PasswordNN1 9
)NN9 :
{OO 	
ifPP 
(PP 
EmailPP 
==PP 
nullPP 
||PP  
PasswordPP! )
==PP* ,
nullPP- 1
)PP1 2
throwPP3 8
newPP9 <
ArgumentExceptionPP= N
(PPN O
$strPPO q
)PPq r
;PPr s
tryQQ 
{RR 
varSS 
HasherSS 
=SS !
PasswordHasherFactorySS 2
.SS2 3$
GetPasswordHasherFactorySS3 K
(SSK L
)SSL M
;SSM N
varTT 
UserTT 
=TT 
GetUsersTT #
(TT# $
)TT$ %
.TT% &
ToListTT& ,
(TT, -
)TT- .
.TT. /
FindTT/ 3
(TT3 4
userTT4 8
=>TT9 ;
userTT< @
.TT@ A
EmailAddressTTA M
==TTN P
EmailTTQ V
)TTV W
;TTW X
ifUU 
(UU 
UserUU 
==UU 
nullUU  
)UU  !
throwUU" '
newUU( +
ValidationExceptionUU, ?
(UU? @
$strUU@ O
)UUO P
;UUP Q
returnVV 
HasherVV 
.VV  
VerifyHashedPasswordVV 2
(VV2 3
UserVV3 7
,VV7 8
UserVV9 =
.VV= >
PasswordVV> F
,VVF G
PasswordVVH P
)VVP Q
==VVR T&
PasswordVerificationResultVVU o
.VVo p
SuccessVVp w
?VVx y
UserVVz ~
:	VV €
throw
VV †
new
VV‡ Š"
InvalidDataException
VV‹ Ÿ
(
VVŸ  
$str
VV  ¸
)
VV¸ ¹
;
VV¹ º
}WW 
catchXX 
(XX 
	ExceptionXX 
	exceptionXX &
)XX& '
{YY 
_loggerZZ 
.ZZ 
LogErrorZZ  
(ZZ  !
HelperServiceZZ! .
.ZZ. /
LoggerMessageZZ/ <
(ZZ< =
$strZZ= O
,ZZO P
$strZZQ y
,ZZy z
	exception	ZZ{ „
,
ZZ„ …
Email
ZZ† ‹
)
ZZ‹ Œ
)
ZZŒ 
;
ZZ 
throw\\ 
;\\ 
}]] 
}^^ 	
public`` 
object`` 
GetUserByID`` !
(``! "
int``" %
UserID``& ,
)``, -
{aa 	
ifbb 
(bb 
UserIDbb 
<=bb 
$numbb 
)bb 
throwbb "
newbb# &
ArgumentExceptionbb' 8
(bb8 9
$"bb9 ;
$strbb; g
{bbg h
UserIDbbh n
}bbn o
"bbo p
)bbp q
;bbq r
trycc 
{dd 
varee 
Useree 
=ee 
databaseee #
.ee# $
GetUserByIDee$ /
(ee/ 0
UserIDee0 6
)ee6 7
;ee7 8
returnff 
newff 
{gg 
UserIdhh 
=hh 
Userhh !
.hh! "
UserIdhh" (
,hh( )
fullNameii 
=ii 
Userii #
.ii# $
FullNameii$ ,
,ii, -

EmployeeIdjj 
=jj  
Userjj! %
.jj% &
	AceNumberjj& /
,jj/ 0
emailkk 
=kk 
Userkk  
.kk  !
EmailAddresskk! -
,kk- .
DateOfBirthll 
=ll  !
Userll" &
.ll& '
DateOfBirthll' 2
,ll2 3
Designationmm 
=mm  !
Usermm" &
.mm& '
Designationmm' 2
?mm2 3
.mm3 4
DesignationNamemm4 C
,mmC D

Departmentnn 
=nn  
GetDepartmentByIDnn! 2
(nn2 3
Usernn3 7
.nn7 8
DesignationIdnn8 E
)nnE F
,nnF G
Genderoo 
=oo 
Useroo !
.oo! "
Genderoo" (
?oo( )
.oo) *
Nameoo* .
,oo. /

IsReviewerpp 
=pp  
Userpp! %
.pp% &

IsReviewerpp& 0
}rr 
;rr 
}ss 
catchtt 
(tt 
	Exceptiontt 
	exceptiontt &
)tt& '
{uu 
_loggervv 
.vv 
LogErrorvv  
(vv  !
HelperServicevv! .
.vv. /
LoggerMessagevv/ <
(vv< =
$strvv= J
,vvJ K
$strvvL f
,vvf g
	exceptionvvh q
,vvq r
UserIDvvs y
)vvy z
)vvz {
;vv{ |
throwww 
;ww 
}xx 
}yy 	
publiczz 
IEnumerablezz 
<zz 
Userzz 
>zz  
GetUserszz! )
(zz) *
)zz* +
{{{ 	
try|| 
{}} 
return~~ 
database~~ 
.~~  
GetUsers~~  (
(~~( )
)~~) *
;~~* +
} 
catch
€€ 
(
€€ 
	Exception
€€ 
	exception
€€ &
)
€€& '
{
 
_logger
‚‚ 
.
‚‚ 
LogError
‚‚  
(
‚‚  !
HelperService
‚‚! .
.
‚‚. /
LoggerMessage
‚‚/ <
(
‚‚< =
$str
‚‚= J
,
‚‚J K
$str
‚‚L X
,
‚‚X Y
	exception
‚‚Z c
)
‚‚c d
)
‚‚d e
;
‚‚e f
throw
ƒƒ 
;
ƒƒ 
}
„„ 
}
…… 	
public
‡‡ 
IEnumerable
‡‡ 
<
‡‡ 
Object
‡‡ !
>
‡‡! "$
GetUsersByVerifyStatus
‡‡# 9
(
‡‡9 :
int
‡‡: =
VerifyStatusID
‡‡> L
)
‡‡L M
{
ˆˆ 	
if
‰‰ 
(
‰‰ 
VerifyStatusID
‰‰ 
<=
‰‰ !
$num
‰‰" #
||
‰‰$ &
VerifyStatusID
‰‰' 5
>
‰‰6 7
$num
‰‰8 9
)
‰‰9 :
throw
‰‰; @
new
‰‰A D
ArgumentException
‰‰E V
(
‰‰V W
$str‰‰W 
)‰‰ 
;‰‰ 
try
ŠŠ 
{
‹‹ 
return
ŒŒ 
GetUsers
ŒŒ 
(
ŒŒ  
)
ŒŒ  !
.
ŒŒ! "
Where
ŒŒ" '
(
ŒŒ' (
User
ŒŒ( ,
=>
ŒŒ- /
User
ŒŒ0 4
.
ŒŒ4 5
VerifyStatusID
ŒŒ5 C
==
ŒŒD F
VerifyStatusID
ŒŒG U
)
ŒŒU V
.
ŒŒV W
Select
ŒŒW ]
(
ŒŒ] ^
User
ŒŒ^ b
=>
ŒŒc e
new
ŒŒf i
{
 
UserId
 
=
 
User
 !
.
! "
UserId
" (
,
( )
fullName
 
=
 
User
 #
.
# $
FullName
$ ,
,
, -

EmployeeId
 
=
  
User
! %
.
% &
	AceNumber
& /
,
/ 0
Email
‘‘ 
=
‘‘ 
User
‘‘  
.
‘‘  !
EmailAddress
‘‘! -
,
‘‘- .
DateOfBirth
’’ 
=
’’  !
User
’’" &
.
’’& '
DateOfBirth
’’' 2
,
’’2 3
Designation
““ 
=
““  !
User
““" &
.
““& '
Designation
““' 2
?
““2 3
.
““3 4
DesignationName
““4 C
,
““C D

Department
”” 
=
””  
GetDepartmentByID
””! 2
(
””2 3
User
””3 7
.
””7 8
DesignationId
””8 E
)
””E F
,
””F G
Gender
•• 
=
•• 
User
•• !
.
••! "
Gender
••" (
?
••( )
.
••) *
Name
••* .
,
••. /

IsReviewer
–– 
=
––  
User
––! %
.
––% &

IsReviewer
––& 0
}
˜˜ 
)
˜˜ 
;
˜˜ 
}
™™ 
catch
šš 
(
šš 
	Exception
šš 
	exception
šš &
)
šš& '
{
›› 
_logger
œœ 
.
œœ 
LogError
œœ  
(
œœ  !
HelperService
œœ! .
.
œœ. /
LoggerMessage
œœ/ <
(
œœ< =
$str
œœ= J
,
œœJ K
$str
œœL x
,
œœx y
	exceptionœœz ƒ
,œœƒ „
VerifyStatusIDœœ… “
)œœ“ ”
)œœ” •
;œœ• –
throw
 
;
 
}
 
}
ŸŸ 	
public
££ 
IEnumerable
££ 
<
££ 
Object
££ !
>
££! ""
GetUsersByUserRoleID
££# 7
(
££7 8
int
££8 ;

UserRoleID
££< F
)
££F G
{
¤¤ 	
if
¥¥ 
(
¥¥ 

UserRoleID
¥¥ 
<=
¥¥ 
$num
¥¥ 
||
¥¥  "

UserRoleID
¥¥# -
>
¥¥. /
$num
¥¥0 1
)
¥¥1 2
throw
¥¥3 8
new
¥¥9 <
ArgumentException
¥¥= N
(
¥¥N O
$"
¥¥O Q
$str¥¥Q †
{¥¥† ‡

UserRoleID¥¥‡ ‘
}¥¥‘ ’
"¥¥’ “
)¥¥“ ”
;¥¥” •
try
¦¦ 
{
§§ 
return
¨¨ 
GetUsers
¨¨ 
(
¨¨  
)
¨¨  !
.
¨¨! "
Where
¨¨" '
(
¨¨' (
user
¨¨( ,
=>
¨¨- /
user
¨¨0 4
.
¨¨4 5

UserRoleId
¨¨5 ?
==
¨¨@ B

UserRoleID
¨¨C M
&&
¨¨N P
user
¨¨Q U
.
¨¨U V
VerifyStatusID
¨¨V d
==
¨¨e g
$num
¨¨h i
)
¨¨i j
.
¨¨j k
Select
¨¨k q
(
¨¨q r
User
¨¨r v
=>
¨¨w y
new
¨¨z }
{
©© 
UserId
ªª 
=
ªª 
User
ªª !
.
ªª! "
UserId
ªª" (
,
ªª( )
fullName
«« 
=
«« 
User
«« #
.
««# $
FullName
««$ ,
,
««, -

EmployeeId
¬¬ 
=
¬¬  
User
¬¬! %
.
¬¬% &
	AceNumber
¬¬& /
,
¬¬/ 0
Email
­­ 
=
­­ 
User
­­  
.
­­  !
EmailAddress
­­! -
,
­­- .
DateOfBirth
®® 
=
®®  !
User
®®" &
.
®®& '
DateOfBirth
®®' 2
,
®®2 3
Designation
¯¯ 
=
¯¯  !
User
¯¯" &
.
¯¯& '
Designation
¯¯' 2
?
¯¯2 3
.
¯¯3 4
DesignationName
¯¯4 C
,
¯¯C D

Department
°° 
=
°°  
GetDepartmentByID
°°! 2
(
°°2 3
User
°°3 7
.
°°7 8
DesignationId
°°8 E
)
°°E F
,
°°F G
Gender
±± 
=
±± 
User
±± !
.
±±! "
Gender
±±" (
?
±±( )
.
±±) *
Name
±±* .
,
±±. /

IsReviewer
²² 
=
²²  
User
²²! %
.
²²% &

IsReviewer
²²& 0
}
´´ 
)
´´ 
;
´´ 
}
µµ 
catch
¶¶ 
(
¶¶ 
	Exception
¶¶ 
	exception
¶¶ &
)
¶¶& '
{
·· 
_logger
¸¸ 
.
¸¸ 
LogError
¸¸  
(
¸¸  !
HelperService
¸¸! .
.
¸¸. /
LoggerMessage
¸¸/ <
(
¸¸< =
$str
¸¸= J
,
¸¸J K
$str
¸¸L r
,
¸¸r s
	exception
¸¸t }
,
¸¸} ~

UserRoleID¸¸ ‰
)¸¸‰ Š
)¸¸Š ‹
;¸¸‹ Œ
throw
ºº 
;
ºº 
}
»» 
}
½½ 	
public
¿¿ 
bool
¿¿ *
ChangeUserVerificationStatus
¿¿ 0
(
¿¿0 1
int
¿¿1 4
UserID
¿¿5 ;
,
¿¿; <
int
¿¿= @
VerifyStatusID
¿¿A O
)
¿¿O P
{
ÀÀ 	
if
ÁÁ 
(
ÁÁ 
UserID
ÁÁ 
<=
ÁÁ 
$num
ÁÁ 
)
ÁÁ 
throw
ÁÁ "
new
ÁÁ# &
ArgumentException
ÁÁ' 8
(
ÁÁ8 9
$"
ÁÁ9 ;
$str
ÁÁ; h
{
ÁÁh i
UserID
ÁÁi o
}
ÁÁo p
"
ÁÁp q
)
ÁÁq r
;
ÁÁr s
if
ÂÂ 
(
ÂÂ 
VerifyStatusID
ÂÂ 
<=
ÂÂ !
$num
ÂÂ" #
||
ÂÂ$ &
VerifyStatusID
ÂÂ' 5
>
ÂÂ6 7
$num
ÂÂ8 9
)
ÂÂ9 :
throw
ÂÂ; @
new
ÂÂA D
ArgumentException
ÂÂE V
(
ÂÂV W
$"
ÂÂW Y
$strÂÂY —
{ÂÂ— ˜
VerifyStatusIDÂÂ˜ ¦
}ÂÂ¦ §
"ÂÂ§ ¨
)ÂÂ¨ ©
;ÂÂ© ª
try
ÃÃ 
{
ÄÄ 
return
ÅÅ 
database
ÅÅ 
.
ÅÅ  &
UpdateUserByVerifyStatus
ÅÅ  8
(
ÅÅ8 9
UserID
ÅÅ9 ?
,
ÅÅ? @
VerifyStatusID
ÅÅA O
)
ÅÅO P
;
ÅÅP Q
}
ÆÆ 
catch
ÇÇ 
(
ÇÇ 
	Exception
ÇÇ 
	exception
ÇÇ &
)
ÇÇ& '
{
ÈÈ 
_logger
ÉÉ 
.
ÉÉ 
LogError
ÉÉ  
(
ÉÉ  !
HelperService
ÉÉ! .
.
ÉÉ. /
LoggerMessage
ÉÉ/ <
(
ÉÉ< =
$str
ÉÉ= J
,
ÉÉJ K
$strÉÉL Š
,ÉÉŠ ‹
	exceptionÉÉŒ •
,ÉÉ• –
$"ÉÉ— ™
$strÉÉ™  
{ÉÉ  ¡
UserIDÉÉ¡ §
}ÉÉ§ ¨
$strÉÉ¨ ¸
{ÉÉ¸ ¹
VerifyStatusIDÉÉ¹ Ç
}ÉÉÇ È
"ÉÉÈ É
)ÉÉÉ Ê
)ÉÉÊ Ë
;ÉÉË Ì
throw
ÊÊ 
;
ÊÊ 
}
ËË 
}
ÌÌ 	
public
ĞĞ 
IEnumerable
ĞĞ 
<
ĞĞ 
Object
ĞĞ !
>
ĞĞ! ""
GetUsersByIsReviewer
ĞĞ# 7
(
ĞĞ7 8
bool
ĞĞ8 <

IsReviewer
ĞĞ= G
)
ĞĞG H
{
ÑÑ 	
try
ÒÒ 
{
ÓÓ 
return
ÔÔ 
GetUsers
ÔÔ 
(
ÔÔ  
)
ÔÔ  !
.
ÔÔ! "
Where
ÔÔ" '
(
ÔÔ' (
user
ÔÔ( ,
=>
ÔÔ- /
user
ÔÔ0 4
.
ÔÔ4 5

IsReviewer
ÔÔ5 ?
==
ÔÔ@ B

IsReviewer
ÔÔC M
&&
ÔÔN P
user
ÔÔQ U
.
ÔÔU V
VerifyStatusID
ÔÔV d
==
ÔÔe g
$num
ÔÔh i
)
ÔÔi j
.
ÔÔj k
Select
ÔÔk q
(
ÔÔq r
User
ÔÔr v
=>
ÔÔw y
new
ÔÔz }
{
ÕÕ 
UserId
ÖÖ 
=
ÖÖ 
User
ÖÖ !
.
ÖÖ! "
UserId
ÖÖ" (
,
ÖÖ( )
Name
×× 
=
×× 
User
×× 
.
××  
FullName
××  (
,
××( )

EmployeeId
ØØ 
=
ØØ  
User
ØØ! %
.
ØØ% &
	AceNumber
ØØ& /
,
ØØ/ 0
Email
ÙÙ 
=
ÙÙ 
User
ÙÙ  
.
ÙÙ  !
EmailAddress
ÙÙ! -
,
ÙÙ- .
DateOfBirth
ÚÚ 
=
ÚÚ  !
User
ÚÚ" &
.
ÚÚ& '
DateOfBirth
ÚÚ' 2
,
ÚÚ2 3
Designation
ÛÛ 
=
ÛÛ  !
User
ÛÛ" &
.
ÛÛ& '
Designation
ÛÛ' 2
?
ÛÛ2 3
.
ÛÛ3 4
DesignationName
ÛÛ4 C
,
ÛÛC D

Department
ÜÜ 
=
ÜÜ  
GetDepartmentByID
ÜÜ! 2
(
ÜÜ2 3
User
ÜÜ3 7
.
ÜÜ7 8
DesignationId
ÜÜ8 E
)
ÜÜE F
,
ÜÜF G
Gender
İİ 
=
İİ 
User
İİ !
.
İİ! "
Gender
İİ" (
?
İİ( )
.
İİ) *
Name
İİ* .
,
İİ. /

IsReviewer
ŞŞ 
=
ŞŞ  
User
ŞŞ! %
.
ŞŞ% &

IsReviewer
ŞŞ& 0
}
àà 
)
àà 
;
àà 
}
áá 
catch
ââ 
(
ââ 
	Exception
ââ 
	exception
ââ &
)
ââ& '
{
ãã 
_logger
ää 
.
ää 
LogError
ää  
(
ää  !
HelperService
ää! .
.
ää. /
LoggerMessage
ää/ <
(
ää< =
$str
ää= J
,
ääJ K
$str
ääL s
,
ääs t
	exception
ääu ~
,
ää~ 

IsReviewerää€ Š
)ääŠ ‹
)ää‹ Œ
;ääŒ 
throw
åå 
;
åå 
}
ææ 
}
çç 	
private
êê 
string
êê 
GetDepartmentByID
êê (
(
êê( )
int
êê) ,
DepartmentId
êê- 9
)
êê9 :
{
ëë 	
if
ìì 
(
ìì 
DepartmentId
ìì 
<=
ìì 
$num
ìì  !
)
ìì! "
throw
ìì# (
new
ìì) ,
ArgumentException
ìì- >
(
ìì> ?
$"
ìì? A
$str
ììA s
{
ììs t
DepartmentIdììt €
}ìì€ 
"ìì ‚
)ìì‚ ƒ
;ììƒ „
try
íí 
{
îî 
var
ïï 

department
ïï 
=
ïï  
database
ïï! )
.
ïï) *
GetDepartments
ïï* 8
(
ïï8 9
)
ïï9 :
.
ïï: ;
First
ïï; @
(
ïï@ A
item
ïïA E
=>
ïïF H
item
ïïI M
.
ïïM N
DepartmentId
ïïN Z
==
ïï[ ]
DepartmentId
ïï^ j
)
ïïj k
;
ïïk l
return
ğğ 

department
ğğ !
.
ğğ! "
DepartmentName
ğğ" 0
;
ğğ0 1
}
òò 
catch
óó 
(
óó 
	Exception
óó 
	exception
óó &
)
óó& '
{
ôô 
_logger
õõ 
.
õõ 
LogError
õõ  
(
õõ  !
HelperService
õõ! .
.
õõ. /
LoggerMessage
õõ/ <
(
õõ< =
$str
õõ= J
,
õõJ K
$str
õõL q
,
õõq r
	exception
õõs |
,
õõ| }
DepartmentIdõõ~ Š
)õõŠ ‹
)õõ‹ Œ
;õõŒ 
throw
öö 
;
öö 
}
÷÷ 
}
øø 	
public
úú 
IEnumerable
úú 
<
úú 
Object
úú !
>
úú! "

GetGenders
úú# -
(
úú- .
)
úú. /
{
ûû 	
try
üü 
{
ıı 
var
şş 
Genders
şş 
=
şş 
database
şş &
.
şş& '

GetGenders
şş' 1
(
şş1 2
)
şş2 3
.
şş3 4
Select
şş4 :
(
şş: ;
item
şş; ?
=>
şş@ B
new
şşC F
{
ÿÿ 
GenderId
€€ 
=
€€ 
item
€€ #
.
€€# $
GenderId
€€$ ,
,
€€, -
Name
 
=
 
item
 
.
  
Name
  $
}
‚‚ 
)
‚‚ 
;
‚‚ 
return
ƒƒ 
Genders
ƒƒ 
;
ƒƒ 
}
„„ 
catch
…… 
(
…… 
	Exception
…… 
	exception
…… &
)
……& '
{
†† 
_logger
‡‡ 
.
‡‡ 
LogError
‡‡  
(
‡‡  !
HelperService
‡‡! .
.
‡‡. /
LoggerMessage
‡‡/ <
(
‡‡< =
$str
‡‡= J
,
‡‡J K
$str
‡‡L [
,
‡‡[ \
	exception
‡‡] f
)
‡‡f g
)
‡‡g h
;
‡‡h i
throw
ˆˆ 
;
ˆˆ 
}
‰‰ 
}
ŠŠ 	
public
ŒŒ 
IEnumerable
ŒŒ 
<
ŒŒ 
Object
ŒŒ !
>
ŒŒ! "
GetDesignations
ŒŒ# 2
(
ŒŒ2 3
)
ŒŒ3 4
{
 	
try
 
{
 
var
 
designations
  
=
! "
database
# +
.
+ ,
GetDesignations
, ;
(
; <
)
< =
.
= >
Select
> D
(
D E
item
E I
=>
J L
new
M P
{
‘‘ 
DesignationId
’’ !
=
’’" #
item
’’$ (
.
’’( )
DesignationId
’’) 6
,
’’6 7
Name
““ 
=
““ 
item
““ 
.
““  
DesignationName
““  /
,
““/ 0
DepartmentId
””  
=
””! "
item
””# '
.
””' (
DepartmentId
””( 4
}
•• 
)
•• 
;
•• 
return
–– 
designations
–– #
;
––# $
}
—— 
catch
˜˜ 
(
˜˜ 
	Exception
˜˜ 
	exception
˜˜ &
)
˜˜& '
{
™™ 
_logger
šš 
.
šš 
LogError
šš  
(
šš  !
HelperService
šš! .
.
šš. /
LoggerMessage
šš/ <
(
šš< =
$str
šš= J
,
ššJ K
$str
ššL `
,
šš` a
	exception
ššb k
)
ššk l
)
ššl m
;
ššm n
throw
›› 
;
›› 
}
œœ 
}
 	
public
ŸŸ 
IEnumerable
ŸŸ 
<
ŸŸ 
object
ŸŸ !
>
ŸŸ! "
GetDepartments
ŸŸ# 1
(
ŸŸ1 2
)
ŸŸ2 3
{
   	
try
¡¡ 
{
¢¢ 
var
££ 
Departments
££ 
=
££  !
database
££" *
.
££* +
GetDepartments
££+ 9
(
££9 :
)
££: ;
.
££; <
Select
££< B
(
££B C
item
££C G
=>
££H J
new
££K N
{
¤¤ 
DepartmentId
¥¥  
=
¥¥! "
item
¥¥# '
.
¥¥' (
DepartmentId
¥¥( 4
,
¥¥4 5
Name
¦¦ 
=
¦¦ 
item
¦¦ 
.
¦¦  
DepartmentName
¦¦  .
}
§§ 
)
§§ 
;
§§ 
return
¨¨ 
Departments
¨¨ "
;
¨¨" #
}
©© 
catch
ªª 
(
ªª 
	Exception
ªª 
	exception
ªª &
)
ªª& '
{
«« 
_logger
¬¬ 
.
¬¬ 
LogError
¬¬  
(
¬¬  !
HelperService
¬¬! .
.
¬¬. /
LoggerMessage
¬¬/ <
(
¬¬< =
$str
¬¬= M
,
¬¬M N
$str
¬¬O b
,
¬¬b c
	exception
¬¬d m
)
¬¬m n
)
¬¬n o
;
¬¬o p
throw
­­ 
;
­­ 
}
®® 
}
¯¯ 	
}
³³ 
}µµ ¨g
[C:\Users\manimaran.venkat\Documents\Backup\AspireOverflow\Services\Validation\Validation.cs
	namespace 	
AspireOverflow
 
. 
Services !
{ 
public 

static 
class 

Validation "
{		 
public 
static 
bool 
ValidateQuery (
(( )
Query) .
query/ 4
)4 5
{ 	
if 
( 
query 
== 
null 
) 
throw $
new% (
ValidationException) <
(< =
$str= W
)W X
;X Y
else 
if 
( 
query 
. 
	CreatedBy $
<=% '
$num( )
)) *
throw+ 0
new1 4
ValidationException5 H
(H I
$strI o
)o p
;p q
else 
if 
( 
String 
. 
IsNullOrEmpty )
() *
query* /
./ 0
Title0 5
)5 6
)6 7
throw8 =
new> A
ValidationExceptionB U
(U V
$strV u
)u v
;v w
else 
if 
( 
String 
. 
IsNullOrEmpty )
() *
query* /
./ 0
Content0 7
)7 8
)8 9
throw: ?
new@ C
ValidationExceptionD W
(W X
$strX y
)y z
;z {
else 
if 
( 
query 
. 
Title  
.  !
Length! '
>( )
$num* -
)- .
throw/ 4
new5 8
ValidationException9 L
(L M
$strM y
)y z
;z {
else 
if 
( 
! 
query 
. 
IsActive $
)$ %
throw& +
new, /
ValidationException0 C
(C D
$strD [
)[ \
;\ ]
else 
if 
( 
query 
. 
IsSolved #
)$ %
throw& +
new, /
ValidationException0 C
(C D
$strD \
)\ ]
;] ^
else 
return 
true 
; 
} 	
public 
static 
bool 
ValidateComment *
(* +
QueryComment+ 7
Comment8 ?
)? @
{ 	
if 
( 
Comment 
== 
null 
)  
throw! &
new' *
ValidationException+ >
(> ?
$str? [
)[ \
;\ ]
else   
if   
(   
Comment   
.   
	CreatedBy   &
<=  ' )
$num  * +
)  + ,
throw  - 2
new  3 6
ValidationException  7 J
(  J K
$str  K n
)  n o
;  o p
else!! 
if!! 
(!! 
Comment!! 
.!! 
QueryId!! $
<=!!% '
$num!!( )
)!!) *
throw!!+ 0
new!!1 4
ValidationException!!5 H
(!!H I
$str!!I k
)!!k l
;!!l m
else"" 
if"" 
("" 
String"" 
."" 
IsNullOrEmpty"" )
("") *
Comment""* 1
.""1 2
Comment""2 9
)""9 :
)"": ;
throw""< A
new""B E
ValidationException""F Y
(""Y Z
$str""Z {
)""{ |
;""| }
else$$ 
return$$ 
true$$ 
;$$ 
}%% 	
public'' 
static'' 
bool'' 
ValidateArticle'' *
(''* +
Article''+ 2
article''3 :
)'': ;
{(( 	
if++ 
(++ 
article++ 
==++ 
null++ 
)++  
throw++! &
new++' *
ValidationException+++ >
(++> ?
$str++? [
)++[ \
;++\ ]
else,, 
if,, 
(,, 
article,, 
.,, 
	CreatedBy,, &
<=,,' )
$num,,* +
),,+ ,
throw,,- 2
new,,3 6
ValidationException,,7 J
(,,J K
$str,,K q
),,q r
;,,r s
else-- 
if-- 
(-- 
String-- 
.-- 
IsNullOrEmpty-- )
(--) *
article--* 1
.--1 2
Title--2 7
)--7 8
)--8 9
throw--: ?
new--@ C
ValidationException--D W
(--W X
$str--X w
)--w x
;--x y
else.. 
if.. 
(.. 
String.. 
... 
IsNullOrEmpty.. )
(..) *
article..* 1
...1 2
Content..2 9
)..9 :
)..: ;
throw..< A
new..B E
ValidationException..F Y
(..Y Z
$str..Z {
)..{ |
;..| }
else// 
if// 
(// 
article// 
.// 
Title// "
.//" #
Length//# )
>//* +
$num//, /
)/// 0
throw//1 6
new//7 :
ValidationException//; N
(//N O
$str//O |
)//| }
;//} ~
else00 
if00 
(00 
article00 
.00 
ArticleStatusID00 ,
<=00- /
$num000 1
&&002 4
article005 <
.00< =
ArticleStatusID00= L
>00M N
$num00O P
)00P Q
throw00R W
new00X [
ValidationException00\ o
(00o p
$str	00p •
)
00• –
;
00– —
else11 
return11 
true11 
;11 
}22 	
public44 
static44 
bool44 "
ValidateArticleComment44 1
(441 2
ArticleComment442 @
Comment44A H
)44H I
{55 	
if88 
(88 
Comment88 
==88 
null88 
)88  
throw88! &
new88' *
ValidationException88+ >
(88> ?
$str88? [
)88[ \
;88\ ]
else99 
if99 
(99 
Comment99 
.99 
	CreatedBy99 &
<=99' )
$num99* +
)99+ ,
throw99- 2
new993 6
ValidationException997 J
(99J K
$str99K n
)99n o
;99o p
else:: 
if:: 
(:: 
Comment:: 
.:: 
	ArticleId:: &
<=::' )
$num::* +
)::+ ,
throw::- 2
new::3 6
ValidationException::7 J
(::J K
$str::K o
)::o p
;::p q
else;; 
if;; 
(;; 
String;; 
.;; 
IsNullOrEmpty;; )
(;;) *
Comment;;* 1
.;;1 2
Comment;;2 9
);;9 :
);;: ;
throw;;< A
new;;B E
ValidationException;;F Y
(;;Y Z
$str;;Z {
);;{ |
;;;| }
else== 
return== 
true== 
;== 
}>> 	
publicDD 
staticDD 
boolDD 
ValidateUserDD '
(DD' (
UserDD( ,
userDD- 1
)DD1 2
{EE 	
ifII 
(II 
userII 
==II 
nullII 
)II 
throwII #
newII$ '
ValidationExceptionII( ;
(II; <
$strII< U
)IIU V
;IIV W
elseJJ 
ifJJ 
(JJ 
userJJ 
.JJ 
VerifyStatusIDJJ (
!=JJ) +
$numJJ, -
)JJ- .
throwJJ/ 4
newJJ5 8
ValidationExceptionJJ9 L
(JJL M
$"JJM O
$strJJO v
{JJv w
userJJw {
.JJ{ |
VerifyStatusID	JJ| Š
}
JJŠ ‹
"
JJ‹ Œ
)
JJŒ 
;
JJ 
elseKK 
ifKK 
(KK 
userKK 
.KK 

IsReviewerKK $
)KK$ %
throwKK& +
newKK, /
ValidationExceptionKK0 C
(KKC D
$"KKD F
$strKKF ^
"KK^ _
)KK_ `
;KK` a
elseLL 
ifLL 
(LL 
userLL 
.LL 
GenderIdLL "
<=LL# %
$numLL& '
&&LL( *
userLL+ /
.LL/ 0
GenderIdLL0 8
>LL9 :
$numLL; <
)LL< =
throwLL> C
newLLD G
ValidationExceptionLLH [
(LL[ \
$"LL\ ^
$strLL^ v
"LLv w
)LLw x
;LLx y
elseMM 
ifMM 
(MM 
userMM 
.MM 

UserRoleIdMM $
!=MM% '
$numMM( )
)MM) *
throwMM+ 0
newMM1 4
ValidationExceptionMM5 H
(MMH I
$"MMI K
$strMMK r
{MMr s
userMMs w
.MMw x

UserRoleId	MMx ‚
}
MM‚ ƒ
"
MMƒ „
)
MM„ …
;
MM… †
elseNN 
ifNN 
(NN 
!NN #
ValidateUserCredentialsNN ,
(NN, -
userNN- 1
.NN1 2
EmailAddressNN2 >
,NN> ?
userNN? C
.NNC D
PasswordNND L
)NNL M
)NNM N
returnNNO U
falseNNV [
;NN[ \
elseOO 
returnOO 
trueOO 
;OO 
}PP 	
publicTT 
staticTT 
boolTT 
ValidateSpamTT '
(TT' (
SpamTT( ,
spamTT- 1
)TT1 2
{UU 	
ifVV 
(VV 
spamVV 
==VV 
nullVV 
)VV 
throwVV #
newVV$ '
ValidationExceptionVV( ;
(VV; <
$strVV< U
)VVU V
;VVV W
elseWW 
ifWW 
(WW 
spamWW 
.WW 
QueryIdWW !
<=WW" $
$numWW% &
)WW& '
throwWW( -
newWW. 1
ValidationExceptionWW2 E
(WWE F
$strWWF g
)WWg h
;WWh i
elseXX 
ifXX 
(XX 
spamXX 
.XX 
UserIdXX  
<=XX! #
$numXX$ %
)XX% &
throwXX' ,
newXX- 0
ValidationExceptionXX1 D
(XXD E
$strXXE d
)XXd e
;XXe f
elseYY 
ifYY 
(YY 
spamYY 
.YY 
VerifyStatusIDYY (
<=YY) +
$numYY, -
||YY. 0
spamYY1 5
.YY5 6
VerifyStatusIDYY6 D
>YYE F
$numYYG H
)YYH I
throwYYJ O
newYYP S
ValidationExceptionYYT g
(YYg h
$str	YYh ’
)
YY’ “
;
YY“ ”
elseZZ 
ifZZ 
(ZZ 
StringZZ 
.ZZ 
IsNullOrEmptyZZ )
(ZZ) *
spamZZ* .
.ZZ. /
ReasonZZ/ 5
)ZZ5 6
)ZZ6 7
throwZZ8 =
newZZ> A
ValidationExceptionZZB U
(ZZU V
$strZZV {
)ZZ{ |
;ZZ| }
else[[ 
return[[ 
true[[ 
;[[ 
}\\ 	
public]] 
static]] 
bool]] #
ValidateUserCredentials]] +
(]]+ ,
String]], 2
Email]]3 8
,]]8 9
String]]9 ?
Password]]@ H
)]]I J
{^^ 	
var__ 
mail__ 
=__ 
new__ 
Regex__  
(__  !
$str__! D
)__D E
;__E F
var`` 
password`` 
=`` 
new`` 
Regex`` $
(``$ %
$str``% e
)``e f
;``f g
ifaa 
(aa 
!aa 
mailaa 
.aa 
IsMatchaa 
(aa 
Emailaa #
)aa# $
)aa$ %
throwaa& +
newaa, /
ValidationExceptionaa0 C
(aaC D
$"aaD F
$straaF m
{aam n
Emailaao t
}aau v
"aav w
)aaw x
;aax y
elsebb 
ifbb 
(bb 
!bb 
passwordbb 
.bb 
IsMatchbb %
(bb% &
Passwordbb& .
)bb. /
)bb/ 0
throwbb0 5
newbb6 9
ValidationExceptionbb: M
(bbM N
$"bbN P
$str	bbP š
{
bbš ›
Password
bb› £
}
bb£ ¤
"
bb¤ ¥
)
bb¥ ¦
;
bb¦ §
elsecc 
returncc 
truecc 
;cc 
}dd 	
}hh 
}ll 